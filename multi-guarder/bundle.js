var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function x(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function y(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}let b,v;function $(){if(void 0===b){b=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){b=!0}}return b}function j(t){v=t}const w=[],_=[],k=[],T=[],E=Promise.resolve();let M=!1;function A(t){k.push(t)}let C=!1;const z=new Set;function L(){if(!C){C=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];j(e),X(e.$$)}for(j(null),w.length=0;_.length;)_.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];z.has(e)||(z.add(e),e())}k.length=0}while(w.length);for(;T.length;)T.pop()();M=!1,C=!1,z.clear()}}function X(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const W=new Set;function B(t,e){-1===t.$$.dirty[0]&&(w.push(t),M||(M=!0,E.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(r,i,s,a,u,d,f,x=[-1]){const p=v;j(r);const h=r.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:n(),dirty:x,skip_bound:!1,root:i.target||p.$$.root};f&&f(h.root);let g=!1;if(h.ctx=s?s(r,i.props||{},((t,e,...n)=>{const l=n.length?n[0]:e;return h.ctx&&u(h.ctx[t],h.ctx[t]=l)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](l),g&&B(r,t)),e})):[],h.update(),g=!0,l(h.before_update),h.fragment=!!a&&a(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(c)}else h.fragment&&h.fragment.c();i.intro&&((m=r.$$.fragment)&&m.i&&(W.delete(m),m.i(y))),function(t,n,r,i){const{fragment:s,on_mount:c,on_destroy:a,after_update:u}=t.$$;s&&s.m(n,r),i||A((()=>{const n=c.map(e).filter(o);a?a.push(...n):l(n),t.$$.on_mount=[]})),u.forEach(A)}(r,i.target,i.anchor,i.customElement),L()}var m,y;j(p)}function N(t,e,n){const l=t.slice();return l[18]=e[n],l[19]=e,l[20]=n,l}function O(t,e,n){const l=t.slice();return l[21]=e[n],l}function S(t,e,n){const l=t.slice();return l[24]=e[n],l}function P(t){let e,n;return{c(){e=u("div"),p(e,"class","dot--attacker svelte-1xts1jx"),p(e,"data-title",n=t[24].title),p(e,"tabindex","0"),y(e,"--x",t[24].x),y(e,"--y",t[24].y),y(e,"--bgc",t[24].color)},m(t,n){s(t,e,n)},p(t,l){16&l&&n!==(n=t[24].title)&&p(e,"data-title",n),16&l&&y(e,"--x",t[24].x),16&l&&y(e,"--y",t[24].y),16&l&&y(e,"--bgc",t[24].color)},d(t){t&&c(e)}}}function V(t){let e,n,l;return{c(){e=u("div"),p(e,"class","dot svelte-1xts1jx"),p(e,"data-range",n=t[21].range),p(e,"data-title",l=t[21].title),y(e,"--x",t[21].x),y(e,"--y",t[21].y),y(e,"--bgc",t[21].color)},m(t,n){s(t,e,n)},p(t,o){4&o&&n!==(n=t[21].range)&&p(e,"data-range",n),4&o&&l!==(l=t[21].title)&&p(e,"data-title",l),4&o&&y(e,"--x",t[21].x),4&o&&y(e,"--y",t[21].y),4&o&&y(e,"--bgc",t[21].color)},d(t){t&&c(e)}}}function q(t){let e,n,o,r,a,y,b,v,$,j,w,_,k,T,E,M,A,C,z,L,X,W,B,H,N,O,S,P,V=t[18].title+"";function q(){t[6].call(v,t[19],t[20])}function I(){t[7].call(T,t[19],t[20])}function D(){t[8].call(L,t[19],t[20])}function F(){t[9].call(N,t[19],t[20])}return{c(){e=u("dt"),n=d(V),o=d(" - "),r=u("small"),r.textContent="護衛",a=u("dd"),y=u("label"),b=d("x:\n\t\t\t\t\t\t"),v=u("input"),j=f(),w=u("dd"),_=u("label"),k=d("y:\n\t\t\t\t\t\t"),T=u("input"),M=f(),A=u("dd"),C=u("label"),z=d("護衛範圍:\n\t\t\t\t\t\t"),L=u("input"),X=f(),W=u("dd"),B=u("label"),H=d("顏色:\n\t\t\t\t\t\t"),N=u("input"),O=f(),p(e,"class","svelte-1xts1jx"),p(v,"type","number"),p(v,"max",$=t[0]-1),p(v,"min","0"),p(a,"class","svelte-1xts1jx"),p(T,"type","number"),p(T,"max",E=t[0]-1),p(T,"min","0"),p(w,"class","svelte-1xts1jx"),p(L,"type","number"),p(L,"max","3"),p(L,"min","0"),p(A,"class","svelte-1xts1jx"),p(N,"type","color"),p(W,"class","svelte-1xts1jx")},m(l,c){s(l,e,c),i(e,n),i(e,o),i(e,r),s(l,a,c),i(a,y),i(y,b),i(y,v),m(v,t[18].x),i(a,j),s(l,w,c),i(w,_),i(_,k),i(_,T),m(T,t[18].y),i(w,M),s(l,A,c),i(A,C),i(C,z),i(C,L),m(L,t[18].range),i(A,X),s(l,W,c),i(W,B),i(B,H),i(B,N),m(N,t[18].color),i(W,O),S||(P=[x(v,"input",q),x(T,"input",I),x(L,"input",D),x(N,"input",F)],S=!0)},p(e,l){t=e,4&l&&V!==(V=t[18].title+"")&&g(n,V),1&l&&$!==($=t[0]-1)&&p(v,"max",$),4&l&&h(v.value)!==t[18].x&&m(v,t[18].x),1&l&&E!==(E=t[0]-1)&&p(T,"max",E),4&l&&h(T.value)!==t[18].y&&m(T,t[18].y),4&l&&h(L.value)!==t[18].range&&m(L,t[18].range),4&l&&m(N,t[18].color)},d(t){t&&c(e),t&&c(a),t&&c(w),t&&c(A),t&&c(W),S=!1,l(P)}}}function I(e){let n,o,r,b,v,j,w,_,k,T,E,M,C,z,L,X,W,B,H,I,D,F,G,J,K,Q,R,U,Y,Z,tt,et,nt,lt,ot,rt,it,st,ct,at,ut,dt,ft,xt=e[1].title+"",pt=e[4],ht=[];for(let t=0;t<pt.length;t+=1)ht[t]=P(S(e,pt,t));let gt=e[2],mt=[];for(let t=0;t<gt.length;t+=1)mt[t]=V(O(e,gt,t));let yt=e[2],bt=[];for(let t=0;t<yt.length;t+=1)bt[t]=q(N(e,yt,t));return{c(){n=u("div"),o=u("h1"),o.innerHTML='<a href="../">../</a>\n\t天地劫M 多重護衛優先級判定模擬',r=f(),b=u("div"),v=u("div"),j=u("div"),_=f();for(let t=0;t<ht.length;t+=1)ht[t].c();k=f();for(let t=0;t<mt.length;t+=1)mt[t].c();E=f(),M=u("div"),M.innerHTML='圖中方格為攻擊者可站的位置<br/>\n底色對應護衛單位\n<br/> \n<br/> \n<details open=""><summary>== 護衛優先級 說明 ==</summary> \n<pre><u>規則一：判定各護衛與「被攻擊者」距離</u>\n離「被攻擊者」最近者，最優先護衛\n\n<u>規則二：判定各護衛與「攻擊者」距離</u>\n若有複數最近的護衛群，改判定各護衛與「攻擊者」距離\n※ 坦X：上場順序最先者\n\n<u>狀況-1</u>：坦X 距離攻擊者最近\n  則依正序護衛\n  (=&gt; 坦X護衛)\n\n<u>狀況-2</u>：坦X 距離攻擊者不是最近\n  比坦X更近的那堆中，依倒序護衛\n  (愈後上場者、護衛優先級愈高)</pre></details>',C=f(),z=u("hr"),L=f(),X=u("form"),W=u("fieldset"),B=u("legend"),B.textContent="自訂區塊",H=f(),I=u("dl");for(let t=0;t<bt.length;t+=1)bt[t].c();D=u("dt"),F=d(xt),G=d(" - "),J=u("small"),J.textContent="被攻擊目標",K=u("dd"),Q=u("label"),R=d("x:\n\t\t\t\t\t"),U=u("input"),Z=f(),tt=u("dd"),et=u("label"),nt=d("y:\n\t\t\t\t\t"),lt=u("input"),rt=f(),it=u("dt"),it.textContent="格子數:\n\t\t\t",st=u("dd"),ct=u("input"),at=f(),ut=u("footer"),ut.innerHTML='<hr class="svelte-1xts1jx"/>\n\t\t資料參考：\n\t\t<a href="https://www.bilibili.com/video/BV1VB4y1y7fh/" target="_blank" rel="noreferrer noopener">「天地劫」多T护卫机制 详解 @ bilibili by u/墨_源</a>',p(o,"class","svelte-1xts1jx"),p(j,"class","dot attackee svelte-1xts1jx"),p(j,"data-title",w=e[1].title),y(j,"--x",e[1].x),y(j,"--y",e[1].y),p(v,"class","map svelte-1xts1jx"),y(v,"font-size",e[3]/e[0]+"px"),y(v,"height",e[3]+"px"),A((()=>e[5].call(v))),p(M,"class","intro"),p(z,"class","svelte-1xts1jx"),p(b,"class","map-box svelte-1xts1jx"),p(B,"class","svelte-1xts1jx"),p(D,"class","svelte-1xts1jx"),p(U,"type","number"),p(U,"max",Y=e[0]-1),p(U,"min","0"),p(K,"class","svelte-1xts1jx"),p(lt,"type","number"),p(lt,"max",ot=e[0]-1),p(lt,"min","0"),p(tt,"class","svelte-1xts1jx"),p(it,"class","svelte-1xts1jx"),p(ct,"type","number"),p(ct,"min","4"),p(st,"class","svelte-1xts1jx"),p(W,"class","svelte-1xts1jx"),p(X,"class","svelte-1xts1jx"),p(ut,"class","info svelte-1xts1jx"),p(n,"class","workspace svelte-1xts1jx")},m(t,l){s(t,n,l),i(n,o),i(n,r),i(n,b),i(b,v),i(v,j),i(v,_);for(let t=0;t<ht.length;t+=1)ht[t].m(v,null);i(v,k);for(let t=0;t<mt.length;t+=1)mt[t].m(v,null);T=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=u("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const l=$();let o;return l?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=x(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=x(n.contentWindow,"resize",e)}),i(t,n),()=>{(l||o&&n.contentWindow)&&o(),c(n)}}(v,e[5].bind(v)),i(b,E),i(b,M),i(b,C),i(b,z),i(n,L),i(n,X),i(X,W),i(W,B),i(W,H),i(W,I);for(let t=0;t<bt.length;t+=1)bt[t].m(I,null);i(I,D),i(D,F),i(D,G),i(D,J),i(I,K),i(K,Q),i(Q,R),i(Q,U),m(U,e[1].x),i(K,Z),i(I,tt),i(tt,et),i(et,nt),i(et,lt),m(lt,e[1].y),i(tt,rt),i(I,it),i(I,st),i(st,ct),m(ct,e[0]),i(n,at),i(n,ut),dt||(ft=[x(U,"input",e[10]),x(lt,"input",e[11]),x(ct,"input",e[12])],dt=!0)},p(t,[e]){if(2&e&&w!==(w=t[1].title)&&p(j,"data-title",w),2&e&&y(j,"--x",t[1].x),2&e&&y(j,"--y",t[1].y),16&e){let n;for(pt=t[4],n=0;n<pt.length;n+=1){const l=S(t,pt,n);ht[n]?ht[n].p(l,e):(ht[n]=P(l),ht[n].c(),ht[n].m(v,k))}for(;n<ht.length;n+=1)ht[n].d(1);ht.length=pt.length}if(4&e){let n;for(gt=t[2],n=0;n<gt.length;n+=1){const l=O(t,gt,n);mt[n]?mt[n].p(l,e):(mt[n]=V(l),mt[n].c(),mt[n].m(v,null))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=gt.length}if(9&e&&y(v,"font-size",t[3]/t[0]+"px"),8&e&&y(v,"height",t[3]+"px"),5&e){let n;for(yt=t[2],n=0;n<yt.length;n+=1){const l=N(t,yt,n);bt[n]?bt[n].p(l,e):(bt[n]=q(l),bt[n].c(),bt[n].m(I,D))}for(;n<bt.length;n+=1)bt[n].d(1);bt.length=yt.length}2&e&&xt!==(xt=t[1].title+"")&&g(F,xt),1&e&&Y!==(Y=t[0]-1)&&p(U,"max",Y),2&e&&h(U.value)!==t[1].x&&m(U,t[1].x),1&e&&ot!==(ot=t[0]-1)&&p(lt,"max",ot),2&e&&h(lt.value)!==t[1].y&&m(lt,t[1].y),1&e&&h(ct.value)!==t[0]&&m(ct,t[0])},i:t,o:t,d(t){t&&c(n),a(ht,t),a(mt,t),T(),a(bt,t),dt=!1,l(ft)}}}function D(t,e){return t.index-e.index}function F(t,e,n){let l,o=6,r={index:10,order:10,title:"受",x:2,y:2},i=[{index:1,order:1,title:"坦1",x:2,y:0,range:2,color:"#ff9999"},{index:2,order:2,title:"坦2",x:4,y:2,range:3,color:"#99ff99"},{index:3,order:3,title:"坦3",x:2,y:4,range:2,color:"#9999ff"},{index:4,order:4,title:"坦4",x:0,y:2,range:2,color:"#99ff33"}],s=[],c={title:""};function a(t){let e=[],l=function(){let t=[],e=2*o;return i.forEach((n=>{if(n.range<n.distance2T)return null;e>=n.distance2T&&(e=n.distance2T,t[n.distance2T]||(t[n.distance2T]=[]),t[n.distance2T].push(n))})),t[e].sort(D)}();for(let t=o-1;t>=0;t--)for(let n=o-1;n>=0;n--){let r=u(t,n,l);e[t+n*o]={title:`${r.title}`,x:t,y:n,color:r.color}}n(4,s=e)}function u(t,e,n){if(!n||0===n.length)return c;let l,o=n[0];if(1===n.length)return o;let r=n.filter(((n,o)=>(n.distance2A=Math.abs(n.y-e)+Math.abs(n.x-t),o||(l=n.distance2A),l>n.distance2A)));return r.length?r[r.length-1]:o}return t.$$.update=()=>{7&t.$$.dirty&&(i.forEach((t=>{t.distance2T=Math.abs(t.y-r.y)+Math.abs(t.x-r.x)})),a())},[o,r,i,l,s,function(){l=this.clientWidth,n(3,l)},function(t,e){t[e].x=h(this.value),n(2,i)},function(t,e){t[e].y=h(this.value),n(2,i)},function(t,e){t[e].range=h(this.value),n(2,i)},function(t,e){t[e].color=this.value,n(2,i)},function(){r.x=h(this.value),n(1,r)},function(){r.y=h(this.value),n(1,r)},function(){o=h(this.value),n(0,o)}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),H(this,t,F,I,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
