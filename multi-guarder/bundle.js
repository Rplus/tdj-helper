var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function s(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function g(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?null:+t}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function x(t,e,n,l){t.style.setProperty(e,n,l?"important":"")}let b,v;function $(){if(void 0===b){b=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){b=!0}}return b}function w(t){v=t}const _=[],k=[],E=[],M=[],C=Promise.resolve();let A=!1;function T(t){E.push(t)}let z=!1;const L=new Set;function X(){if(!z){z=!0;do{for(let t=0;t<_.length;t+=1){const e=_[t];w(e),W(e.$$)}for(w(null),_.length=0;k.length;)k.pop()();for(let t=0;t<E.length;t+=1){const e=E[t];L.has(e)||(L.add(e),e())}E.length=0}while(_.length);for(;M.length;)M.pop()();A=!1,z=!1,L.clear()}}function W(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const j=new Set;function B(t,e){-1===t.$$.dirty[0]&&(_.push(t),A||(A=!0,C.then(X)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function H(r,i,c,s,u,d,f,g=[-1]){const p=v;w(r);const y=r.$$={fragment:null,ctx:null,props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:n(),dirty:g,skip_bound:!1,root:i.target||p.$$.root};f&&f(y.root);let h=!1;if(y.ctx=c?c(r,i.props||{},((t,e,...n)=>{const l=n.length?n[0]:e;return y.ctx&&u(y.ctx[t],y.ctx[t]=l)&&(!y.skip_bound&&y.bound[t]&&y.bound[t](l),h&&B(r,t)),e})):[],y.update(),h=!0,l(y.before_update),y.fragment=!!s&&s(y.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);y.fragment&&y.fragment.l(t),t.forEach(a)}else y.fragment&&y.fragment.c();i.intro&&((m=r.$$.fragment)&&m.i&&(j.delete(m),m.i(x))),function(t,n,r,i){const{fragment:c,on_mount:a,on_destroy:s,after_update:u}=t.$$;c&&c.m(n,r),i||T((()=>{const n=a.map(e).filter(o);s?s.push(...n):l(n),t.$$.on_mount=[]})),u.forEach(T)}(r,i.target,i.anchor,i.customElement),X()}var m,x;w(p)}function N(t,e,n){const l=t.slice();return l[18]=e[n],l[19]=e,l[20]=n,l}function O(t,e,n){const l=t.slice();return l[18]=e[n],l}function S(t,e,n){const l=t.slice();return l[23]=e[n],l}function P(t){let e,n;return{c(){e=u("div"),p(e,"class","dot--attacker svelte-12ye4gl"),p(e,"data-title",n=t[23].title),p(e,"tabindex","0"),x(e,"--x",t[23].x),x(e,"--y",t[23].y),x(e,"--bgc",t[23].color)},m(t,n){c(t,e,n)},p(t,l){16&l&&n!==(n=t[23].title)&&p(e,"data-title",n),16&l&&x(e,"--x",t[23].x),16&l&&x(e,"--y",t[23].y),16&l&&x(e,"--bgc",t[23].color)},d(t){t&&a(e)}}}function V(t){let e,n,l;return{c(){e=u("div"),p(e,"class","dot svelte-12ye4gl"),p(e,"data-range",n=t[18].range),p(e,"data-title",l=t[18].title),x(e,"--x",t[18].x),x(e,"--y",t[18].y),x(e,"--bgc",t[18].color)},m(t,n){c(t,e,n)},p(t,o){4&o&&n!==(n=t[18].range)&&p(e,"data-range",n),4&o&&l!==(l=t[18].title)&&p(e,"data-title",l),4&o&&x(e,"--x",t[18].x),4&o&&x(e,"--y",t[18].y),4&o&&x(e,"--bgc",t[18].color)},d(t){t&&a(e)}}}function q(t){let e,n,o,r,s,x,b,v,$,w,_,k,E,M,C,A,T,z,L,X,W,j,B,H,N,O,S,P,V=t[18].title+"";function q(){t[6].call(v,t[19],t[20])}function I(){t[7].call(M,t[19],t[20])}function D(){t[8].call(X,t[19],t[20])}function F(){t[9].call(N,t[19],t[20])}return{c(){e=u("dt"),n=d(V),o=d(" - "),r=u("small"),r.textContent="護衛",s=u("dd"),x=u("label"),b=d("x:\n\t\t\t\t\t\t"),v=u("input"),w=f(),_=u("dd"),k=u("label"),E=d("y:\n\t\t\t\t\t\t"),M=u("input"),A=f(),T=u("dd"),z=u("label"),L=d("護衛範圍:\n\t\t\t\t\t\t"),X=u("input"),W=f(),j=u("dd"),B=u("label"),H=d("顏色:\n\t\t\t\t\t\t"),N=u("input"),O=f(),p(e,"class","svelte-12ye4gl"),p(v,"type","number"),p(v,"max",$=t[0]-1),p(v,"min","0"),p(s,"class","svelte-12ye4gl"),p(M,"type","number"),p(M,"max",C=t[0]-1),p(M,"min","0"),p(_,"class","svelte-12ye4gl"),p(X,"type","number"),p(X,"max","3"),p(X,"min","0"),p(T,"class","svelte-12ye4gl"),p(N,"type","color"),p(j,"class","svelte-12ye4gl")},m(l,a){c(l,e,a),i(e,n),i(e,o),i(e,r),c(l,s,a),i(s,x),i(x,b),i(x,v),m(v,t[18].x),i(s,w),c(l,_,a),i(_,k),i(k,E),i(k,M),m(M,t[18].y),i(_,A),c(l,T,a),i(T,z),i(z,L),i(z,X),m(X,t[18].range),i(T,W),c(l,j,a),i(j,B),i(B,H),i(B,N),m(N,t[18].color),i(j,O),S||(P=[g(v,"input",q),g(M,"input",I),g(X,"input",D),g(N,"input",F)],S=!0)},p(e,l){t=e,4&l&&V!==(V=t[18].title+"")&&h(n,V),1&l&&$!==($=t[0]-1)&&p(v,"max",$),4&l&&y(v.value)!==t[18].x&&m(v,t[18].x),1&l&&C!==(C=t[0]-1)&&p(M,"max",C),4&l&&y(M.value)!==t[18].y&&m(M,t[18].y),4&l&&y(X.value)!==t[18].range&&m(X,t[18].range),4&l&&m(N,t[18].color)},d(t){t&&a(e),t&&a(s),t&&a(_),t&&a(T),t&&a(j),S=!1,l(P)}}}function I(e){let n,o,r,b,v,w,_,k,E,M,C,A,z,L,X,W,j,B,H,I,D,F,G,J,K,Q,R,U,Y,Z,tt,et,nt,lt,ot,rt,it,ct,at,st,ut,dt,ft,gt=e[1].title+"",pt=e[4],yt=[];for(let t=0;t<pt.length;t+=1)yt[t]=P(S(e,pt,t));let ht=e[2],mt=[];for(let t=0;t<ht.length;t+=1)mt[t]=V(O(e,ht,t));let xt=e[2],bt=[];for(let t=0;t<xt.length;t+=1)bt[t]=q(N(e,xt,t));return{c(){n=u("div"),o=u("h1"),o.innerHTML='<a href="../">../</a>\n\t天地劫M 多重護衛優先級判定模擬',r=f(),b=u("div"),v=u("div"),w=u("div"),k=f();for(let t=0;t<yt.length;t+=1)yt[t].c();E=f();for(let t=0;t<mt.length;t+=1)mt[t].c();C=f(),A=u("div"),A.innerHTML='圖中方格為攻擊者可站的位置<br/>\n底色對應護衛單位\n<br/> \n<br/> \n<details open=""><summary>== 護衛優先級 說明 ==</summary> \n<pre><u>規則一：判定各護衛與「被攻擊者」距離</u>\n離「被攻擊者」最近者，最優先護衛\n\n<u>規則二：判定各護衛與「攻擊者」距離</u>\n若有複數最近的護衛群，改判定各護衛與「攻擊者」距離\n※ 坦X：上場順序最先者\n\n<u>狀況-1</u>：坦X 距離攻擊者最近\n  則依正序護衛\n  (=&gt; 坦X護衛)\n\n<u>狀況-2</u>：坦X 距離攻擊者不是最近\n  比坦X更近的那堆中，依倒序護衛\n  (愈後上場者、護衛優先級愈高)</pre></details>',z=f(),L=u("hr"),X=f(),W=u("form"),j=u("fieldset"),B=u("legend"),B.textContent="自訂區塊",H=f(),I=u("dl");for(let t=0;t<bt.length;t+=1)bt[t].c();D=u("dt"),F=d(gt),G=d(" - "),J=u("small"),J.textContent="被攻擊目標",K=u("dd"),Q=u("label"),R=d("x:\n\t\t\t\t\t"),U=u("input"),Z=f(),tt=u("dd"),et=u("label"),nt=d("y:\n\t\t\t\t\t"),lt=u("input"),rt=f(),it=u("dt"),it.textContent="格子數:\n\t\t\t",ct=u("dd"),at=u("input"),st=f(),ut=u("footer"),ut.innerHTML='<hr class="svelte-12ye4gl"/>\n\t\t資料參考：\n\t\t<a href="https://www.bilibili.com/video/BV1VB4y1y7fh/" target="_blank" rel="noreferrer noopener">「天地劫」多T护卫机制 详解 @ bilibili by u/墨_源</a>',p(o,"class","svelte-12ye4gl"),p(w,"class","dot attackee svelte-12ye4gl"),p(w,"data-title",_=e[1].title),x(w,"--x",e[1].x),x(w,"--y",e[1].y),p(v,"class","map svelte-12ye4gl"),x(v,"font-size",e[3]/e[0]+"px"),x(v,"height",e[3]+"px"),T((()=>e[5].call(v))),p(A,"class","intro"),p(L,"class","svelte-12ye4gl"),p(b,"class","map-box svelte-12ye4gl"),p(B,"class","svelte-12ye4gl"),p(D,"class","svelte-12ye4gl"),p(U,"type","number"),p(U,"max",Y=e[0]-1),p(U,"min","0"),p(K,"class","svelte-12ye4gl"),p(lt,"type","number"),p(lt,"max",ot=e[0]-1),p(lt,"min","0"),p(tt,"class","svelte-12ye4gl"),p(it,"class","svelte-12ye4gl"),p(at,"type","number"),p(at,"min","4"),p(ct,"class","svelte-12ye4gl"),p(j,"class","svelte-12ye4gl"),p(W,"class","svelte-12ye4gl"),p(ut,"class","info svelte-12ye4gl"),p(n,"class","workspace svelte-12ye4gl")},m(t,l){c(t,n,l),i(n,o),i(n,r),i(n,b),i(b,v),i(v,w),i(v,k);for(let t=0;t<yt.length;t+=1)yt[t].m(v,null);i(v,E);for(let t=0;t<mt.length;t+=1)mt[t].m(v,null);M=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=u("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const l=$();let o;return l?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=g(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{o=g(n.contentWindow,"resize",e)}),i(t,n),()=>{(l||o&&n.contentWindow)&&o(),a(n)}}(v,e[5].bind(v)),i(b,C),i(b,A),i(b,z),i(b,L),i(n,X),i(n,W),i(W,j),i(j,B),i(j,H),i(j,I);for(let t=0;t<bt.length;t+=1)bt[t].m(I,null);i(I,D),i(D,F),i(D,G),i(D,J),i(I,K),i(K,Q),i(Q,R),i(Q,U),m(U,e[1].x),i(K,Z),i(I,tt),i(tt,et),i(et,nt),i(et,lt),m(lt,e[1].y),i(tt,rt),i(I,it),i(I,ct),i(ct,at),m(at,e[0]),i(n,st),i(n,ut),dt||(ft=[g(U,"input",e[10]),g(lt,"input",e[11]),g(at,"input",e[12])],dt=!0)},p(t,[e]){if(2&e&&_!==(_=t[1].title)&&p(w,"data-title",_),2&e&&x(w,"--x",t[1].x),2&e&&x(w,"--y",t[1].y),16&e){let n;for(pt=t[4],n=0;n<pt.length;n+=1){const l=S(t,pt,n);yt[n]?yt[n].p(l,e):(yt[n]=P(l),yt[n].c(),yt[n].m(v,E))}for(;n<yt.length;n+=1)yt[n].d(1);yt.length=pt.length}if(4&e){let n;for(ht=t[2],n=0;n<ht.length;n+=1){const l=O(t,ht,n);mt[n]?mt[n].p(l,e):(mt[n]=V(l),mt[n].c(),mt[n].m(v,null))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=ht.length}if(9&e&&x(v,"font-size",t[3]/t[0]+"px"),8&e&&x(v,"height",t[3]+"px"),5&e){let n;for(xt=t[2],n=0;n<xt.length;n+=1){const l=N(t,xt,n);bt[n]?bt[n].p(l,e):(bt[n]=q(l),bt[n].c(),bt[n].m(I,D))}for(;n<bt.length;n+=1)bt[n].d(1);bt.length=xt.length}2&e&&gt!==(gt=t[1].title+"")&&h(F,gt),1&e&&Y!==(Y=t[0]-1)&&p(U,"max",Y),2&e&&y(U.value)!==t[1].x&&m(U,t[1].x),1&e&&ot!==(ot=t[0]-1)&&p(lt,"max",ot),2&e&&y(lt.value)!==t[1].y&&m(lt,t[1].y),1&e&&y(at.value)!==t[0]&&m(at,t[0])},i:t,o:t,d(t){t&&a(n),s(yt,t),s(mt,t),M(),s(bt,t),dt=!1,l(ft)}}}function D(t,e,n){let l,o=6,r={index:10,order:10,title:"受",x:2,y:2},i=[{index:1,order:1,title:"坦1",x:2,y:0,range:2,color:"#ff9999"},{index:2,order:2,title:"坦2",x:4,y:2,range:3,color:"#99ff99"},{index:3,order:3,title:"坦3",x:2,y:4,range:2,color:"#9999ff"},{index:4,order:4,title:"坦4",x:0,y:2,range:2,color:"#99ff33"}],c=[],a={title:""};function s(t){let e=[],l=function(){let t=[],e=2*o;return i.forEach((n=>{if(n.range<n.distance)return null;e>=n.distance&&(e=n.distance,t[n.distance]||(t[n.distance]=[]),t[n.distance].push(n))})),t[e]}();for(let t=o-1;t>=0;t--)for(let n=o-1;n>=0;n--){let r=u(t,n,l);e[t+n*o]={title:`${r.title}`,x:t,y:n,color:r.color}}n(4,c=e)}function u(t,e,n){if(!n||0===n.length)return a;if(1===n.length)return n[0];let l=2*o,r=999,i=0,c=n.map((n=>{let o=Math.abs(n.y-e)+Math.abs(n.x-t),{index:c,title:a,color:s}=n;return l>o&&(l=o),r>c&&(r=c),i<c&&(i=c),{index:c,title:a,distance:o,color:s}})),s=c.find((t=>t.index===r));return c.find((t=>t.index===i)),s.distance===l?s:c.filter((t=>t.distance<s.distance)).sort(((t,e)=>e.index-t.index))[0]}return t.$$.update=()=>{6&t.$$.dirty&&i.forEach((t=>{t.distance=Math.abs(t.y-r.y)+Math.abs(t.x-r.x)})),7&t.$$.dirty&&s()},[o,r,i,l,c,function(){l=this.clientWidth,n(3,l)},function(t,e){t[e].x=y(this.value),n(2,i)},function(t,e){t[e].y=y(this.value),n(2,i)},function(t,e){t[e].range=y(this.value),n(2,i)},function(t,e){t[e].color=this.value,n(2,i)},function(){r.x=y(this.value),n(1,r)},function(){r.y=y(this.value),n(1,r)},function(){o=y(this.value),n(0,o)}]}return new class extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}{constructor(t){super(),H(this,t,D,I,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
