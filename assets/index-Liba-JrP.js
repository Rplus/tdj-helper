import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css               */import{D as H,O as pt,y as ie,s as pe,P as _t,S as ke,i as ye,e as G,a as d,b as y,d as c,A as dt,f as J,g as r,B as Ke,z as C,w as I,N as se,o as A,p as be,Q as ce,v as F,x as Ce,r as mt,R as ht,q as gt,T as ne,U as bt,C as vt,V as kt,F as Me,G as Ne,t as le,l as yt,m as ue,I as Je,W as St,X as Pt,Y as wt,k as Ot}from"./index-Y_emMXbY.js";function Tt(e,t,l){return e<=t?t:e>=l?l:e}const rt="TDJ-HELPER";function ot(e){if(!e||!e.key)return!1;let t=Ee()||{};t[e.key]=e.value,localStorage.setItem(rt,JSON.stringify(t))}function Ee(e){let t=localStorage.getItem(rt);return t?(t=JSON.parse(t),e?t[e]:t):null}const qt={atk:{天:[10,4],地:[5,2],荒:[7,3]},def:{天:[5,2],地:[10,4],荒:[7,3]}},Ae=[{label:"--",score:0,type:"atk"},{label:"攻擊",score:11,type:"atk"},{label:"傷害",score:10,type:"atk"},{label:"穿透",score:6,type:"atk"},{label:"暴擊",score:3,type:"atk"},{label:"反擊",score:0,type:"atk"},{label:"氣血",score:7,type:"def"},{label:"免傷",score:5,type:"def"},{label:"防禦",score:1,type:"def"},{label:"抗暴",score:0,type:"def"}];function at(e=Ae){return e.map(t=>(t.range=qt[t.type],t))}const Rt=at();function ge(e,t=Rt){return t.find(l=>l.label===e)}const Qe={天:164,地:143,荒:145},It=["荒蟄","頭狼","幽魎","羅鬼","妖術師","朱焰魔火","九環朱蝮","赤練鬼","剛破鬼","凶骸兵","冥葵","屍魔術士","咒石兵","冰魔蠍","死魘鬼卒","鬼面花蛛","百眼翼魔"];function fe(e){return JSON.parse(JSON.stringify(e))}const ut={prop:"--",value:5},te=[];function Mt(e,t){return{subscribe:Ue(e,t).subscribe}}function Ue(e,t=H){let l;const n=new Set;function o(s){if(pe(e,s)&&(e=s,l)){const p=!te.length;for(const u of n)u[1](),te.push(u,e);if(p){for(let u=0;u<te.length;u+=2)te[u][0](te[u+1]);te.length=0}}}function a(s){o(s(e))}function i(s,p=H){const u=[s,p];return n.add(u),n.size===1&&(l=t(o,a)||H),s(e),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:o,update:a,subscribe:i}}function ct(e,t,l){const n=!Array.isArray(e),o=n?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Mt(l,(i,s)=>{let p=!1;const u=[];let g=0,m=H;const h=()=>{if(g)return;m();const b=t(n?u[0]:u,i,s);a?i(b):m=_t(b)?b:H},f=o.map((b,k)=>pt(b,E=>{u[k]=E,g&=~(1<<k),p&&h()},()=>{g|=1<<k}));return p=!0,h(),function(){ie(f),m(),p=!1}})}function Nt(){let e=Ee("historeUrls")||[];const{subscribe:t,set:l,update:n}=Ue(e);return{subscribe:t,add:o=>n(a=>[...new Set([...a,o])]),remove:o=>n(a=>a.filter(i=>i!==o)),reset:()=>l([])}}const ve=Nt(),Jt=ct(ve,e=>(ot({key:"historeUrls",value:e}),e));function At(){let e=Ee("oriProps")||fe(Ae);const{subscribe:t,set:l,update:n}=Ue(e);return{subscribe:t,update:n,set:l,reset:()=>l(fe(Ae))}}const $=At(),Ct=ct($,(e,t)=>(ot({key:"oriProps",value:e}),e));function We(e,t,l){const n=e.slice();return n[8]=t[l],n[10]=l,n}function Xe(e){let t,l=e[8].label+" "+e[8].score,n,o,a;return{c(){t=d("option"),n=F(l),o=y(),t.__value=a=e[8].label,C(t,t.__value)},m(i,s){J(i,t,s),r(t,n),r(t,o)},p(i,s){s&8&&l!==(l=i[8].label+" "+i[8].score)&&Ce(n,l),s&8&&a!==(a=i[8].label)&&(t.__value=a,C(t,t.__value))},d(i){i&&A(t)}}}function Et(e){let t,l,n,o,a,i,s,p,u,g,m=G(e[3]),h=[];for(let f=0;f<m.length;f+=1)h[f]=Xe(We(e,m,f));return{c(){t=d("div"),l=d("select");for(let f=0;f<h.length;f+=1)h[f].c();n=y(),o=d("input"),a=y(),i=d("div"),s=d("input"),c(l,"class","svelte-1dran9s"),e[0].prop===void 0&&dt(()=>e[5].call(l)),c(o,"type","number"),c(o,"max",e[2]),c(o,"min",e[1]),c(o,"class","svelte-1dran9s"),c(s,"type","range"),c(s,"max",e[2]),c(s,"min",e[1]),c(s,"style",p=`--max: ${e[2]};`),c(s,"class","svelte-1dran9s"),c(i,"class","flex svelte-1dran9s"),c(t,"class","flex list-item svelte-1dran9s")},m(f,b){J(f,t,b),r(t,l);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(l,null);Ke(l,e[0].prop,!0),r(t,n),r(t,o),C(o,e[0].value),r(t,a),r(t,i),r(i,s),C(s,e[0].value),u||(g=[I(l,"change",e[5]),I(o,"input",e[6]),I(s,"change",e[7]),I(s,"input",e[7])],u=!0)},p(f,[b]){if(b&8){m=G(f[3]);let k;for(k=0;k<m.length;k+=1){const E=We(f,m,k);h[k]?h[k].p(E,b):(h[k]=Xe(E),h[k].c(),h[k].m(l,null))}for(;k<h.length;k+=1)h[k].d(1);h.length=m.length}b&9&&Ke(l,f[0].prop),b&4&&c(o,"max",f[2]),b&2&&c(o,"min",f[1]),b&9&&se(o.value)!==f[0].value&&C(o,f[0].value),b&4&&c(s,"max",f[2]),b&2&&c(s,"min",f[1]),b&4&&p!==(p=`--max: ${f[2]};`)&&c(s,"style",p),b&9&&C(s,f[0].value)},i:H,o:H,d(f){f&&A(t),be(h,f),u=!1,ie(g)}}}function Ut(e,t,l){let n,o,a;ce(e,$,m=>l(3,a=m));let{position:i="天"}=t,{item:s=fe(ut)}=t;function p(){s.prop=mt(this),l(0,s)}function u(){s.value=se(this.value),l(0,s)}function g(){s.value=se(this.value),l(0,s)}return e.$$set=m=>{"position"in m&&l(4,i=m.position),"item"in m&&l(0,s=m.item)},e.$$.update=()=>{e.$$.dirty&17&&l(2,[n,o]=ge(s.prop).range[i]||[],n,(l(1,o),l(0,s),l(4,i)))},[s,o,n,a,i,p,u,g]}class jt extends ke{constructor(t){super(),ye(this,t,Ut,Et,pe,{position:4,item:0})}}function Ze(e,t,l){const n=e.slice();return n[5]=t[l],n}function $e(e,t){let l,n,o,a,i=xe(t[5])+"",s,p,u;function g(){return t[2](t[5])}function m(){return t[3](t[5])}return{key:e,first:null,c(){l=d("div"),n=d("button"),n.textContent="⨯",o=y(),a=d("span"),s=y(),c(n,"class","btn svelte-1iaw0d8"),c(l,"class","li svelte-1iaw0d8"),this.first=l},m(h,f){J(h,l,f),r(l,n),r(l,o),r(l,a),a.innerHTML=i,r(l,s),p||(u=[I(n,"click",ne(g)),I(a,"click",ne(m))],p=!0)},p(h,f){t=h,f&1&&i!==(i=xe(t[5])+"")&&(a.innerHTML=i)},d(h){h&&A(l),p=!1,ie(u)}}}function Ht(e){let t,l,n,o,a=[],i=new Map,s=G(e[0]);const p=u=>u[5];for(let u=0;u<s.length;u+=1){let g=Ze(e,s,u),m=p(g);i.set(m,a[u]=$e(m,g))}return{c(){t=d("details"),l=d("summary"),l.textContent="魂石紀錄:",n=y(),o=d("div");for(let u=0;u<a.length;u+=1)a[u].c();c(o,"class","ul svelte-1iaw0d8"),t.open=!0,c(t,"class","aside svelte-1iaw0d8")},m(u,g){J(u,t,g),r(t,l),r(t,n),r(t,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(o,null)},p(u,[g]){g&3&&(s=G(u[0]),a=ht(a,g,p,1,u,s,i,o,bt,$e,null,Ze))},i:H,o:H,d(u){u&&A(t);for(let g=0;g<a.length;g+=1)a[g].d()}}}function xe(e){let t=JSON.parse(e);return[Ie("",t.title+"‧"+t.position),Ie("計分",t.score),...t.items.filter(l=>l.prop!=="--").map(l=>Ie(l.prop,l.value))].join("")}function Ie(e="",t=""){return`<span class="i ib">
      <sup>${e}</sup>
      ${t}
    </span>`}function Bt(e,t,l){let n;ce(e,Jt,p=>l(0,n=p));const o=gt();function a(p){o("apply",{url:p})}return[n,a,p=>ve.remove(p),p=>a(p)]}class Lt extends ke{constructor(t){super(),ye(this,t,Bt,Ht,pe,{})}}function et(e,t,l){const n=e.slice();return n[7]=t[l],n[8]=t,n[9]=l,n}function tt(e){let t,l=e[7].label+"",n,o,a,i,s,p,u,g;function m(){e[4].call(a,e[8],e[9])}function h(){e[5].call(s,e[8],e[9])}return{c(){t=d("div"),n=F(l),o=y(),a=d("input"),i=y(),s=d("input"),p=y(),c(a,"type","number"),c(a,"max","20"),c(a,"step","1"),c(a,"min","0"),c(s,"type","range"),c(s,"max","20"),c(s,"step","1"),c(s,"min","0")},m(f,b){J(f,t,b),r(t,n),r(t,o),r(t,a),C(a,e[7].score),r(t,i),r(t,s),C(s,e[7].score),r(t,p),u||(g=[I(a,"input",m),I(s,"change",h),I(s,"input",h)],u=!0)},p(f,b){e=f,b&2&&l!==(l=e[7].label+"")&&Ce(n,l),b&2&&se(a.value)!==e[7].score&&C(a,e[7].score),b&2&&C(s,e[7].score)},d(f){f&&A(t),u=!1,ie(g)}}}function lt(e){let t,l=e[7].label!=="--"&&tt(e);return{c(){l&&l.c(),t=vt()},m(n,o){l&&l.m(n,o),J(n,t,o)},p(n,o){n[7].label!=="--"?l?l.p(n,o):(l=tt(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){n&&A(t),l&&l.d(n)}}}function Dt(e){let t,l,n,o,a,i,s,p,u,g,m,h,f,b,k,E,O=G(e[1]),M=[];for(let w=0;w<O.length;w+=1)M[w]=lt(et(e,O,w));return{c(){t=d("span"),t.textContent="⚙️",l=y(),n=d("div"),o=d("div"),a=y(),i=d("div"),s=d("fieldset"),p=d("legend"),p.textContent="調整計分權重",u=y();for(let w=0;w<M.length;w+=1)M[w].c();g=y(),m=d("div"),h=d("input"),f=y(),b=d("input"),c(o,"class","dialog-overlay svelte-d31rkv"),c(h,"type","submit"),h.value="✓",c(b,"type","reset"),c(m,"class","flex jc-sb"),c(i,"class","dialog-content svelte-d31rkv"),c(n,"class","dialog svelte-d31rkv"),n.hidden=e[0]},m(w,U){J(w,t,U),J(w,l,U),J(w,n,U),r(n,o),r(n,a),r(n,i),r(i,s),r(s,p),r(s,u);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(s,null);r(i,g),r(i,m),r(m,h),r(m,f),r(m,b),k||(E=[I(t,"click",e[2]),I(o,"click",e[2]),I(h,"click",e[2]),I(b,"click",e[3])],k=!0)},p(w,[U]){if(U&2){O=G(w[1]);let v;for(v=0;v<O.length;v+=1){const K=et(w,O,v);M[v]?M[v].p(K,U):(M[v]=lt(K),M[v].c(),M[v].m(s,null))}for(;v<M.length;v+=1)M[v].d(1);M.length=O.length}U&1&&(n.hidden=w[0])},i:H,o:H,d(w){w&&(A(t),A(l),A(n)),be(M,w),k=!1,ie(E)}}}function zt(e,t,l){let n;ce(e,Ct,u=>l(6,u)),ce(e,$,u=>l(1,n=u));let o=!0;function a(){l(0,o=!o)}function i(){$.reset()}function s(u,g){u[g].score=se(this.value),$.set(n)}function p(u,g){u[g].score=se(this.value),$.set(n)}return[o,n,a,i,s,p]}class Gt extends ke{constructor(t){super(),ye(this,t,zt,Dt,pe,{})}}function nt(e,t,l){const n=e.slice();return n[21]=t[l],n[22]=t,n[23]=l,n}function Vt(e,t,l){const n=e.slice();return n[24]=t[l],n}function Yt(e){let t;return{c(){t=d("option"),t.__value=e[24],C(t,t.__value)},m(l,n){J(l,t,n)},p:H,d(l){l&&A(t)}}}function st(e){let t,l,n;function o(i){e[14](i,e[21],e[22],e[23])}let a={position:e[0]};return e[21]!==void 0&&(a.item=e[21]),t=new jt({props:a}),St.push(()=>Pt(t,"item",o)),{c(){Me(t.$$.fragment)},m(i,s){Ne(t,i,s),n=!0},p(i,s){e=i;const p={};s&1&&(p.position=e[0]),!l&&s&2&&(l=!0,p.item=e[21],wt(()=>l=!1)),t.$set(p)},i(i){n||(le(t.$$.fragment,i),n=!0)},o(i){ue(t.$$.fragment,i),n=!1},d(i){Je(t,i)}}}function Ft(e){let t,l,n,o,a,i,s,p,u,g,m,h,f,b,k,E,O,M,w,U,v,K,N,q,j,R,B,L,Se,je,D,re,_e,He,oe,Be,de=e[3].max+"",Pe,Le,V,Y,me,De,x,ze,ae,he,we,Q,Oe,W,ee,Ge,Te,z,qe,Re,Ve,Ye=G(It),X=[];for(let _=0;_<Ye.length;_+=1)X[_]=Yt(Vt(e,Ye,_));let Z=G(e[1]),T=[];for(let _=0;_<Z.length;_+=1)T[_]=st(nt(e,Z,_));const ft=_=>ue(T[_],1,1,()=>{T[_]=null});return Q=new Lt({}),Q.$on("apply",e[6]),ee=new Gt({}),qe=kt(e[11][0]),{c(){t=d("h1"),t.innerHTML=`<a href="../">../</a> <ruby>絕品魂石 評估
    <rt style="color: #0003">天地劫M</rt></ruby>`,l=y(),n=d("form"),o=d("fieldset"),a=d("legend"),i=F(`絕‧魂石孔位
      `),s=d("input"),p=y(),u=d("datalist");for(let _=0;_<X.length;_+=1)X[_].c();g=y(),m=d("div"),h=d("label"),f=d("input"),b=F(`
        天`),k=y(),E=d("label"),O=d("input"),M=F(`
        地`),w=y(),U=d("label"),v=d("input"),K=F(`
        荒`),N=y(),q=d("fieldset"),j=d("legend"),j.textContent="副屬",R=y();for(let _=0;_<T.length;_+=1)T[_].c();B=y(),L=d("fieldset"),Se=d("legend"),Se.textContent="計分",je=y(),D=d("input"),He=y(),oe=d("sub"),Be=F("/ "),Pe=F(de),Le=y(),V=d("div"),Y=d("input"),De=y(),x=d("input"),ze=y(),ae=d("input"),we=y(),Me(Q.$$.fragment),Oe=y(),W=d("footer"),Me(ee.$$.fragment),Ge=y(),Te=d("ul"),Te.innerHTML=`<li>Made by Rplus</li> <li>計分標準參考來源：
      <br/> <a href="https://bbs.nga.cn/read.php?tid=26383169&amp;rand=456" target="_blank" rel="noopener">魂石选择终极攻略 | NGA玩家社区</a></li>`,c(s,"class","title svelte-16fqgol"),c(s,"type","search"),c(s,"list","rock-types"),c(u,"id","rock-types"),c(f,"type","radio"),c(f,"name","position"),f.__value="天",C(f,f.__value),f.checked=!0,c(O,"type","radio"),c(O,"name","position"),O.__value="地",C(O,O.__value),c(v,"type","radio"),c(v,"name","position"),v.__value="荒",C(v,v.__value),c(m,"class","flex jc-se"),c(D,"type","text"),D.readOnly=!0,c(D,"class","output svelte-16fqgol"),D.value=re=e[3].score,c(D,"style",_e=`--score: ${e[3].score}; --max: ${e[3].max}`),c(oe,"class","max svelte-16fqgol"),c(Y,"class","save svelte-16fqgol"),c(Y,"type","submit"),Y.value="記錄",Y.disabled=me=!e[3].score,c(x,"type","submit"),x.value="生成上下限",c(x,"class","svelte-16fqgol"),c(ae,"type","reset"),c(ae,"class","svelte-16fqgol"),c(V,"class","flex jc-sb form-btns svelte-16fqgol"),c(L,"class",""),c(n,"class","main"),c(n,"style",he=`--break-point: ${Qe[e[0]]}`),c(W,"class","footer flex jc-sb"),qe.p(f,O,v)},m(_,S){J(_,t,S),J(_,l,S),J(_,n,S),r(n,o),r(o,a),r(a,i),r(a,s),C(s,e[2]),r(a,p),r(a,u);for(let P=0;P<X.length;P+=1)X[P]&&X[P].m(u,null);r(o,g),r(o,m),r(m,h),r(h,f),f.checked=f.__value===e[0],r(h,b),r(m,k),r(m,E),r(E,O),O.checked=O.__value===e[0],r(E,M),r(m,w),r(m,U),r(U,v),v.checked=v.__value===e[0],r(U,K),r(n,N),r(n,q),r(q,j),r(q,R);for(let P=0;P<T.length;P+=1)T[P]&&T[P].m(q,null);r(n,B),r(n,L),r(L,Se),r(L,je),r(L,D),r(L,He),r(L,oe),r(oe,Be),r(oe,Pe),r(L,Le),r(L,V),r(V,Y),r(V,De),r(V,x),r(V,ze),r(V,ae),J(_,we,S),Ne(Q,_,S),J(_,Oe,S),J(_,W,S),Ne(ee,W,null),r(W,Ge),r(W,Te),z=!0,Re||(Ve=[I(s,"input",e[9]),I(f,"change",e[10]),I(O,"change",e[12]),I(v,"change",e[13]),I(Y,"click",ne(e[4])),I(x,"click",ne(e[5])),I(ae,"click",ne(e[7])),I(n,"submit",ne(Qt))],Re=!0)},p(_,[S]){if(S&4&&s.value!==_[2]&&C(s,_[2]),S&1&&(f.checked=f.__value===_[0]),S&1&&(O.checked=O.__value===_[0]),S&1&&(v.checked=v.__value===_[0]),S&3){Z=G(_[1]);let P;for(P=0;P<Z.length;P+=1){const Fe=nt(_,Z,P);T[P]?(T[P].p(Fe,S),le(T[P],1)):(T[P]=st(Fe),T[P].c(),le(T[P],1),T[P].m(q,null))}for(Ot(),P=Z.length;P<T.length;P+=1)ft(P);yt()}(!z||S&8&&re!==(re=_[3].score)&&D.value!==re)&&(D.value=re),(!z||S&8&&_e!==(_e=`--score: ${_[3].score}; --max: ${_[3].max}`))&&c(D,"style",_e),(!z||S&8)&&de!==(de=_[3].max+"")&&Ce(Pe,de),(!z||S&8&&me!==(me=!_[3].score))&&(Y.disabled=me),(!z||S&1&&he!==(he=`--break-point: ${Qe[_[0]]}`))&&c(n,"style",he)},i(_){if(!z){for(let S=0;S<Z.length;S+=1)le(T[S]);le(Q.$$.fragment,_),le(ee.$$.fragment,_),z=!0}},o(_){T=T.filter(Boolean);for(let S=0;S<T.length;S+=1)ue(T[S]);ue(Q.$$.fragment,_),ue(ee.$$.fragment,_),z=!1},d(_){_&&(A(t),A(l),A(n),A(we),A(Oe),A(W)),be(X,_),be(T,_),Je(Q,_),Je(ee),qe.r(),Re=!1,ie(Ve)}}}function it(e){return e.prop!=="--"}function Kt(){let e=document.querySelector(".aside .ul");e&&(e.scrollTop=e.scrollHeight)}function Qt(){}function Wt(e,t,l){let n,o,a;ce(e,$,N=>l(8,a=N));let i="天",s=new Array(4),p="";function u(N){return N.reduce((q,j)=>{let R=ge(j.prop,n),B=R.range[i][0];return q.score+=R.score*j.value,q.max+=R.score*B,q},{score:0,max:0})}function g(){o.score&&ve.add(JSON.stringify({title:p,position:i,items:s,score:o.score}))}function m(N,q="max"){return fe(N).map(R=>{if(!it(R))return R;let B=ge(R.prop,n).range[i];switch(q){case"max":R.value=B[0];break;case"min":R.value=B[1];break;case"mid":R.value=Math.round((B[0]+B[1])/2);break}return R})}function h(N,q="max",j=""){let R=m(N,q),B=u(R).score;ve.add(JSON.stringify({title:p+j,position:i,items:R,score:B}))}function f(){s.some(it)&&(h(s,"max","[上]"),h(s,"mid","[中]"),h(s,"min","[下]"),setTimeout(Kt,0))}function b(N){let q=JSON.parse(N.detail.url);l(0,i=q.position),l(2,p=q.title),l(1,s=q.items)}function k(){s.forEach(N=>{let q=ge(N.prop,n),[j,R]=q.range[i];N.value=Tt(N.value,R,j)})}function E(){l(2,p=""),l(1,s=fe(new Array(4).fill(ut)))}const O=[[]];function M(){p=this.value,l(2,p)}function w(){i=this.__value,l(0,i)}function U(){i=this.__value,l(0,i)}function v(){i=this.__value,l(0,i)}function K(N,q,j,R){j[R]=N,l(1,s)}return e.$$.update=()=>{e.$$.dirty&256&&(n=at(a)),e.$$.dirty&258&&l(3,o=u(s)),e.$$.dirty&3&&k()},[i,s,p,o,g,f,b,E,a,M,w,O,U,v,K]}class Xt extends ke{constructor(t){super(),ye(this,t,Wt,Ft,pe,{})}}new Xt({target:document.body});
