import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css               */import{D as q,O as ft,y as ie,s as fe,P as _t,S as ke,i as ye,e as G,a as d,b as y,d as c,A as dt,f as A,g as r,B as Ke,z as E,w as M,N as se,o as C,p as ve,Q as ce,v as F,x as Ee,r as mt,R as ht,q as bt,T as ne,U as vt,C as gt,V as kt,F as Ne,G as Je,t as le,l as yt,m as ue,I as Ae,W as St,X as Pt,Y as wt,k as Ot}from"./index-Y_emMXbY.js";function Tt(e,t,l){return e<=t?t:e>=l?l:e}const rt="TDJ-HELPER";function ot(e){if(!e||!e.key)return!1;let t=Ue()||{};t[e.key]=e.value,localStorage.setItem(rt,JSON.stringify(t))}function Ue(e){let t=localStorage.getItem(rt);return t?(t=JSON.parse(t),e?t[e]:t):null}const Rt={atk:{天:[10,4],地:[5,2],荒:[7,3]},def:{天:[5,2],地:[10,4],荒:[7,3]}},Ce=[{label:"--",score:0,type:"atk"},{label:"攻擊",score:11,type:"atk"},{label:"傷害",score:10,type:"atk"},{label:"穿透",score:6,type:"atk"},{label:"暴擊",score:3,type:"atk"},{label:"反擊",score:0,type:"atk"},{label:"氣血",score:7,type:"def"},{label:"免傷",score:5,type:"def"},{label:"防禦",score:1,type:"def"},{label:"抗暴",score:0,type:"def"}];function at(e=Ce){return e.map(t=>(t.range=Rt[t.type],t))}const It=at();function be(e,t=It){return t.find(l=>l.label===e)}const Qe={天:164,地:143,荒:145},Mt=["荒蟄","頭狼","幽魎","羅鬼","妖術師","朱焰魔火","九環朱蝮","赤練鬼","剛破鬼","凶骸兵","冥葵","屍魔術士","咒石兵","冰魔蠍","死魘鬼卒","鬼面花蛛","百眼翼魔"];function pe(e){return JSON.parse(JSON.stringify(e))}const ut={prop:"--",value:5},te=[];function Nt(e,t){return{subscribe:je(e,t).subscribe}}function je(e,t=q){let l;const n=new Set;function o(s){if(fe(e,s)&&(e=s,l)){const f=!te.length;for(const u of n)u[1](),te.push(u,e);if(f){for(let u=0;u<te.length;u+=2)te[u][0](te[u+1]);te.length=0}}}function a(s){o(s(e))}function i(s,f=q){const u=[s,f];return n.add(u),n.size===1&&(l=t(o,a)||q),s(e),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:o,update:a,subscribe:i}}function ct(e,t,l){const n=!Array.isArray(e),o=n?[e]:e;if(!o.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=t.length<2;return Nt(l,(i,s)=>{let f=!1;const u=[];let b=0,m=q;const h=()=>{if(b)return;m();const v=t(n?u[0]:u,i,s);a?i(v):m=_t(v)?v:q},p=o.map((v,k)=>ft(v,U=>{u[k]=U,b&=~(1<<k),f&&h()},()=>{b|=1<<k}));return f=!0,h(),function(){ie(p),m(),f=!1}})}function Jt(){let e=Ue("historeUrls")||[];const{subscribe:t,set:l,update:n}=je(e);return{subscribe:t,add:o=>n(a=>[...new Set([...a,o])]),remove:o=>n(a=>a.filter(i=>i!==o)),reset:()=>l([])}}const ge=Jt(),At=ct(ge,e=>(ot({key:"historeUrls",value:e}),e));function Ct(){let e=Ue("oriProps")||pe(Ce);const{subscribe:t,set:l,update:n}=je(e);return{subscribe:t,update:n,set:l,reset:()=>l(pe(Ce))}}const $=Ct(),Et=ct($,(e,t)=>(ot({key:"oriProps",value:e}),e));function We(e,t,l){const n=e.slice();return n[8]=t[l],n[10]=l,n}function Xe(e){let t,l=e[8].label+" "+e[8].score,n,o,a;return{c(){t=d("option"),n=F(l),o=y(),t.__value=a=e[8].label,E(t,t.__value)},m(i,s){A(i,t,s),r(t,n),r(t,o)},p(i,s){s&8&&l!==(l=i[8].label+" "+i[8].score)&&Ee(n,l),s&8&&a!==(a=i[8].label)&&(t.__value=a,E(t,t.__value))},d(i){i&&C(t)}}}function Ut(e){let t,l,n,o,a,i,s,f,u,b,m=G(e[3]),h=[];for(let p=0;p<m.length;p+=1)h[p]=Xe(We(e,m,p));return{c(){t=d("div"),l=d("select");for(let p=0;p<h.length;p+=1)h[p].c();n=y(),o=d("input"),a=y(),i=d("div"),s=d("input"),c(l,"class","svelte-1dran9s"),e[0].prop===void 0&&dt(()=>e[5].call(l)),c(o,"type","number"),c(o,"max",e[2]),c(o,"min",e[1]),c(o,"class","svelte-1dran9s"),c(s,"type","range"),c(s,"max",e[2]),c(s,"min",e[1]),c(s,"style",f=`--max: ${e[2]};`),c(s,"class","svelte-1dran9s"),c(i,"class","flex svelte-1dran9s"),c(t,"class","flex list-item svelte-1dran9s")},m(p,v){A(p,t,v),r(t,l);for(let k=0;k<h.length;k+=1)h[k]&&h[k].m(l,null);Ke(l,e[0].prop,!0),r(t,n),r(t,o),E(o,e[0].value),r(t,a),r(t,i),r(i,s),E(s,e[0].value),u||(b=[M(l,"change",e[5]),M(o,"input",e[6]),M(s,"change",e[7]),M(s,"input",e[7])],u=!0)},p(p,[v]){if(v&8){m=G(p[3]);let k;for(k=0;k<m.length;k+=1){const U=We(p,m,k);h[k]?h[k].p(U,v):(h[k]=Xe(U),h[k].c(),h[k].m(l,null))}for(;k<h.length;k+=1)h[k].d(1);h.length=m.length}v&9&&Ke(l,p[0].prop),v&4&&c(o,"max",p[2]),v&2&&c(o,"min",p[1]),v&9&&se(o.value)!==p[0].value&&E(o,p[0].value),v&4&&c(s,"max",p[2]),v&2&&c(s,"min",p[1]),v&4&&f!==(f=`--max: ${p[2]};`)&&c(s,"style",f),v&9&&E(s,p[0].value)},i:q,o:q,d(p){p&&C(t),ve(h,p),u=!1,ie(b)}}}function jt(e,t,l){let n,o,a;ce(e,$,m=>l(3,a=m));let{position:i="天"}=t,{item:s=pe(ut)}=t;function f(){s.prop=mt(this),l(0,s)}function u(){s.value=se(this.value),l(0,s)}function b(){s.value=se(this.value),l(0,s)}return e.$$set=m=>{"position"in m&&l(4,i=m.position),"item"in m&&l(0,s=m.item)},e.$$.update=()=>{e.$$.dirty&17&&l(2,[n,o]=be(s.prop).range[i]||[],n,(l(1,o),l(0,s),l(4,i)))},[s,o,n,a,i,f,u,b]}class Ht extends ke{constructor(t){super(),ye(this,t,jt,Ut,fe,{position:4,item:0})}}function Ze(e,t,l){const n=e.slice();return n[5]=t[l],n}function $e(e,t){let l,n,o,a,i=xe(t[5])+"",s,f,u;function b(){return t[2](t[5])}function m(){return t[3](t[5])}return{key:e,first:null,c(){l=d("div"),n=d("button"),n.textContent="⨯",o=y(),a=d("span"),s=y(),c(n,"class","btn svelte-1iaw0d8"),c(l,"class","li svelte-1iaw0d8"),this.first=l},m(h,p){A(h,l,p),r(l,n),r(l,o),r(l,a),a.innerHTML=i,r(l,s),f||(u=[M(n,"click",ne(b)),M(a,"click",ne(m))],f=!0)},p(h,p){t=h,p&1&&i!==(i=xe(t[5])+"")&&(a.innerHTML=i)},d(h){h&&C(l),f=!1,ie(u)}}}function qt(e){let t,l,n,o,a=[],i=new Map,s=G(e[0]);const f=u=>u[5];for(let u=0;u<s.length;u+=1){let b=Ze(e,s,u),m=f(b);i.set(m,a[u]=$e(m,b))}return{c(){t=d("details"),l=d("summary"),l.textContent="魂石紀錄:",n=y(),o=d("div");for(let u=0;u<a.length;u+=1)a[u].c();c(o,"class","ul svelte-1iaw0d8"),t.open=!0,c(t,"class","aside svelte-1iaw0d8")},m(u,b){A(u,t,b),r(t,l),r(t,n),r(t,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(o,null)},p(u,[b]){b&3&&(s=G(u[0]),a=ht(a,b,f,1,u,s,i,o,vt,$e,null,Ze))},i:q,o:q,d(u){u&&C(t);for(let b=0;b<a.length;b+=1)a[b].d()}}}function xe(e){let t=JSON.parse(e);return[Me("",t.title+"‧"+t.position),Me("計分",t.score),...t.items.filter(l=>l.prop!=="--").map(l=>Me(l.prop,l.value))].join("")}function Me(e="",t=""){return`<span class="i ib">
      <sup>${e}</sup>
      ${t}
    </span>`}function Bt(e,t,l){let n;ce(e,At,f=>l(0,n=f));const o=bt();function a(f){o("apply",{url:f})}return[n,a,f=>ge.remove(f),f=>a(f)]}class Lt extends ke{constructor(t){super(),ye(this,t,Bt,qt,fe,{})}}function et(e,t,l){const n=e.slice();return n[7]=t[l],n[8]=t,n[9]=l,n}function tt(e){let t,l=e[7].label+"",n,o,a,i,s,f,u,b;function m(){e[4].call(a,e[8],e[9])}function h(){e[5].call(s,e[8],e[9])}return{c(){t=d("div"),n=F(l),o=y(),a=d("input"),i=y(),s=d("input"),f=y(),c(a,"type","number"),c(a,"max","20"),c(a,"step","1"),c(a,"min","0"),c(s,"type","range"),c(s,"max","20"),c(s,"step","1"),c(s,"min","0")},m(p,v){A(p,t,v),r(t,n),r(t,o),r(t,a),E(a,e[7].score),r(t,i),r(t,s),E(s,e[7].score),r(t,f),u||(b=[M(a,"input",m),M(s,"change",h),M(s,"input",h)],u=!0)},p(p,v){e=p,v&2&&l!==(l=e[7].label+"")&&Ee(n,l),v&2&&se(a.value)!==e[7].score&&E(a,e[7].score),v&2&&E(s,e[7].score)},d(p){p&&C(t),u=!1,ie(b)}}}function lt(e){let t,l=e[7].label!=="--"&&tt(e);return{c(){l&&l.c(),t=gt()},m(n,o){l&&l.m(n,o),A(n,t,o)},p(n,o){n[7].label!=="--"?l?l.p(n,o):(l=tt(n),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(n){n&&C(t),l&&l.d(n)}}}function Dt(e){let t,l,n,o,a,i,s,f,u,b,m,h,p,v,k,U,O=G(e[1]),N=[];for(let w=0;w<O.length;w+=1)N[w]=lt(et(e,O,w));return{c(){t=d("span"),t.textContent="⚙️",l=y(),n=d("div"),o=d("div"),a=y(),i=d("div"),s=d("fieldset"),f=d("legend"),f.textContent="調整計分權重",u=y();for(let w=0;w<N.length;w+=1)N[w].c();b=y(),m=d("div"),h=d("input"),p=y(),v=d("input"),c(o,"class","dialog-overlay svelte-d31rkv"),c(h,"type","submit"),h.value="✓",c(v,"type","reset"),c(m,"class","flex jc-sb"),c(i,"class","dialog-content svelte-d31rkv"),c(n,"class","dialog svelte-d31rkv"),n.hidden=e[0]},m(w,j){A(w,t,j),A(w,l,j),A(w,n,j),r(n,o),r(n,a),r(n,i),r(i,s),r(s,f),r(s,u);for(let g=0;g<N.length;g+=1)N[g]&&N[g].m(s,null);r(i,b),r(i,m),r(m,h),r(m,p),r(m,v),k||(U=[M(t,"click",e[2]),M(o,"click",e[2]),M(h,"click",e[2]),M(v,"click",e[3])],k=!0)},p(w,[j]){if(j&2){O=G(w[1]);let g;for(g=0;g<O.length;g+=1){const K=et(w,O,g);N[g]?N[g].p(K,j):(N[g]=lt(K),N[g].c(),N[g].m(s,null))}for(;g<N.length;g+=1)N[g].d(1);N.length=O.length}j&1&&(n.hidden=w[0])},i:q,o:q,d(w){w&&(C(t),C(l),C(n)),ve(N,w),k=!1,ie(U)}}}function zt(e,t,l){let n;ce(e,Et,u=>l(6,u)),ce(e,$,u=>l(1,n=u));let o=!0;function a(){l(0,o=!o)}function i(){$.reset()}function s(u,b){u[b].score=se(this.value),$.set(n)}function f(u,b){u[b].score=se(this.value),$.set(n)}return[o,n,a,i,s,f]}class Gt extends ke{constructor(t){super(),ye(this,t,zt,Dt,fe,{})}}function nt(e,t,l){const n=e.slice();return n[21]=t[l],n[22]=t,n[23]=l,n}function Vt(e,t,l){const n=e.slice();return n[24]=t[l],n}function Yt(e){let t;return{c(){t=d("option"),t.__value=e[24],E(t,t.__value)},m(l,n){A(l,t,n)},p:q,d(l){l&&C(t)}}}function st(e){let t,l,n;function o(i){e[14](i,e[21],e[22],e[23])}let a={position:e[0]};return e[21]!==void 0&&(a.item=e[21]),t=new Ht({props:a}),St.push(()=>Pt(t,"item",o)),{c(){Ne(t.$$.fragment)},m(i,s){Je(t,i,s),n=!0},p(i,s){e=i;const f={};s&1&&(f.position=e[0]),!l&&s&2&&(l=!0,f.item=e[21],wt(()=>l=!1)),t.$set(f)},i(i){n||(le(t.$$.fragment,i),n=!0)},o(i){ue(t.$$.fragment,i),n=!1},d(i){Ae(t,i)}}}function Ft(e){let t,l,n,o,a,i,s,f,u,b,m,h,p,v,k,U,O,N,w,j,g,K,J,R,H,I,B,L,Se,He,D,re,_e,qe,oe,Be,de=e[3].max+"",Pe,Le,V,Y,me,De,x,ze,ae,he,we,Q,Oe,W,ee,Ge,Te,z,Re,Ie,Ve,Ye=G(Mt),X=[];for(let _=0;_<Ye.length;_+=1)X[_]=Yt(Vt(e,Ye,_));let Z=G(e[1]),T=[];for(let _=0;_<Z.length;_+=1)T[_]=st(nt(e,Z,_));const pt=_=>ue(T[_],1,1,()=>{T[_]=null});return Q=new Lt({}),Q.$on("apply",e[6]),ee=new Gt({}),Re=kt(e[11][0]),{c(){t=d("h1"),t.innerHTML=`<a href="../">../</a> <ruby>絕品魂石 評估
    <rt style="color: #0003">天地劫M</rt></ruby>`,l=y(),n=d("form"),o=d("fieldset"),a=d("legend"),i=F(`絕‧魂石孔位
      `),s=d("input"),f=y(),u=d("datalist");for(let _=0;_<X.length;_+=1)X[_].c();b=y(),m=d("div"),h=d("label"),p=d("input"),v=F(`
        天`),k=y(),U=d("label"),O=d("input"),N=F(`
        地`),w=y(),j=d("label"),g=d("input"),K=F(`
        荒`),J=y(),R=d("fieldset"),H=d("legend"),H.textContent="副屬",I=y();for(let _=0;_<T.length;_+=1)T[_].c();B=y(),L=d("fieldset"),Se=d("legend"),Se.textContent="計分",He=y(),D=d("input"),qe=y(),oe=d("sub"),Be=F("/ "),Pe=F(de),Le=y(),V=d("div"),Y=d("input"),De=y(),x=d("input"),ze=y(),ae=d("input"),we=y(),Ne(Q.$$.fragment),Oe=y(),W=d("footer"),Ne(ee.$$.fragment),Ge=y(),Te=d("ul"),Te.innerHTML=`<li>Made by Rplus</li> <li>計分標準參考來源：
      <br/> <a href="https://bbs.nga.cn/read.php?tid=26383169&amp;rand=456" target="_blank" rel="noopener">魂石选择终极攻略 | NGA玩家社区</a></li>`,c(s,"class","title svelte-1c4x4cl"),c(s,"type","search"),c(s,"list","rock-types"),c(u,"id","rock-types"),c(p,"type","radio"),c(p,"name","position"),p.__value="天",E(p,p.__value),p.checked=!0,c(O,"type","radio"),c(O,"name","position"),O.__value="地",E(O,O.__value),c(g,"type","radio"),c(g,"name","position"),g.__value="荒",E(g,g.__value),c(m,"class","flex jc-se"),c(D,"type","text"),D.readOnly=!0,c(D,"class","output svelte-1c4x4cl"),D.value=re=e[3].score,c(D,"style",_e=`--score: ${e[3].score}; --max: ${e[3].max}`),c(oe,"class","max svelte-1c4x4cl"),c(Y,"class","save svelte-1c4x4cl"),c(Y,"type","submit"),Y.value="記錄",Y.disabled=me=!e[3].score,c(x,"type","submit"),x.value="生成上下限",c(x,"class","svelte-1c4x4cl"),c(ae,"type","reset"),c(ae,"class","svelte-1c4x4cl"),c(V,"class","flex jc-sb form-btns svelte-1c4x4cl"),c(L,"class",""),c(n,"class","main"),c(n,"style",he=`--break-point: ${Qe[e[0]]}`),c(W,"class","footer flex jc-sb"),Re.p(p,O,g)},m(_,S){A(_,t,S),A(_,l,S),A(_,n,S),r(n,o),r(o,a),r(a,i),r(a,s),E(s,e[2]),r(a,f),r(a,u);for(let P=0;P<X.length;P+=1)X[P]&&X[P].m(u,null);r(o,b),r(o,m),r(m,h),r(h,p),p.checked=p.__value===e[0],r(h,v),r(m,k),r(m,U),r(U,O),O.checked=O.__value===e[0],r(U,N),r(m,w),r(m,j),r(j,g),g.checked=g.__value===e[0],r(j,K),r(n,J),r(n,R),r(R,H),r(R,I);for(let P=0;P<T.length;P+=1)T[P]&&T[P].m(R,null);r(n,B),r(n,L),r(L,Se),r(L,He),r(L,D),r(L,qe),r(L,oe),r(oe,Be),r(oe,Pe),r(L,Le),r(L,V),r(V,Y),r(V,De),r(V,x),r(V,ze),r(V,ae),A(_,we,S),Je(Q,_,S),A(_,Oe,S),A(_,W,S),Je(ee,W,null),r(W,Ge),r(W,Te),z=!0,Ie||(Ve=[M(s,"input",e[9]),M(p,"change",e[10]),M(O,"change",e[12]),M(g,"change",e[13]),M(Y,"click",ne(e[4])),M(x,"click",ne(e[5])),M(ae,"click",ne(e[7])),M(n,"submit",ne(Qt))],Ie=!0)},p(_,[S]){if(S&4&&s.value!==_[2]&&E(s,_[2]),S&1&&(p.checked=p.__value===_[0]),S&1&&(O.checked=O.__value===_[0]),S&1&&(g.checked=g.__value===_[0]),S&3){Z=G(_[1]);let P;for(P=0;P<Z.length;P+=1){const Fe=nt(_,Z,P);T[P]?(T[P].p(Fe,S),le(T[P],1)):(T[P]=st(Fe),T[P].c(),le(T[P],1),T[P].m(R,null))}for(Ot(),P=Z.length;P<T.length;P+=1)pt(P);yt()}(!z||S&8&&re!==(re=_[3].score)&&D.value!==re)&&(D.value=re),(!z||S&8&&_e!==(_e=`--score: ${_[3].score}; --max: ${_[3].max}`))&&c(D,"style",_e),(!z||S&8)&&de!==(de=_[3].max+"")&&Ee(Pe,de),(!z||S&8&&me!==(me=!_[3].score))&&(Y.disabled=me),(!z||S&1&&he!==(he=`--break-point: ${Qe[_[0]]}`))&&c(n,"style",he)},i(_){if(!z){for(let S=0;S<Z.length;S+=1)le(T[S]);le(Q.$$.fragment,_),le(ee.$$.fragment,_),z=!0}},o(_){T=T.filter(Boolean);for(let S=0;S<T.length;S+=1)ue(T[S]);ue(Q.$$.fragment,_),ue(ee.$$.fragment,_),z=!1},d(_){_&&(C(t),C(l),C(n),C(we),C(Oe),C(W)),ve(X,_),ve(T,_),Ae(Q,_),Ae(ee),Re.r(),Ie=!1,ie(Ve)}}}function it(e){return e.prop!=="--"}function Kt(){let e=document.querySelector(".aside .ul");e&&(e.scrollTop=e.scrollHeight)}function Qt(){}function Wt(e,t,l){let n,o,a;ce(e,$,J=>l(8,a=J));let i="天",s=new Array(4),f="";function u(J){return J.reduce((R,H)=>{let I=be(H.prop,n),B=I.range[i][0];return R.score+=I.score*H.value,R.max+=I.score*B,R},{score:0,max:0})}function b(){o.score&&ge.add(JSON.stringify({title:f,position:i,items:s,score:o.score}))}function m(J,R="max"){return pe(J).map(I=>{if(!it(I))return I;let B=be(I.prop,n).range[i];switch(R){case"max":I.value=B[0];break;case"min":I.value=B[1];break;case"mid":I.value=Math.round((B[0]+B[1])/2);break}return I})}function h(J,R="max",H=""){let I=m(J,R),B=u(I).score;ge.add(JSON.stringify({title:f+H,position:i,items:I,score:B}))}function p(){s.some(it)&&(h(s,"max","[上]"),h(s,"mid","[中]"),h(s,"min","[下]"),setTimeout(Kt,0))}function v(J){let R=JSON.parse(J.detail.url);l(0,i=R.position),l(2,f=R.title),l(1,s=R.items)}function k(){s.forEach(J=>{let R=be(J.prop,n),[H,I]=R.range[i];J.value=Tt(J.value,I,H)})}function U(){l(2,f=""),l(1,s=pe(new Array(4).fill(ut)))}const O=[[]];function N(){f=this.value,l(2,f)}function w(){i=this.__value,l(0,i)}function j(){i=this.__value,l(0,i)}function g(){i=this.__value,l(0,i)}function K(J,R,H,I){H[I]=J,l(1,s)}return e.$$.update=()=>{e.$$.dirty&256&&(n=at(a)),e.$$.dirty&258&&l(3,o=u(s)),e.$$.dirty&3&&k()},[i,s,f,o,b,p,v,U,a,N,w,O,j,g,K]}class Xt extends ke{constructor(t){super(),ye(this,t,Wt,Ft,fe,{})}}new Xt({target:document.body});
