import{S as V,i as W,s as Y,r as C,e as v,k as S,b as g,g as I,p as d,F as Q,x as H,Q as R,n as T,h as L,w as J,I as Z,l as P,q as K,H as U,X as x,o as X}from"./index-jy-WCx7z.js";function z(t,e,l){const i=t.slice();return i[20]=e[l],i}function A(t,e,l){const i=t.slice();return i[23]=e[l],i[24]=e,i[25]=l,i}function D(t){let e,l,i;return{c(){e=v("img"),X(e.src,l=t[23].icon)||g(e,"src",l),g(e,"alt",i=t[23].key),g(e,"width","16"),g(e,"height","16"),g(e,"class","svelte-1kebey9")},m(r,f){I(r,e,f)},p(r,f){f&2&&!X(e.src,l=r[23].icon)&&g(e,"src",l),f&2&&i!==(i=r[23].key)&&g(e,"alt",i)},d(r){r&&L(e)}}}function E(t){let e,l,i,r=t[23].key+"",f,b,h,a,s;function p(){t[16].call(l,t[24],t[25])}let n=t[23].icon&&D(t);return{c(){e=v("label"),l=v("input"),i=S(),f=P(r),b=S(),n&&n.c(),g(l,"type","checkbox"),e.hidden=h=!t[23].key,g(e,"class","svelte-1kebey9")},m(u,k){I(u,e,k),d(e,l),l.checked=t[23].checked,d(e,i),d(e,f),d(e,b),n&&n.m(e,null),a||(s=H(l,"change",p),a=!0)},p(u,k){t=u,k&2&&(l.checked=t[23].checked),k&2&&r!==(r=t[23].key+"")&&K(f,r),t[23].icon?n?n.p(t,k):(n=D(t),n.c(),n.m(e,null)):n&&(n.d(1),n=null),k&2&&h!==(h=!t[23].key)&&(e.hidden=h)},d(u){u&&L(e),n&&n.d(),a=!1,s()}}}function G(t){let e,l,i=t[20].title+"",r,f,b,h=C(t[20].options),a=[];for(let s=0;s<h.length;s+=1)a[s]=E(A(t,h,s));return{c(){e=v("div"),l=v("div"),r=P(i),f=P(":"),b=S();for(let s=0;s<a.length;s+=1)a[s].c();g(e,"class","filter svelte-1kebey9")},m(s,p){I(s,e,p),d(e,l),d(l,r),d(l,f),d(e,b);for(let n=0;n<a.length;n+=1)a[n]&&a[n].m(e,null)},p(s,p){if(p&2&&i!==(i=s[20].title+"")&&K(r,i),p&2){h=C(s[20].options);let n;for(n=0;n<h.length;n+=1){const u=A(s,h,n);a[n]?a[n].p(u,p):(a[n]=E(u),a[n].c(),a[n].m(e,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=h.length}},d(s){s&&L(e),J(a,s)}}}function $(t){let e,l,i,r,f,b,h,a,s,p,n,u,k,w=C(t[1]),m=[];for(let o=0;o<w.length;o+=1)m[o]=G(z(t,w,o));return{c(){e=v("form"),l=v("div"),i=v("input"),r=S(),f=v("input"),b=S();for(let o=0;o<m.length;o+=1)m[o].c();h=S(),a=v("div"),s=new U(!1),p=S(),n=new U(!1),g(i,"type","search"),g(i,"placeholder",t[0]),g(f,"type","reset"),g(l,"class","filter input-box svelte-1kebey9"),s.a=p,n.a=null,g(e,"class","filters")},m(o,y){I(o,e,y),d(e,l),d(l,i),Q(i,t[2]),d(l,r),d(l,f),d(e,b);for(let _=0;_<m.length;_+=1)m[_]&&m[_].m(e,null);d(e,h),d(e,a),s.m(t[4],a),d(a,p),n.m(t[3],a),u||(k=[H(i,"input",t[15]),H(i,"compositionstart",t[6]),H(i,"compositionend",t[7]),H(e,"reset",R(t[5])),H(e,"submit",R(t[14]))],u=!0)},p(o,[y]){if(y&1&&g(i,"placeholder",o[0]),y&4&&i.value!==o[2]&&Q(i,o[2]),y&2){w=C(o[1]);let _;for(_=0;_<w.length;_+=1){const B=z(o,w,_);m[_]?m[_].p(B,y):(m[_]=G(B),m[_].c(),m[_].m(e,h))}for(;_<m.length;_+=1)m[_].d(1);m.length=w.length}y&16&&s.p(o[4]),y&8&&n.p(o[3])},i:T,o:T,d(o){o&&L(e),J(m,o),u=!1,Z(k)}}}function ee(t,e,l){let i,r,{filter_cates:f=[]}=e,{item_class:b=".item"}=e,{placeholder:h="過濾名稱"}=e,{gen_selector:a=(c,F,q)=>`[data-${c}${q?"*":""}="${F}"]`}=e,{search_cb:s=null}=e,p=w(),n="",u=new URLSearchParams(location.search).get("query")||"",k=!1;function w(){return f.map(c=>({prop:c.prop,title:c.title,multi:c.multi,options:c.values.map((F,q)=>{var j;return{key:F,checked:!1,icon:(j=c.icons)==null?void 0:j[q]}})}))}function m(c){let F=c.map(q=>q.options.filter(j=>j.checked).map(j=>a(q.prop,j.key,q.multi)).join(",")).flat().filter(Boolean).map(q=>`${b}:not(${q})`).join(",");return F?`${F} { display: none; }`:""}function o(c){return c?`${b}:not([data-search*="${c}"]) { display:none; }`:""}function y(){l(1,p=w()),l(2,u="")}function _(){l(13,k=!0)}function B(){l(13,k=!1)}function M(c){x.call(this,t,c)}function N(){u=this.value,l(2,u)}function O(c,F){c[F].checked=this.checked,l(1,p)}return t.$$set=c=>{"filter_cates"in c&&l(8,f=c.filter_cates),"item_class"in c&&l(9,b=c.item_class),"placeholder"in c&&l(0,h=c.placeholder),"gen_selector"in c&&l(10,a=c.gen_selector),"search_cb"in c&&l(11,s=c.search_cb)},t.$$.update=()=>{t.$$.dirty&2&&l(4,i=`<style>${m(p)}</style>`),t.$$.dirty&10244&&(k||(l(12,n=u),s&&s(u))),t.$$.dirty&4096&&l(3,r=n?`<style>${o(n)}</style>`:"")},[h,p,u,r,i,y,_,B,f,b,a,s,n,k,M,N,O]}class le extends V{constructor(e){super(),W(this,e,ee,$,Y,{filter_cates:8,item_class:9,placeholder:0,gen_selector:10,search_cb:11})}}export{le as F};
