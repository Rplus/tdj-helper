import"./modulepreload-polyfill-9p4a8sJU.js";import{S as ke,i as Te,s as Me,e as ne,a as s,b as w,t as E,c as i,x as v,I as we,d as F,f as n,J as ze,g as z,l as U,k as ye,K as L,n as he,h as O,j as fe,r as je}from"./index-QjNFA_4e.js";function ce(e,t,r){const f=e.slice();return f[18]=t[r],f[19]=t,f[20]=r,f}function ve(e,t,r){const f=e.slice();return f[21]=t[r],f}function me(e,t,r){const f=e.slice();return f[24]=t[r],f}function be(e){let t,r;return{c(){t=s("div"),i(t,"class","dot--attacker svelte-1xts1jx"),i(t,"data-title",r=e[24].title),i(t,"tabindex","0"),v(t,"--x",e[24].x),v(t,"--y",e[24].y),v(t,"--bgc",e[24].color)},m(f,o){F(f,t,o)},p(f,o){o&16&&r!==(r=f[24].title)&&i(t,"data-title",r),o&16&&v(t,"--x",f[24].x),o&16&&v(t,"--y",f[24].y),o&16&&v(t,"--bgc",f[24].color)},d(f){f&&O(t)}}}function ge(e){let t,r,f;return{c(){t=s("div"),i(t,"class","dot svelte-1xts1jx"),i(t,"data-range",r=e[21].range),i(t,"data-title",f=e[21].title),v(t,"--x",e[21].x),v(t,"--y",e[21].y),v(t,"--bgc",e[21].color)},m(o,u){F(o,t,u)},p(o,u){u&4&&r!==(r=o[21].range)&&i(t,"data-range",r),u&4&&f!==(f=o[21].title)&&i(t,"data-title",f),u&4&&v(t,"--x",o[21].x),u&4&&v(t,"--y",o[21].y),u&4&&v(t,"--bgc",o[21].color)},d(o){o&&O(t)}}}function xe(e){let t,r=e[18].title+"",f,o,u,p,B,P,x,I,Q,A,V,K,y,S,D,G,q,_,d,h,m,j,C,b,J,Y,X;function Z(){e[6].call(x,e[19],e[20])}function ie(){e[7].call(y,e[19],e[20])}function R(){e[8].call(d,e[19],e[20])}function $(){e[9].call(b,e[19],e[20])}return{c(){t=s("dt"),f=E(r),o=E(" - "),u=s("small"),u.textContent="護衛",p=s("dd"),B=s("label"),P=E(`x:
						`),x=s("input"),Q=w(),A=s("dd"),V=s("label"),K=E(`y:
						`),y=s("input"),D=w(),G=s("dd"),q=s("label"),_=E(`護衛範圍:
						`),d=s("input"),h=w(),m=s("dd"),j=s("label"),C=E(`顏色:
						`),b=s("input"),J=w(),i(t,"class","svelte-1xts1jx"),i(x,"type","number"),i(x,"max",I=e[0]-1),i(x,"min","0"),i(p,"class","svelte-1xts1jx"),i(y,"type","number"),i(y,"max",S=e[0]-1),i(y,"min","0"),i(A,"class","svelte-1xts1jx"),i(d,"type","number"),i(d,"max","3"),i(d,"min","0"),i(G,"class","svelte-1xts1jx"),i(b,"type","color"),i(m,"class","svelte-1xts1jx")},m(H,c){F(H,t,c),n(t,f),n(t,o),n(t,u),F(H,p,c),n(p,B),n(B,P),n(B,x),z(x,e[18].x),n(p,Q),F(H,A,c),n(A,V),n(V,K),n(V,y),z(y,e[18].y),n(A,D),F(H,G,c),n(G,q),n(q,_),n(q,d),z(d,e[18].range),n(G,h),F(H,m,c),n(m,j),n(j,C),n(j,b),z(b,e[18].color),n(m,J),Y||(X=[U(x,"input",Z),U(y,"input",ie),U(d,"input",R),U(b,"input",$)],Y=!0)},p(H,c){e=H,c&4&&r!==(r=e[18].title+"")&&ye(f,r),c&1&&I!==(I=e[0]-1)&&i(x,"max",I),c&4&&L(x.value)!==e[18].x&&z(x,e[18].x),c&1&&S!==(S=e[0]-1)&&i(y,"max",S),c&4&&L(y.value)!==e[18].y&&z(y,e[18].y),c&4&&L(d.value)!==e[18].range&&z(d,e[18].range),c&4&&z(b,e[18].color)},d(H){H&&(O(t),O(p),O(A),O(G),O(m)),Y=!1,je(X)}}}function Ae(e){let t,r,f,o,u,p,B,P,x,I,Q,A,V,K,y,S,D,G,q,_,d,h=e[1].title+"",m,j,C,b,J,Y,X,Z,ie,R,$,H,c,ae,de,se,ue,N,_e,re,oe,pe,ee=ne(e[4]),k=[];for(let l=0;l<ee.length;l+=1)k[l]=be(me(e,ee,l));let te=ne(e[2]),T=[];for(let l=0;l<te.length;l+=1)T[l]=ge(ve(e,te,l));let le=ne(e[2]),M=[];for(let l=0;l<le.length;l+=1)M[l]=xe(ce(e,le,l));return{c(){t=s("div"),r=s("h1"),r.innerHTML=`<a href="../">../</a> <ruby>多重護衛優先級判定模擬
		<rt style="opacity: 0.3;">天地劫M</rt></ruby>`,f=w(),o=s("div"),u=s("div"),p=s("div"),P=w();for(let l=0;l<k.length;l+=1)k[l].c();x=w();for(let l=0;l<T.length;l+=1)T[l].c();Q=w(),A=s("div"),A.innerHTML=`圖中方格為攻擊者可站的位置<br/>
底色對應護衛單位
<br/> <br/> <details open=""><summary>== 護衛優先級 說明 ==</summary> <pre><u>規則一：判定各護衛與「被攻擊者」距離</u>
離「被攻擊者」最近者，最優先護衛

<u>規則二：判定各護衛與「攻擊者」距離</u>
若有複數最近的護衛群，改判定各護衛與「攻擊者」距離
※ 坦X：上場順序最先者

<u>狀況-1</u>：坦X 距離攻擊者最近
  則依正序護衛
  (=&gt; 坦X護衛)

<u>狀況-2</u>：坦X 距離攻擊者不是最近
  比坦X更近的那堆中，依倒序護衛
  (愈後上場者、護衛優先級愈高)
</pre></details>`,V=w(),K=s("hr"),y=w(),S=s("form"),D=s("fieldset"),G=s("legend"),G.textContent="自訂區塊",q=w(),_=s("dl");for(let l=0;l<M.length;l+=1)M[l].c();d=s("dt"),m=E(h),j=E(" - "),C=s("small"),C.textContent="被攻擊目標",b=s("dd"),J=s("label"),Y=E(`x:
					`),X=s("input"),ie=w(),R=s("dd"),$=s("label"),H=E(`y:
					`),c=s("input"),de=w(),se=s("dt"),se.textContent=`格子數:
			`,ue=s("dd"),N=s("input"),_e=w(),re=s("footer"),re.innerHTML=`<hr class="svelte-1xts1jx"/>
		資料參考：
		<a href="https://www.bilibili.com/video/BV1VB4y1y7fh/" target="_blank" rel="noreferrer noopener">「天地劫」多T护卫机制 详解 @ bilibili by u/墨_源</a>`,i(r,"class","svelte-1xts1jx"),i(p,"class","dot attackee svelte-1xts1jx"),i(p,"data-title",B=e[1].title),v(p,"--x",e[1].x),v(p,"--y",e[1].y),i(u,"class","map svelte-1xts1jx"),v(u,"font-size",e[3]/e[0]+"px"),v(u,"height",e[3]+"px"),we(()=>e[5].call(u)),i(A,"class","intro"),i(K,"class","svelte-1xts1jx"),i(o,"class","map-box svelte-1xts1jx"),i(G,"class","svelte-1xts1jx"),i(d,"class","svelte-1xts1jx"),i(X,"type","number"),i(X,"max",Z=e[0]-1),i(X,"min","0"),i(b,"class","svelte-1xts1jx"),i(c,"type","number"),i(c,"max",ae=e[0]-1),i(c,"min","0"),i(R,"class","svelte-1xts1jx"),i(se,"class","svelte-1xts1jx"),i(N,"type","number"),i(N,"min","4"),i(ue,"class","svelte-1xts1jx"),i(D,"class","svelte-1xts1jx"),i(S,"class","svelte-1xts1jx"),i(re,"class","info svelte-1xts1jx"),i(t,"class","workspace svelte-1xts1jx")},m(l,g){F(l,t,g),n(t,r),n(t,f),n(t,o),n(o,u),n(u,p),n(u,P);for(let a=0;a<k.length;a+=1)k[a]&&k[a].m(u,null);n(u,x);for(let a=0;a<T.length;a+=1)T[a]&&T[a].m(u,null);I=ze(u,e[5].bind(u)),n(o,Q),n(o,A),n(o,V),n(o,K),n(t,y),n(t,S),n(S,D),n(D,G),n(D,q),n(D,_);for(let a=0;a<M.length;a+=1)M[a]&&M[a].m(_,null);n(_,d),n(d,m),n(d,j),n(d,C),n(_,b),n(b,J),n(J,Y),n(J,X),z(X,e[1].x),n(b,ie),n(_,R),n(R,$),n($,H),n($,c),z(c,e[1].y),n(R,de),n(_,se),n(_,ue),n(ue,N),z(N,e[0]),n(t,_e),n(t,re),oe||(pe=[U(X,"input",e[10]),U(c,"input",e[11]),U(N,"input",e[12])],oe=!0)},p(l,[g]){if(g&2&&B!==(B=l[1].title)&&i(p,"data-title",B),g&2&&v(p,"--x",l[1].x),g&2&&v(p,"--y",l[1].y),g&16){ee=ne(l[4]);let a;for(a=0;a<ee.length;a+=1){const W=me(l,ee,a);k[a]?k[a].p(W,g):(k[a]=be(W),k[a].c(),k[a].m(u,x))}for(;a<k.length;a+=1)k[a].d(1);k.length=ee.length}if(g&4){te=ne(l[2]);let a;for(a=0;a<te.length;a+=1){const W=ve(l,te,a);T[a]?T[a].p(W,g):(T[a]=ge(W),T[a].c(),T[a].m(u,null))}for(;a<T.length;a+=1)T[a].d(1);T.length=te.length}if(g&9&&v(u,"font-size",l[3]/l[0]+"px"),g&8&&v(u,"height",l[3]+"px"),g&5){le=ne(l[2]);let a;for(a=0;a<le.length;a+=1){const W=ce(l,le,a);M[a]?M[a].p(W,g):(M[a]=xe(W),M[a].c(),M[a].m(_,d))}for(;a<M.length;a+=1)M[a].d(1);M.length=le.length}g&2&&h!==(h=l[1].title+"")&&ye(m,h),g&1&&Z!==(Z=l[0]-1)&&i(X,"max",Z),g&2&&L(X.value)!==l[1].x&&z(X,l[1].x),g&1&&ae!==(ae=l[0]-1)&&i(c,"max",ae),g&2&&L(c.value)!==l[1].y&&z(c,l[1].y),g&1&&L(N.value)!==l[0]&&z(N,l[0])},i:he,o:he,d(l){l&&O(t),fe(k,l),fe(T,l),I(),fe(M,l),oe=!1,je(pe)}}}function Ge(e,t){return e.index-t.index}function Ce(e,t,r){let f,o=6,u={index:10,order:10,title:"受",x:2,y:2},p=[{index:1,order:1,title:"坦1",x:2,y:0,range:2,color:"#ff9999"},{index:2,order:2,title:"坦2",x:4,y:2,range:3,color:"#99ff99"},{index:3,order:3,title:"坦3",x:2,y:4,range:2,color:"#9999ff"},{index:4,order:4,title:"坦4",x:0,y:2,range:2,color:"#99ff33"}],B=[],P={title:""};function x(_){let d=[],h=I();for(let m=o-1;m>=0;m--)for(let j=o-1;j>=0;j--){let C=Q(m,j,h);d[m+j*o]={title:`${C.title}`,x:m,y:j,color:C.color}}r(4,B=d)}function I(){let _=[],d=o*2;return p.forEach(h=>{if(h.range<h.distance2T)return null;d>=h.distance2T&&(d=h.distance2T,_[h.distance2T]||(_[h.distance2T]=[]),_[h.distance2T].push(h))}),_[d].sort(Ge)}function Q(_,d,h){if(!h||h.length===0)return P;let m=h[0];if(h.length===1)return m;let j,C=h.filter((b,J)=>(b.distance2A=Math.abs(b.y-d)+Math.abs(b.x-_),J||(j=b.distance2A),j>b.distance2A));return C.length?C[C.length-1]:m}function A(){f=this.clientWidth,r(3,f)}function V(_,d){_[d].x=L(this.value),r(2,p)}function K(_,d){_[d].y=L(this.value),r(2,p)}function y(_,d){_[d].range=L(this.value),r(2,p)}function S(_,d){_[d].color=this.value,r(2,p)}function D(){u.x=L(this.value),r(1,u)}function G(){u.y=L(this.value),r(1,u)}function q(){o=L(this.value),r(0,o)}return e.$$.update=()=>{e.$$.dirty&7&&(p.forEach(_=>{_.distance2T=Math.abs(_.y-u.y)+Math.abs(_.x-u.x)}),x())},[o,u,p,f,B,A,V,K,y,S,D,G,q]}class Xe extends ke{constructor(t){super(),Te(this,t,Ce,Ae,Me,{})}}new Xe({target:document.body});
