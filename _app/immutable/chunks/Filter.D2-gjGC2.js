import{s as le,e as y,a as q,z as A,b as E,t as S,c as B,f as I,A as M,d as _,i as R,v as k,J,E as U,K as ie,B as C,n as K,L as $,r as ne,F as O}from"./scheduler.BwZByWNM.js";import{e as G}from"./each.BIW2j3Zg.js";import{S as se,i as re}from"./index.CzTF124p.js";function H(l,e,t){const i=l.slice();return i[23]=e[t],i[24]=e,i[25]=t,i}function Q(l,e,t){const i=l.slice();return i[26]=e[t],i[27]=e,i[28]=t,i}function W(l){let e,t,i,f;function p(){l[16].call(e,l[24],l[25])}return{c(){e=y("input"),this.h()},l(d){e=E(d,"INPUT",{class:!0,type:!0,switch:!0,"data-active":!0,"data-inactive":!0,title:!0}),this.h()},h(){_(e,"class","filter-switcher svelte-12hpp2k"),_(e,"type","checkbox"),_(e,"switch",""),_(e,"data-active","∩"),_(e,"data-inactive","∪"),_(e,"title",t=l[23].is_cap?"聯集 [交集]":"[聯集] 交集")},m(d,a){R(d,e,a),e.checked=l[23].is_cap,i||(f=U(e,"change",p),i=!0)},p(d,a){l=d,a&2&&t!==(t=l[23].is_cap?"聯集 [交集]":"[聯集] 交集")&&_(e,"title",t),a&2&&(e.checked=l[23].is_cap)},d(d){d&&I(e),i=!1,f()}}}function X(l){let e,t,i;return{c(){e=y("img"),this.h()},l(f){e=E(f,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){O(e.src,t=l[26].icon)||_(e,"src",t),_(e,"alt",i=l[26].key),_(e,"width","16"),_(e,"height","16"),_(e,"class","svelte-12hpp2k")},m(f,p){R(f,e,p)},p(f,p){p&2&&!O(e.src,t=f[26].icon)&&_(e,"src",t),p&2&&i!==(i=f[26].key)&&_(e,"alt",i)},d(f){f&&I(e)}}}function Z(l){let e,t,i,f=l[26].key+"",p,d,a,g,c;function r(){l[17].call(t,l[27],l[28])}let s=l[26].icon&&X(l);return{c(){e=y("label"),t=y("input"),i=q(),p=A(f),d=q(),s&&s.c(),this.h()},l(n){e=E(n,"LABEL",{class:!0});var u=S(e);t=E(u,"INPUT",{type:!0}),i=B(u),p=M(u,f),d=B(u),s&&s.l(u),u.forEach(I),this.h()},h(){_(t,"type","checkbox"),_(e,"class","filer-option-label svelte-12hpp2k"),e.hidden=a=!l[26].key},m(n,u){R(n,e,u),k(e,t),t.checked=l[26].checked,k(e,i),k(e,p),k(e,d),s&&s.m(e,null),g||(c=U(t,"change",r),g=!0)},p(n,u){l=n,u&2&&(t.checked=l[26].checked),u&2&&f!==(f=l[26].key+"")&&C(p,f),l[26].icon?s?s.p(l,u):(s=X(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),u&2&&a!==(a=!l[26].key)&&(e.hidden=a)},d(n){n&&I(e),s&&s.d(),g=!1,c()}}}function x(l){let e,t,i=l[23].title+"",f,p,d,a=l[23].multi&&W(l),g=G(l[23].options),c=[];for(let r=0;r<g.length;r+=1)c[r]=Z(Q(l,g,r));return{c(){e=y("div"),t=y("div"),f=A(i),p=A(`:

				`),a&&a.c(),d=q();for(let r=0;r<c.length;r+=1)c[r].c();this.h()},l(r){e=E(r,"DIV",{class:!0});var s=S(e);t=E(s,"DIV",{class:!0});var n=S(t);f=M(n,i),p=M(n,`:

				`),a&&a.l(n),n.forEach(I),d=B(s);for(let u=0;u<c.length;u+=1)c[u].l(s);s.forEach(I),this.h()},h(){_(t,"class","filter-title svelte-12hpp2k"),_(e,"class","filter svelte-12hpp2k")},m(r,s){R(r,e,s),k(e,t),k(t,f),k(t,p),a&&a.m(t,null),k(e,d);for(let n=0;n<c.length;n+=1)c[n]&&c[n].m(e,null)},p(r,s){if(s&2&&i!==(i=r[23].title+"")&&C(f,i),r[23].multi?a?a.p(r,s):(a=W(r),a.c(),a.m(t,null)):a&&(a.d(1),a=null),s&2){g=G(r[23].options);let n;for(n=0;n<g.length;n+=1){const u=Q(r,g,n);c[n]?c[n].p(u,s):(c[n]=Z(u),c[n].c(),c[n].m(e,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=g.length}},d(r){r&&I(e),a&&a.d(),$(c,r)}}}function ae(l){let e,t,i,f,p,d,a,g,c,r,s,n,u,F,V,D=G(l[1]),v=[];for(let h=0;h<D.length;h+=1)v[h]=x(H(l,D,h));return{c(){e=y("form"),t=y("div"),i=y("input"),f=q(),p=y("input"),d=q();for(let h=0;h<v.length;h+=1)v[h].c();a=q(),g=y("div"),c=y("style"),r=A(l[4]),s=q(),n=y("style"),u=A(l[3]),this.h()},l(h){e=E(h,"FORM",{class:!0});var b=S(e);t=E(b,"DIV",{class:!0});var m=S(t);i=E(m,"INPUT",{type:!0,name:!0,placeholder:!0}),f=B(m),p=E(m,"INPUT",{type:!0}),m.forEach(I),d=B(b);for(let j=0;j<v.length;j+=1)v[j].l(b);a=B(b),g=E(b,"DIV",{});var w=S(g);c=E(w,"STYLE",{});var Y=S(c);r=M(Y,l[4]),Y.forEach(I),s=B(w),n=E(w,"STYLE",{});var z=S(n);u=M(z,l[3]),z.forEach(I),w.forEach(I),b.forEach(I),this.h()},h(){_(i,"type","search"),_(i,"name",ee),_(i,"placeholder",l[0]),_(p,"type","reset"),_(t,"class","filter input-box svelte-12hpp2k"),_(e,"class","filters")},m(h,b){R(h,e,b),k(e,t),k(t,i),J(i,l[2]),k(t,f),k(t,p),k(e,d);for(let m=0;m<v.length;m+=1)v[m]&&v[m].m(e,null);k(e,a),k(e,g),k(g,c),k(c,r),k(g,s),k(g,n),k(n,u),F||(V=[U(i,"input",l[15]),U(i,"compositionstart",l[6]),U(i,"compositionend",l[7]),U(e,"reset",ie(l[5])),U(e,"submit",l[8])],F=!0)},p(h,[b]){if(b&1&&_(i,"placeholder",h[0]),b&4&&i.value!==h[2]&&J(i,h[2]),b&2){D=G(h[1]);let m;for(m=0;m<D.length;m+=1){const w=H(h,D,m);v[m]?v[m].p(w,b):(v[m]=x(w),v[m].c(),v[m].m(e,a))}for(;m<v.length;m+=1)v[m].d(1);v.length=D.length}b&16&&C(r,h[4]),b&8&&C(u,h[3])},i:K,o:K,d(h){h&&I(e),$(v,h),F=!1,ne(V)}}}const ee="query";function ce(l,e,t){let i,f,{filter_cates:p=[]}=e,{item_class:d=".item"}=e,{placeholder:a="過濾名稱"}=e,{gen_selector:g=(o,L,T)=>`[data-${o}${T?"*":""}="${L}"]`}=e,{search_cb:c=null}=e,r=F(),s="",n=new URLSearchParams(location.search).get(ee)||"",u=!1;function F(){return p.map(o=>({prop:o.prop,title:o.title,multi:o.multi,options:o.values.map((L,T)=>{var N;return{key:L,checked:!1,icon:(N=o.icons)==null?void 0:N[T]}})}))}function V(o){return`${d}:not(${o})`}function D(o){let L=o.map(T=>{let N=T.options.map(P=>P.checked?{prop:T.prop,value:P.key}:null).filter(Boolean);return N.length?T.multi&&T.is_cap?N.map(P=>V(g(P.prop,P.value,T.multi))):V(N.map(P=>g(P.prop,P.value,T.multi)).join()):""}).flat().filter(Boolean).join();return L?`${L} { display: none; }`:""}function v(o){return o?`${d}:not([data-search*="${o}"]) { display:none; }`:""}function h(){t(1,r=F()),t(2,n="")}function b(){t(14,u=!0)}function m(){t(14,u=!1)}let w=!1;function Y(o){if(!w){o.preventDefault(),w=!0;return}}function z(){n=this.value,t(2,n)}function j(o,L){o[L].is_cap=this.checked,t(1,r)}function te(o,L){o[L].checked=this.checked,t(1,r)}return l.$$set=o=>{"filter_cates"in o&&t(9,p=o.filter_cates),"item_class"in o&&t(10,d=o.item_class),"placeholder"in o&&t(0,a=o.placeholder),"gen_selector"in o&&t(11,g=o.gen_selector),"search_cb"in o&&t(12,c=o.search_cb)},l.$$.update=()=>{l.$$.dirty&2&&t(4,i=`${D(r)}`),l.$$.dirty&20484&&(u||(t(13,s=n),c&&c(n))),l.$$.dirty&8192&&t(3,f=s?`${v(s)}`:"")},[a,r,n,f,i,h,b,m,Y,p,d,g,c,s,u,z,j,te]}class he extends se{constructor(e){super(),re(this,e,ce,ae,le,{filter_cates:9,item_class:10,placeholder:0,gen_selector:11,search_cb:12})}}export{he as F};
