import{H as s}from"./control.CYgJF_JY.js";function f(e,t){throw new s(e,t)}new TextEncoder;const r=new Map;async function a(e="",t){if(r.has(e))return r.get(e);const n=await t();return r.set(e,n),n}const h={cn:"tdj-activity.zlongame.com",tw:"tdj-activity.game-beans.com"},u=[{title:"Official (zh-tw)",link:"https://www.game-beans.com/userinfo/tdj/index.html",target:"_officail_tw"},{title:"Official (zh-cn)",link:"https://www.zlongame.com/userinfo/tdj/index.html",target:"_officail_cn"},{title:"Bili-Wiki",link:"https://wiki.biligame.com/tdj/",target:"_biliwiki"}];function g(e){return u.filter((t,n)=>e[n])}const c=[{get_proxy_url:e=>`https://api.allorigins.win/get?url=${encodeURIComponent(e)}`,fetch:async e=>fetch(e).then(t=>t.json()).then(t=>{var n;return t=JSON.parse(t==null?void 0:t.contents),console.log("fetch role.cn",t),(n=t.data)==null?void 0:n.data[0]})},{get_proxy_url:e=>`https://corsproxy.io/?${encodeURIComponent(e)}`,fetch:async e=>fetch(e).then(t=>t.text()).then(t=>{var n;return t=JSON.parse(t),console.log("fetch role.tw",t),(n=t.data)==null?void 0:n.data[0]}).catch(t=>{throw f(t)})}][1];async function _(e){let t=e.pinyin_tw?o(e.pinyin_tw,"tw"):o(e.pinyin,"cn");return a(t,()=>c.fetch(t))}function o(e,t){return p({module:"hero",type:"detail",query:e},t)}function p(e={},t="cn"){e={id:t==="cn"?0:1,action:"info",module:"hero",type:"basic",...e};let n=new URLSearchParams;for(let i in e)n.set(i,e[i]);let l=`https://${h[t]}/tdj/data/mQuery.do?${n.toString()}`;return c.get_proxy_url(l)}export{f as e,_ as f,g};
