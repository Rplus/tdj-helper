import{s as ne,e as y,a as N,H as A,b as w,k as F,c as V,f as I,l as C,d as _,i as L,m as b,o as G,p as U,q as se,n as O,t as Z,r as ae,u as j,v as M,w as x,x as z}from"./scheduler.DaxL_F1W.js";import{e as S}from"./each.CZb7561r.js";import{S as re,i as ce}from"./index.8Z2Ob-eK.js";function J(l,e,t){const i=l.slice();return i[23]=e[t],i[24]=e,i[25]=t,i}function K(l,e,t){const i=l.slice();return i[26]=e[t],i[27]=e,i[28]=t,i}function Q(l){let e,t,i,u;function p(){l[16].call(e,l[24],l[25])}return{c(){e=y("input"),this.h()},l(m){e=w(m,"INPUT",{class:!0,type:!0,switch:!0,"data-active":!0,"data-inactive":!0,title:!0}),this.h()},h(){_(e,"class","filter-switcher svelte-12hpp2k"),_(e,"type","checkbox"),_(e,"switch",""),_(e,"data-active","∩"),_(e,"data-inactive","∪"),_(e,"title",t=l[23].is_cap?"聯集 [交集]":"[聯集] 交集")},m(m,r){L(m,e,r),e.checked=l[23].is_cap,i||(u=U(e,"change",p),i=!0)},p(m,r){l=m,r&2&&t!==(t=l[23].is_cap?"聯集 [交集]":"[聯集] 交集")&&_(e,"title",t),r&2&&(e.checked=l[23].is_cap)},d(m){m&&I(e),i=!1,u()}}}function W(l){let e,t,i;return{c(){e=y("img"),this.h()},l(u){e=w(u,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){z(e.src,t=l[26].icon)||_(e,"src",t),_(e,"alt",i=l[26].key),_(e,"width","16"),_(e,"height","16"),_(e,"class","svelte-12hpp2k")},m(u,p){L(u,e,p)},p(u,p){p&2&&!z(e.src,t=u[26].icon)&&_(e,"src",t),p&2&&i!==(i=u[26].key)&&_(e,"alt",i)},d(u){u&&I(e)}}}function X(l){let e,t,i,u=l[26].key+"",p,m,r,g,c;function a(){l[17].call(t,l[27],l[28])}let s=l[26].icon&&W(l);return{c(){e=y("label"),t=y("input"),i=N(),p=j(u),m=N(),s&&s.c(),this.h()},l(n){e=w(n,"LABEL",{class:!0});var f=F(e);t=w(f,"INPUT",{type:!0}),i=V(f),p=M(f,u),m=V(f),s&&s.l(f),f.forEach(I),this.h()},h(){_(t,"type","checkbox"),_(e,"class","filer-option-label svelte-12hpp2k"),e.hidden=r=!l[26].key},m(n,f){L(n,e,f),b(e,t),t.checked=l[26].checked,b(e,i),b(e,p),b(e,m),s&&s.m(e,null),g||(c=U(t,"change",a),g=!0)},p(n,f){l=n,f&2&&(t.checked=l[26].checked),f&2&&u!==(u=l[26].key+"")&&x(p,u),l[26].icon?s?s.p(l,f):(s=W(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null),f&2&&r!==(r=!l[26].key)&&(e.hidden=r)},d(n){n&&I(e),s&&s.d(),g=!1,c()}}}function Y(l){let e,t,i=l[23].title+"",u,p,m,r=l[23].multi&&Q(l),g=S(l[23].options),c=[];for(let a=0;a<g.length;a+=1)c[a]=X(K(l,g,a));return{c(){e=y("div"),t=y("div"),u=j(i),p=j(`:

				`),r&&r.c(),m=N();for(let a=0;a<c.length;a+=1)c[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var s=F(e);t=w(s,"DIV",{class:!0});var n=F(t);u=M(n,i),p=M(n,`:

				`),r&&r.l(n),n.forEach(I),m=V(s);for(let f=0;f<c.length;f+=1)c[f].l(s);s.forEach(I),this.h()},h(){_(t,"class","filter-title svelte-12hpp2k"),_(e,"class","filter svelte-12hpp2k")},m(a,s){L(a,e,s),b(e,t),b(t,u),b(t,p),r&&r.m(t,null),b(e,m);for(let n=0;n<c.length;n+=1)c[n]&&c[n].m(e,null)},p(a,s){if(s&2&&i!==(i=a[23].title+"")&&x(u,i),a[23].multi?r?r.p(a,s):(r=Q(a),r.c(),r.m(t,null)):r&&(r.d(1),r=null),s&2){g=S(a[23].options);let n;for(n=0;n<g.length;n+=1){const f=K(a,g,n);c[n]?c[n].p(f,s):(c[n]=X(f),c[n].c(),c[n].m(e,null))}for(;n<c.length;n+=1)c[n].d(1);c.length=g.length}},d(a){a&&I(e),r&&r.d(),Z(c,a)}}}function oe(l){let e,t,i,u,p,m,r,g,c,a,s,n,f,D=S(l[1]),k=[];for(let h=0;h<D.length;h+=1)k[h]=Y(J(l,D,h));return{c(){e=y("form"),t=y("div"),i=y("input"),u=N(),p=y("input"),m=N();for(let h=0;h<k.length;h+=1)k[h].c();r=N(),g=y("div"),c=new A(!1),a=N(),s=new A(!1),this.h()},l(h){e=w(h,"FORM",{class:!0});var v=F(e);t=w(v,"DIV",{class:!0});var d=F(t);i=w(d,"INPUT",{type:!0,name:!0,placeholder:!0}),u=V(d),p=w(d,"INPUT",{type:!0}),d.forEach(I),m=V(v);for(let H=0;H<k.length;H+=1)k[H].l(v);r=V(v),g=w(v,"DIV",{});var P=F(g);c=C(P,!1),a=V(P),s=C(P,!1),P.forEach(I),v.forEach(I),this.h()},h(){_(i,"type","search"),_(i,"name",$),_(i,"placeholder",l[0]),_(p,"type","reset"),_(t,"class","filter input-box svelte-12hpp2k"),c.a=a,s.a=null,_(e,"class","filters")},m(h,v){L(h,e,v),b(e,t),b(t,i),G(i,l[2]),b(t,u),b(t,p),b(e,m);for(let d=0;d<k.length;d+=1)k[d]&&k[d].m(e,null);b(e,r),b(e,g),c.m(l[4],g),b(g,a),s.m(l[3],g),n||(f=[U(i,"input",l[15]),U(i,"compositionstart",l[6]),U(i,"compositionend",l[7]),U(e,"reset",se(l[5])),U(e,"submit",l[8])],n=!0)},p(h,[v]){if(v&1&&_(i,"placeholder",h[0]),v&4&&i.value!==h[2]&&G(i,h[2]),v&2){D=S(h[1]);let d;for(d=0;d<D.length;d+=1){const P=J(h,D,d);k[d]?k[d].p(P,v):(k[d]=Y(P),k[d].c(),k[d].m(e,r))}for(;d<k.length;d+=1)k[d].d(1);k.length=D.length}v&16&&c.p(h[4]),v&8&&s.p(h[3])},i:O,o:O,d(h){h&&I(e),Z(k,h),n=!1,ae(f)}}}const $="query";function ue(l,e,t){let i,u,{filter_cates:p=[]}=e,{item_class:m=".item"}=e,{placeholder:r="過濾名稱"}=e,{gen_selector:g=(o,E,q)=>`[data-${o}${q?"*":""}="${E}"]`}=e,{search_cb:c=null}=e,a=D(),s="",n=new URLSearchParams(location.search).get($)||"",f=!1;function D(){return p.map(o=>({prop:o.prop,title:o.title,multi:o.multi,options:o.values.map((E,q)=>{var B;return{key:E,checked:!1,icon:(B=o.icons)==null?void 0:B[q]}})}))}function k(o){return`${m}:not(${o})`}function h(o){let E=o.map(q=>{let B=q.options.map(T=>T.checked?{prop:q.prop,value:T.key}:null).filter(Boolean);return B.length?q.multi&&q.is_cap?B.map(T=>k(g(T.prop,T.value,q.multi))):k(B.map(T=>g(T.prop,T.value,q.multi)).join()):""}).flat().filter(Boolean).join();return E?`${E} { display: none; }`:""}function v(o){return o?`${m}:not([data-search*="${o}"]) { display:none; }`:""}function d(){t(1,a=D()),t(2,n="")}function P(){t(14,f=!0)}function H(){t(14,f=!1)}let R=!1;function ee(o){if(!R){o.preventDefault(),R=!0;return}}function te(){n=this.value,t(2,n)}function le(o,E){o[E].is_cap=this.checked,t(1,a)}function ie(o,E){o[E].checked=this.checked,t(1,a)}return l.$$set=o=>{"filter_cates"in o&&t(9,p=o.filter_cates),"item_class"in o&&t(10,m=o.item_class),"placeholder"in o&&t(0,r=o.placeholder),"gen_selector"in o&&t(11,g=o.gen_selector),"search_cb"in o&&t(12,c=o.search_cb)},l.$$.update=()=>{l.$$.dirty&2&&t(4,i=`<style>${h(a)}</style>`),l.$$.dirty&20484&&(f||(t(13,s=n),c&&c(n))),l.$$.dirty&8192&&t(3,u=s?`<style>${v(s)}</style>`:"")},[r,a,n,u,i,d,P,H,ee,p,m,g,c,s,f,te,le,ie]}class pe extends re{constructor(e){super(),ce(this,e,ue,oe,ne,{filter_cates:9,item_class:10,placeholder:0,gen_selector:11,search_cb:12})}}export{pe as F};
