import{H as x}from"../chunks/control.CYgJF_JY.js";import{f as B,R as I}from"../chunks/Role.DiuYu3hO.js";import{s as Q,a as v,e as g,z as b,J as O,c as w,b as y,t as k,A as S,f as c,d as f,i as m,v as z,L as D,u as F,B as q,g as G,n as K}from"../chunks/scheduler.DRRiJXpm.js";import{h as R,u as V}from"../chunks/await_block.CCM49jVG.js";import{S as W,i as X,c as H,a as J,m as N,t as A,b as L,d as M}from"../chunks/index.D1isTMd_.js";import{r as T}from"../chunks/u.Bc6-xQuS.js";import{H as Y}from"../chunks/Header.CRl3x006.js";function Z(t,e){throw new x(t,e)}new TextEncoder;const ee=async({params:t})=>{try{return{role:B("name",t.slug),slug:t.slug}}catch(e){Z(404,e)}},de=Object.freeze(Object.defineProperty({__proto__:null,load:ee},Symbol.toStringTag,{value:"Module"})),te={cn:"tdj-activity.zlongame.com",tw:"tdj-activity.game-beans.com"};async function ne(t){let e=t.pinyin_tw?U(t.pinyin_tw,"tw"):U(t.pinyin,"cn");return fetch(e).then(n=>n.json()).then(n=>{var r;return n=JSON.parse(n==null?void 0:n.contents),(r=n.data)==null?void 0:r.data[0]})}function U(t,e){return re({module:"hero",type:"detail",query:t},e)}function re(t={},e="cn"){t={id:e==="cn"?0:1,action:"info",module:"hero",type:"basic",...t};let n=new URLSearchParams;for(let a in t)n.set(a,t[a]);let r=`https://${te[e]}/tdj/data/mQuery.do?${n.toString()}`;return`https://api.allorigins.win/get?url=${encodeURIComponent(r)}`}function ae(t){let e,n=t[3].message+"",r;return{c(){e=g("p"),r=b(n),this.h()},l(l){e=y(l,"P",{style:!0});var a=k(e);r=S(a,n),a.forEach(c),this.h()},h(){F(e,"color","red")},m(l,a){m(l,e,a),z(e,r)},p(l,a){a&2&&n!==(n=l[3].message+"")&&q(r,n)},d(l){l&&c(e)}}}function oe(t){let e,n=JSON.stringify(t[2],null,2)+"",r;return{c(){e=g("pre"),r=b(n),this.h()},l(l){e=y(l,"PRE",{class:!0});var a=k(e);r=S(a,n),a.forEach(c),this.h()},h(){f(e,"class","svelte-10gg4dq")},m(l,a){m(l,e,a),z(e,r)},p(l,a){a&2&&n!==(n=JSON.stringify(l[2],null,2)+"")&&q(r,n)},d(l){l&&c(e)}}}function le(t){let e,n="...waiting";return{c(){e=g("p"),e.textContent=n},l(r){e=y(r,"P",{"data-svelte-h":!0}),G(e)!=="svelte-mv6tav"&&(e.textContent=n)},m(r,l){m(r,e,l)},p:K,d(r){r&&c(e)}}}function se(t){var C;let e,n,r,l,a,$,_,h,u,d,p;e=new Y({props:{parent_path:"/role",title:"英靈："+((C=t[0].role)==null?void 0:C.name)}}),r=new I({props:{data:t[0].role,type:"card"}});let i={ctx:t,current:null,token:null,hasCatch:!0,pending:le,then:oe,catch:ae,value:2,error:3};return R(d=t[1],i),{c(){H(e.$$.fragment),n=v(),H(r.$$.fragment),l=v(),a=g("a"),$=b("large avater img"),h=v(),u=O(),i.block.c(),this.h()},l(o){J(e.$$.fragment,o),n=w(o),J(r.$$.fragment,o),l=w(o),a=y(o,"A",{href:!0,rel:!0,target:!0});var s=k(a);$=S(s,"large avater img"),s.forEach(c),h=w(o),u=O(),i.block.l(o),this.h()},h(){f(a,"href",_=T(`https://media.zlongame.com/media/news/cn/tdj/info/data/hero/${t[0].role.pic}.png`,960)),f(a,"rel","noopener"),f(a,"target","_img")},m(o,s){N(e,o,s),m(o,n,s),N(r,o,s),m(o,l,s),m(o,a,s),z(a,$),m(o,h,s),m(o,u,s),i.block.m(o,i.anchor=s),i.mount=()=>u.parentNode,i.anchor=u,p=!0},p(o,[s]){var j;t=o;const E={};s&1&&(E.title="英靈："+((j=t[0].role)==null?void 0:j.name)),e.$set(E);const P={};s&1&&(P.data=t[0].role),r.$set(P),(!p||s&1&&_!==(_=T(`https://media.zlongame.com/media/news/cn/tdj/info/data/hero/${t[0].role.pic}.png`,960)))&&f(a,"href",_),i.ctx=t,s&2&&d!==(d=t[1])&&R(d,i)||V(i,t,s)},i(o){p||(A(e.$$.fragment,o),A(r.$$.fragment,o),p=!0)},o(o){L(e.$$.fragment,o),L(r.$$.fragment,o),p=!1},d(o){o&&(c(n),c(l),c(a),c(h),c(u)),M(e,o),M(r,o),i.block.d(o),i.token=null,i=null}}}function ie(t,e,n){let{data:r}=e,l;return D(()=>{n(1,l=ne(r.role))}),t.$$set=a=>{"data"in a&&n(0,r=a.data)},[r,l]}class ge extends W{constructor(e){super(),X(this,e,ie,se,Q,{data:0})}}export{ge as component,de as universal};
