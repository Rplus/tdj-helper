import{s as zt,e as f,b as d,g as bt,d as r,i as K,n as At,f as _,a as G,z as tt,c as S,t as y,A as et,u as I,v as i,D as U,E as _t,B as Ot,Q as j,G as Ct,r as Rt}from"../chunks/scheduler.DRRiJXpm.js";import{S as Qt,i as Jt,c as xt,a as Bt,m as Mt,t as wt,b as Nt,d as Pt}from"../chunks/index.D1isTMd_.js";import{e as gt}from"../chunks/each.n077PHkZ.js";import{H as Kt}from"../chunks/Header.SeUPolaK.js";import{F as Wt}from"../chunks/Footer.nbI22j8N.js";const ue=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function Yt(t){let e,u=`圖中方格為攻擊者可站的位置<br/>
	底色對應護衛單位
	<br/> <br/> <details open=""><summary>== 護衛優先級 說明 ==</summary> <pre class="svelte-y4q8m8">			<u>規則一：判定各護衛與「被攻擊者」距離</u>
				離「被攻擊者」最近者，最優先護衛

			<u>規則二：判定各護衛與「攻擊者」距離</u>
			若有複數最近的護衛群，改判定各護衛與「攻擊者」距離
			※ 坦X：上場順序最先者

			<u>狀況-1</u>：坦X 距離攻擊者最近
			則依正序護衛
			(=&gt; 坦X護衛)

			<u>狀況-2</u>：坦X 距離攻擊者不是最近
			比坦X更近的那堆中，依倒序護衛
			(愈後上場者、護衛優先級愈高)
		</pre></details>`;return{c(){e=f("div"),e.innerHTML=u,this.h()},l(n){e=d(n,"DIV",{class:!0,"data-svelte-h":!0}),bt(e)!=="svelte-34ydph"&&(e.innerHTML=u),this.h()},h(){r(e,"class","intro")},m(n,s){K(n,e,s)},p:At,i:At,o:At,d(n){n&&_(e)}}}class Zt extends Qt{constructor(e){super(),Jt(this,e,null,Yt,zt,{})}}function Ut(t,e,u){const n=t.slice();return n[16]=e[u],n[17]=e,n[18]=u,n}function Ht(t,e,u){const n=t.slice();return n[19]=e[u],n}function Xt(t,e,u){const n=t.slice();return n[22]=e[u],n}function qt(t){let e,u;return{c(){e=f("div"),this.h()},l(n){e=d(n,"DIV",{class:!0,"data-title":!0,tabindex:!0,style:!0}),y(e).forEach(_),this.h()},h(){r(e,"class","dot--attacker svelte-1tiyger"),r(e,"data-title",u=t[22].title),r(e,"tabindex","-1"),I(e,"--x",t[22].x),I(e,"--y",t[22].y),I(e,"--bgc",t[22].color)},m(n,s){K(n,e,s)},p(n,s){s&8&&u!==(u=n[22].title)&&r(e,"data-title",u),s&8&&I(e,"--x",n[22].x),s&8&&I(e,"--y",n[22].y),s&8&&I(e,"--bgc",n[22].color)},d(n){n&&_(e)}}}function Ft(t){let e,u,n;return{c(){e=f("div"),this.h()},l(s){e=d(s,"DIV",{class:!0,"data-range":!0,"data-title":!0,style:!0}),y(e).forEach(_),this.h()},h(){r(e,"class","dot svelte-1tiyger"),r(e,"data-range",u=t[19].range),r(e,"data-title",n=t[19].title),I(e,"--x",t[19].x),I(e,"--y",t[19].y),I(e,"--bgc",t[19].color)},m(s,o){K(s,e,o)},p(s,o){o&4&&u!==(u=s[19].range)&&r(e,"data-range",u),o&4&&n!==(n=s[19].title)&&r(e,"data-title",n),o&4&&I(e,"--x",s[19].x),o&4&&I(e,"--y",s[19].y),o&4&&I(e,"--bgc",s[19].color)},d(s){s&&_(e)}}}function jt(t){let e,u=t[16].title+"",n,s,o,k="護衛",M,X,W,T,z,lt,L,q,F,b,N,nt,c,h,p,g,P,x,E,rt,B,Y,ot,V;function ct(){t[5].call(T,t[17],t[18])}function yt(){t[6].call(b,t[17],t[18])}function at(){t[7].call(g,t[17],t[18])}function it(){t[8].call(B,t[17],t[18])}return{c(){e=f("dt"),n=tt(u),s=tt(" - "),o=f("small"),o.textContent=k,M=f("dd"),X=f("label"),W=tt(`x:
							`),T=f("input"),lt=G(),L=f("dd"),q=f("label"),F=tt(`y:
							`),b=f("input"),nt=G(),c=f("dd"),h=f("label"),p=tt(`護衛範圍:
							`),g=f("input"),P=G(),x=f("dd"),E=f("label"),rt=tt(`顏色:
							`),B=f("input"),Y=G(),this.h()},l(D){e=d(D,"DT",{class:!0});var m=y(e);n=et(m,u),s=et(m," - "),o=d(m,"SMALL",{"data-svelte-h":!0}),bt(o)!=="svelte-10n6ta2"&&(o.textContent=k),m.forEach(_),M=d(D,"DD",{class:!0});var st=y(M);X=d(st,"LABEL",{});var ft=y(X);W=et(ft,`x:
							`),T=d(ft,"INPUT",{type:!0,max:!0,min:!0}),ft.forEach(_),lt=S(st),st.forEach(_),L=d(D,"DD",{class:!0});var O=y(L);q=d(O,"LABEL",{});var ht=y(q);F=et(ht,`y:
							`),b=d(ht,"INPUT",{type:!0,max:!0,min:!0}),ht.forEach(_),nt=S(O),O.forEach(_),c=d(D,"DD",{class:!0});var Z=y(c);h=d(Z,"LABEL",{});var H=y(h);p=et(H,`護衛範圍:
							`),g=d(H,"INPUT",{type:!0,max:!0,min:!0}),H.forEach(_),P=S(Z),Z.forEach(_),x=d(D,"DD",{class:!0});var ut=y(x);E=d(ut,"LABEL",{});var R=y(E);rt=et(R,`顏色:
							`),B=d(R,"INPUT",{type:!0}),R.forEach(_),Y=S(ut),ut.forEach(_),this.h()},h(){r(e,"class","svelte-1tiyger"),r(T,"type","number"),r(T,"max",z=t[0]-1),r(T,"min","0"),r(M,"class","svelte-1tiyger"),r(b,"type","number"),r(b,"max",N=t[0]-1),r(b,"min","0"),r(L,"class","svelte-1tiyger"),r(g,"type","number"),r(g,"max","3"),r(g,"min","0"),r(c,"class","svelte-1tiyger"),r(B,"type","color"),r(x,"class","svelte-1tiyger")},m(D,m){K(D,e,m),i(e,n),i(e,s),i(e,o),K(D,M,m),i(M,X),i(X,W),i(X,T),U(T,t[16].x),i(M,lt),K(D,L,m),i(L,q),i(q,F),i(q,b),U(b,t[16].y),i(L,nt),K(D,c,m),i(c,h),i(h,p),i(h,g),U(g,t[16].range),i(c,P),K(D,x,m),i(x,E),i(E,rt),i(E,B),U(B,t[16].color),i(x,Y),ot||(V=[_t(T,"input",ct),_t(b,"input",yt),_t(g,"input",at),_t(B,"input",it)],ot=!0)},p(D,m){t=D,m&4&&u!==(u=t[16].title+"")&&Ot(n,u),m&1&&z!==(z=t[0]-1)&&r(T,"max",z),m&4&&j(T.value)!==t[16].x&&U(T,t[16].x),m&1&&N!==(N=t[0]-1)&&r(b,"max",N),m&4&&j(b.value)!==t[16].y&&U(b,t[16].y),m&4&&j(g.value)!==t[16].range&&U(g,t[16].range),m&4&&U(B,t[16].color)},d(D){D&&(_(e),_(M),_(L),_(c),_(x)),ot=!1,Rt(V)}}}function te(t){let e,u,n,s,o,k,M,X,W,T,z,lt,L,q,F,b,N,nt="自訂區塊",c,h,p,g=t[1].title+"",P,x,E,rt="被攻擊目標",B,Y,ot,V,ct,yt,at,it,D,m,st,ft,O,ht="格子數:",Z,H,ut,R,Q,Tt,Vt;e=new Kt({props:{title:"多重護衛優先級判定模擬"}});let pt=gt(t[3]),$=[];for(let l=0;l<pt.length;l+=1)$[l]=qt(Xt(t,pt,l));let mt=gt(t[2]),A=[];for(let l=0;l<mt.length;l+=1)A[l]=Ft(Ht(t,mt,l));L=new Zt({});let vt=gt(t[2]),C=[];for(let l=0;l<vt.length;l+=1)C[l]=jt(Ut(t,vt,l));return R=new Wt({props:{refs:t[4]}}),{c(){xt(e.$$.fragment),u=G(),n=f("div"),s=f("div"),o=f("div"),k=f("div"),X=G();for(let l=0;l<$.length;l+=1)$[l].c();W=G();for(let l=0;l<A.length;l+=1)A[l].c();T=G(),z=f("hr"),lt=G(),xt(L.$$.fragment),q=G(),F=f("form"),b=f("fieldset"),N=f("legend"),N.textContent=nt,c=G(),h=f("dl");for(let l=0;l<C.length;l+=1)C[l].c();p=f("dt"),P=tt(g),x=tt(" - "),E=f("small"),E.textContent=rt,B=f("dd"),Y=f("label"),ot=tt(`x:
						`),V=f("input"),yt=G(),at=f("dd"),it=f("label"),D=tt(`y:
						`),m=f("input"),ft=G(),O=f("dt"),O.textContent=ht,Z=f("dd"),H=f("input"),ut=G(),xt(R.$$.fragment),this.h()},l(l){Bt(e.$$.fragment,l),u=S(l),n=d(l,"DIV",{class:!0});var v=y(n);s=d(v,"DIV",{class:!0});var a=y(s);o=d(a,"DIV",{class:!0,style:!0});var w=y(o);k=d(w,"DIV",{class:!0,"data-title":!0,style:!0}),y(k).forEach(_),X=S(w);for(let J=0;J<$.length;J+=1)$[J].l(w);W=S(w);for(let J=0;J<A.length;J+=1)A[J].l(w);w.forEach(_),T=S(a),z=d(a,"HR",{class:!0}),lt=S(a),Bt(L.$$.fragment,a),a.forEach(_),q=S(v),F=d(v,"FORM",{class:!0});var Gt=y(F);b=d(Gt,"FIELDSET",{class:!0});var Et=y(b);N=d(Et,"LEGEND",{class:!0,"data-svelte-h":!0}),bt(N)!=="svelte-10qi1l6"&&(N.textContent=nt),c=S(Et),h=d(Et,"DL",{});var dt=y(h);for(let J=0;J<C.length;J+=1)C[J].l(dt);p=d(dt,"DT",{class:!0});var Dt=y(p);P=et(Dt,g),x=et(Dt," - "),E=d(Dt,"SMALL",{"data-svelte-h":!0}),bt(E)!=="svelte-movwq3"&&(E.textContent=rt),Dt.forEach(_),B=d(dt,"DD",{class:!0});var Lt=y(B);Y=d(Lt,"LABEL",{});var It=y(Y);ot=et(It,`x:
						`),V=d(It,"INPUT",{type:!0,max:!0,min:!0}),It.forEach(_),yt=S(Lt),Lt.forEach(_),at=d(dt,"DD",{class:!0});var kt=y(at);it=d(kt,"LABEL",{});var $t=y(it);D=et($t,`y:
						`),m=d($t,"INPUT",{type:!0,max:!0,min:!0}),$t.forEach(_),ft=S(kt),kt.forEach(_),O=d(dt,"DT",{class:!0,"data-svelte-h":!0}),bt(O)!=="svelte-oapw7o"&&(O.textContent=ht),Z=d(dt,"DD",{class:!0});var St=y(Z);H=d(St,"INPUT",{type:!0,min:!0}),St.forEach(_),dt.forEach(_),Et.forEach(_),Gt.forEach(_),v.forEach(_),ut=S(l),Bt(R.$$.fragment,l),this.h()},h(){r(k,"class","dot attackee svelte-1tiyger"),r(k,"data-title",M=t[1].title),I(k,"--x",t[1].x),I(k,"--y",t[1].y),r(o,"class","map svelte-1tiyger"),I(o,"--grid",t[0]),r(z,"class","svelte-1tiyger"),r(s,"class","map-box svelte-1tiyger"),r(N,"class","svelte-1tiyger"),r(p,"class","svelte-1tiyger"),r(V,"type","number"),r(V,"max",ct=t[0]-1),r(V,"min","0"),r(B,"class","svelte-1tiyger"),r(m,"type","number"),r(m,"max",st=t[0]-1),r(m,"min","0"),r(at,"class","svelte-1tiyger"),r(O,"class","svelte-1tiyger"),r(H,"type","number"),r(H,"min","4"),r(Z,"class","svelte-1tiyger"),r(b,"class","svelte-1tiyger"),r(F,"class","aside svelte-1tiyger"),r(n,"class","workspace flex ai-c svelte-1tiyger")},m(l,v){Mt(e,l,v),K(l,u,v),K(l,n,v),i(n,s),i(s,o),i(o,k),i(o,X);for(let a=0;a<$.length;a+=1)$[a]&&$[a].m(o,null);i(o,W);for(let a=0;a<A.length;a+=1)A[a]&&A[a].m(o,null);i(s,T),i(s,z),i(s,lt),Mt(L,s,null),i(n,q),i(n,F),i(F,b),i(b,N),i(b,c),i(b,h);for(let a=0;a<C.length;a+=1)C[a]&&C[a].m(h,null);i(h,p),i(p,P),i(p,x),i(p,E),i(h,B),i(B,Y),i(Y,ot),i(Y,V),U(V,t[1].x),i(B,yt),i(h,at),i(at,it),i(it,D),i(it,m),U(m,t[1].y),i(at,ft),i(h,O),i(h,Z),i(Z,H),U(H,t[0]),K(l,ut,v),Mt(R,l,v),Q=!0,Tt||(Vt=[_t(V,"input",t[9]),_t(m,"input",t[10]),_t(H,"input",t[11])],Tt=!0)},p(l,[v]){if((!Q||v&2&&M!==(M=l[1].title))&&r(k,"data-title",M),(!Q||v&2)&&I(k,"--x",l[1].x),(!Q||v&2)&&I(k,"--y",l[1].y),v&8){pt=gt(l[3]);let a;for(a=0;a<pt.length;a+=1){const w=Xt(l,pt,a);$[a]?$[a].p(w,v):($[a]=qt(w),$[a].c(),$[a].m(o,W))}for(;a<$.length;a+=1)$[a].d(1);$.length=pt.length}if(v&4){mt=gt(l[2]);let a;for(a=0;a<mt.length;a+=1){const w=Ht(l,mt,a);A[a]?A[a].p(w,v):(A[a]=Ft(w),A[a].c(),A[a].m(o,null))}for(;a<A.length;a+=1)A[a].d(1);A.length=mt.length}if((!Q||v&1)&&I(o,"--grid",l[0]),v&5){vt=gt(l[2]);let a;for(a=0;a<vt.length;a+=1){const w=Ut(l,vt,a);C[a]?C[a].p(w,v):(C[a]=jt(w),C[a].c(),C[a].m(h,p))}for(;a<C.length;a+=1)C[a].d(1);C.length=vt.length}(!Q||v&2)&&g!==(g=l[1].title+"")&&Ot(P,g),(!Q||v&1&&ct!==(ct=l[0]-1))&&r(V,"max",ct),v&2&&j(V.value)!==l[1].x&&U(V,l[1].x),(!Q||v&1&&st!==(st=l[0]-1))&&r(m,"max",st),v&2&&j(m.value)!==l[1].y&&U(m,l[1].y),v&1&&j(H.value)!==l[0]&&U(H,l[0])},i(l){Q||(wt(e.$$.fragment,l),wt(L.$$.fragment,l),wt(R.$$.fragment,l),Q=!0)},o(l){Nt(e.$$.fragment,l),Nt(L.$$.fragment,l),Nt(R.$$.fragment,l),Q=!1},d(l){l&&(_(u),_(n),_(ut)),Pt(e,l),Ct($,l),Ct(A,l),Pt(L),Ct(C,l),Pt(R,l),Tt=!1,Rt(Vt)}}}function ee(t,e){return t.index-e.index}function le(t,e,u){let n=6,s={index:10,order:10,title:"受",x:2,y:2},o=[{index:1,order:1,title:"坦1",x:2,y:0,range:2,color:"#ff9999"},{index:2,order:2,title:"坦2",x:4,y:2,range:3,color:"#99ff99"},{index:3,order:3,title:"坦3",x:2,y:4,range:2,color:"#9999ff"},{index:4,order:4,title:"坦4",x:0,y:2,range:2,color:"#99ff33"}],k=[],M={title:""};function X(){let c=[],h=W();for(let p=n-1;p>=0;p--)for(let g=n-1;g>=0;g--){let P=T(p,g,h);c[p+g*n]={title:`${P.title}`,x:p,y:g,color:P.color}}u(3,k=c)}function W(){let c=[],h=n*2;return o.forEach(p=>{if(p.range<p.distance2T)return null;h>=p.distance2T&&(h=p.distance2T,c[p.distance2T]||(c[p.distance2T]=[]),c[p.distance2T].push(p))}),c[h].sort(ee)}function T(c,h,p){if(!p||p.length===0)return M;let g=p[0];if(p.length===1)return g;let P,x=p.filter((E,rt)=>(E.distance2A=Math.abs(E.y-h)+Math.abs(E.x-c),rt||(P=E.distance2A),P>E.distance2A));return x.length?x[x.length-1]:g}let z=[{link:"https://www.bilibili.com/video/BV1VB4y1y7fh/",title:"「天地劫」多T护卫机制 详解 @ bilibili by u/墨_源",target:"_blank"}];function lt(c,h){c[h].x=j(this.value),u(2,o)}function L(c,h){c[h].y=j(this.value),u(2,o)}function q(c,h){c[h].range=j(this.value),u(2,o)}function F(c,h){c[h].color=this.value,u(2,o)}function b(){s.x=j(this.value),u(1,s)}function N(){s.y=j(this.value),u(1,s)}function nt(){n=j(this.value),u(0,n)}return t.$$.update=()=>{t.$$.dirty&7&&(o.forEach(c=>{c.distance2T=Math.abs(c.y-s.y)+Math.abs(c.x-s.x)}),X())},[n,s,o,k,z,lt,L,q,F,b,N,nt]}class oe extends Qt{constructor(e){super(),Jt(this,e,le,te,zt,{})}}export{oe as component,ue as universal};
