import{H as re}from"../chunks/control.CYgJF_JY.js";import{f as ie,R as ne}from"../chunks/Role.CZ7gWlyZ.js";import{s as x,e as d,a as $,b as k,c as R,t as O,f,d as E,i as _,n as N,G as oe,z as j,A as z,I as V,u as J,v as H,B as M,J as D,L as ae,g as se}from"../chunks/scheduler.DRRiJXpm.js";import{h as Y,u as ce}from"../chunks/await_block.CCM49jVG.js";import{S as ee,i as te,c as L,a as T,m as U,t as I,b as P,d as B,g as fe,e as ue}from"../chunks/index.D1isTMd_.js";import{g as q,r as Q}from"../chunks/u.C7RSyEBX.js";import{e as X}from"../chunks/each.n077PHkZ.js";import{H as _e}from"../chunks/Header.BbYueiiO.js";function me(i,e){throw new re(i,e)}new TextEncoder;const he=async({params:i})=>{try{return{role:ie("name",i.slug),slug:i.slug}}catch(e){me(404,e)}},Ae=Object.freeze(Object.defineProperty({__proto__:null,load:he},Symbol.toStringTag,{value:"Module"})),pe={cn:"tdj-activity.zlongame.com",tw:"tdj-activity.game-beans.com"},le=[{get_proxy_url:i=>`https://api.allorigins.win/get?url=${encodeURIComponent(i)}`,fetch:async i=>fetch(i).then(e=>e.json()).then(e=>{var t;return e=JSON.parse(e==null?void 0:e.contents),console.log("fetch role.cn",e),(t=e.data)==null?void 0:t.data[0]})},{get_proxy_url:i=>`https://corsproxy.io/?${encodeURIComponent(i)}`,fetch:async i=>fetch(i).then(e=>e.text()).then(e=>{var t;return e=JSON.parse(e),console.log("fetch role.tw",e),(t=e.data)==null?void 0:t.data[0]})}][0];async function ge(i){let e=i.pinyin_tw?F(i.pinyin_tw,"tw"):F(i.pinyin,"cn");return le.fetch(e)}function F(i,e){return de({module:"hero",type:"detail",query:i},e)}function de(i={},e="cn"){i={id:e==="cn"?0:1,action:"info",module:"hero",type:"basic",...i};let t=new URLSearchParams;for(let a in i)t.set(a,i[a]);let r=`https://${pe[e]}/tdj/data/mQuery.do?${t.toString()}`;return le.get_proxy_url(r)}function K(i,e,t){const r=i.slice();return r[3]=e[t],r}function W(i){let e,t,r,o=i[3].name+"",a,p,m,S,h,v,b,w,c,s,l=JSON.stringify(i[3],null,2)+"",n,g;return{c(){e=d("div"),t=d("details"),r=d("summary"),a=j(o),p=$(),m=d("br"),S=$(),h=d("img"),c=$(),s=d("pre"),n=j(l),g=$(),this.h()},l(u){e=k(u,"DIV",{class:!0,style:!0});var y=O(e);t=k(y,"DETAILS",{});var A=O(t);r=k(A,"SUMMARY",{});var C=O(r);a=z(C,o),p=R(C),m=k(C,"BR",{}),S=R(C),h=k(C,"IMG",{src:!0,alt:!0,title:!0,width:!0,height:!0,class:!0}),C.forEach(f),c=R(A),s=k(A,"PRE",{});var G=O(s);n=z(G,l),G.forEach(f),A.forEach(f),g=R(y),y.forEach(f),this.h()},h(){V(h.src,v=q("skill",i[3].img,96,i[1]))||E(h,"src",v),E(h,"alt",b=i[3].name),E(h,"title",w=i[3].name),E(h,"width","48"),E(h,"height","48"),E(h,"class","svelte-o2wac2"),E(e,"class","skill ai-c jc-c flex text-center svelte-o2wac2"),J(e,"--row",i[3].grid_row),J(e,"--col",i[3].grid_col)},m(u,y){_(u,e,y),H(e,t),H(t,r),H(r,a),H(r,p),H(r,m),H(r,S),H(r,h),H(t,c),H(t,s),H(s,n),H(e,g)},p(u,y){y&1&&o!==(o=u[3].name+"")&&M(a,o),y&3&&!V(h.src,v=q("skill",u[3].img,96,u[1]))&&E(h,"src",v),y&1&&b!==(b=u[3].name)&&E(h,"alt",b),y&1&&w!==(w=u[3].name)&&E(h,"title",w),y&1&&l!==(l=JSON.stringify(u[3],null,2)+"")&&M(n,l),y&1&&J(e,"--row",u[3].grid_row),y&1&&J(e,"--col",u[3].grid_col)},d(u){u&&f(e)}}}function ke(i){let e,t,r,o,a,p,m,S,h,v,b,w,c,s=X(i[0]),l=[];for(let n=0;n<s.length;n+=1)l[n]=W(K(i,s,n));return{c(){e=d("hr"),t=$(),r=d("hr"),o=$(),a=d("hr"),p=$(),m=d("div");for(let n=0;n<l.length;n+=1)l[n].c();S=$(),h=d("hr"),v=$(),b=d("hr"),w=$(),c=d("hr"),this.h()},l(n){e=k(n,"HR",{}),t=R(n),r=k(n,"HR",{}),o=R(n),a=k(n,"HR",{}),p=R(n),m=k(n,"DIV",{class:!0});var g=O(m);for(let u=0;u<l.length;u+=1)l[u].l(g);g.forEach(f),S=R(n),h=k(n,"HR",{}),v=R(n),b=k(n,"HR",{}),w=R(n),c=k(n,"HR",{}),this.h()},h(){E(m,"class","skills svelte-o2wac2")},m(n,g){_(n,e,g),_(n,t,g),_(n,r,g),_(n,o,g),_(n,a,g),_(n,p,g),_(n,m,g);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(m,null);_(n,S,g),_(n,h,g),_(n,v,g),_(n,b,g),_(n,w,g),_(n,c,g)},p(n,[g]){if(g&3){s=X(n[0]);let u;for(u=0;u<s.length;u+=1){const y=K(n,s,u);l[u]?l[u].p(y,g):(l[u]=W(y),l[u].c(),l[u].m(m,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=s.length}},i:N,o:N,d(n){n&&(f(e),f(t),f(r),f(o),f(a),f(p),f(m),f(S),f(h),f(v),f(b),f(w),f(c)),oe(l,n)}}}function we(i){let e=[void 0];return i=i.map(t=>{var o;switch(+((o=t.unlock_condition.match(/\d+/))==null?void 0:o[0])||0){case 0:t.grid_row=1,t.grid_col=3;break;case 3:t.grid_row=2,t.grid_col=3,e[0]=t.inner_power1;break;case 15:e.includes(t.inner_power1)||e.push(t.inner_power1),t.grid_row=3,t.grid_col=e.indexOf(t.inner_power1)===1?5:1;break;case 25:t.grid_row=4,t.grid_col=3;break;case 40:e.includes(t.inner_power2)||e.push(t.inner_power2),t.grid_row=5,t.grid_col=e.indexOf(t.inner_power2)===1?4:2;break;case 55:t.grid_row=6,t.grid_col=3;break}return t}),i}function ve(i,e,t){let{skills:r=[]}=e,{lang:o="tw"}=e;return r=we(r),i.$$set=a=>{"skills"in a&&t(0,r=a.skills),"lang"in a&&t(1,o=a.lang)},[r,o]}class be extends ee{constructor(e){super(),te(this,e,ve,ke,x,{skills:0,lang:1})}}function ye(i){let e,t,r,o={ctx:i,current:null,token:null,hasCatch:!0,pending:Se,then:Re,catch:$e,value:2,error:3,blocks:[,,,]};return Y(t=i[1],o),{c(){e=D(),o.block.c()},l(a){e=D(),o.block.l(a)},m(a,p){_(a,e,p),o.block.m(a,o.anchor=p),o.mount=()=>e.parentNode,o.anchor=e,r=!0},p(a,p){i=a,o.ctx=i,p&2&&t!==(t=i[1])&&Y(t,o)||ce(o,i,p)},i(a){r||(I(o.block),r=!0)},o(a){for(let p=0;p<3;p+=1){const m=o.blocks[p];P(m)}r=!1},d(a){a&&f(e),o.block.d(a),o.token=null,o=null}}}function $e(i){let e,t=i[3].message+"",r;return{c(){e=d("p"),r=j(t),this.h()},l(o){e=k(o,"P",{style:!0});var a=O(e);r=z(a,t),a.forEach(f),this.h()},h(){J(e,"color","red")},m(o,a){_(o,e,a),H(e,r)},p(o,a){a&2&&t!==(t=o[3].message+"")&&M(r,t)},i:N,o:N,d(o){o&&f(e)}}}function Re(i){let e,t,r,o=JSON.stringify(i[2],null,2)+"",a,p,m,S,h,v,b,w,c=i[2]&&Z(i);return{c(){c&&c.c(),e=$(),t=d("details"),r=d("pre"),a=j(o),p=$(),m=d("hr"),S=$(),h=d("hr"),v=$(),b=d("hr"),this.h()},l(s){c&&c.l(s),e=R(s),t=k(s,"DETAILS",{});var l=O(t);r=k(l,"PRE",{class:!0});var n=O(r);a=z(n,o),n.forEach(f),l.forEach(f),p=R(s),m=k(s,"HR",{}),S=R(s),h=k(s,"HR",{}),v=R(s),b=k(s,"HR",{}),this.h()},h(){E(r,"class","svelte-1p797cy")},m(s,l){c&&c.m(s,l),_(s,e,l),_(s,t,l),H(t,r),H(r,a),_(s,p,l),_(s,m,l),_(s,S,l),_(s,h,l),_(s,v,l),_(s,b,l),w=!0},p(s,l){s[2]?c?(c.p(s,l),l&2&&I(c,1)):(c=Z(s),c.c(),I(c,1),c.m(e.parentNode,e)):c&&(fe(),P(c,1,1,()=>{c=null}),ue()),(!w||l&2)&&o!==(o=JSON.stringify(s[2],null,2)+"")&&M(a,o)},i(s){w||(I(c),w=!0)},o(s){P(c),w=!1},d(s){s&&(f(e),f(t),f(p),f(m),f(S),f(h),f(v),f(b)),c&&c.d(s)}}}function Z(i){let e,t;return e=new be({props:{skills:i[2].skill,lang:i[0].role.pinyin_tw?"tw":"cn"}}),{c(){L(e.$$.fragment)},l(r){T(e.$$.fragment,r)},m(r,o){U(e,r,o),t=!0},p(r,o){const a={};o&2&&(a.skills=r[2].skill),o&1&&(a.lang=r[0].role.pinyin_tw?"tw":"cn"),e.$set(a)},i(r){t||(I(e.$$.fragment,r),t=!0)},o(r){P(e.$$.fragment,r),t=!1},d(r){B(e,r)}}}function Se(i){let e,t="...waiting";return{c(){e=d("p"),e.textContent=t},l(r){e=k(r,"P",{"data-svelte-h":!0}),se(e)!=="svelte-mv6tav"&&(e.textContent=t)},m(r,o){_(r,e,o)},p:N,i:N,o:N,d(r){r&&f(e)}}}function Ee(i){var s;let e,t,r,o,a,p,m,S,h,v,b,w;e=new _e({props:{parent_path:"/role",title:"英靈："+((s=i[0].role)==null?void 0:s.name)}}),r=new ne({props:{data:i[0].role,type:"card"}});let c=ye(i);return{c(){L(e.$$.fragment),t=$(),L(r.$$.fragment),o=$(),a=d("hr"),p=$(),m=d("a"),S=j("large avater img"),v=$(),c&&c.c(),b=D(),this.h()},l(l){T(e.$$.fragment,l),t=R(l),T(r.$$.fragment,l),o=R(l),a=k(l,"HR",{}),p=R(l),m=k(l,"A",{href:!0,rel:!0,target:!0});var n=O(m);S=z(n,"large avater img"),n.forEach(f),v=R(l),c&&c.l(l),b=D(),this.h()},h(){E(m,"href",h=Q(`https://media.zlongame.com/media/news/cn/tdj/info/data/hero/${i[0].role.pic}.png`,960)),E(m,"rel","noopener"),E(m,"target","_img")},m(l,n){U(e,l,n),_(l,t,n),U(r,l,n),_(l,o,n),_(l,a,n),_(l,p,n),_(l,m,n),H(m,S),_(l,v,n),c&&c.m(l,n),_(l,b,n),w=!0},p(l,[n]){var y;const g={};n&1&&(g.title="英靈："+((y=l[0].role)==null?void 0:y.name)),e.$set(g);const u={};n&1&&(u.data=l[0].role),r.$set(u),(!w||n&1&&h!==(h=Q(`https://media.zlongame.com/media/news/cn/tdj/info/data/hero/${l[0].role.pic}.png`,960)))&&E(m,"href",h),c.p(l,n)},i(l){w||(I(e.$$.fragment,l),I(r.$$.fragment,l),I(c),w=!0)},o(l){P(e.$$.fragment,l),P(r.$$.fragment,l),P(c),w=!1},d(l){l&&(f(t),f(o),f(a),f(p),f(m),f(v),f(b)),B(e,l),B(r,l),c&&c.d(l)}}}function He(i,e,t){let{data:r}=e,o;return ae(()=>{t(1,o=ge(r.role))}),i.$$set=a=>{"data"in a&&t(0,r=a.data)},[r,o]}class Me extends ee{constructor(e){super(),te(this,e,He,Ee,x,{data:0})}}export{Me as component,Ae as universal};
