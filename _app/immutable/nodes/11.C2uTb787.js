import{H as he}from"../chunks/control.CYgJF_JY.js";import{f as pe,R as ve}from"../chunks/Role.CVQWNipT.js";import{s as B,e as k,b,t as N,f as _,d as g,i as p,n as q,G as fe,z,a as y,A as T,c as E,I as Q,u as A,v as S,B as U,J as V,L as de,g as ge}from"../chunks/scheduler.DRRiJXpm.js";import{h as ee,u as we}from"../chunks/await_block.CCM49jVG.js";import{S as G,i as Y,c as C,a as J,m as M,t as O,b as P,d as j,g as ue,e as ce}from"../chunks/index.D1isTMd_.js";import{g as W,c as K,r as te}from"../chunks/u.BlNUTzy4.js";import{e as X}from"../chunks/each.n077PHkZ.js";import{H as $e}from"../chunks/Header.ByfgYeEh.js";function ke(i,e){throw new he(i,e)}new TextEncoder;const be=async({params:i})=>{try{return{role:pe("name",i.slug),slug:i.slug}}catch(e){ke(404,e)}},Ze=Object.freeze(Object.defineProperty({__proto__:null,load:be},Symbol.toStringTag,{value:"Module"})),ye={cn:"tdj-activity.zlongame.com",tw:"tdj-activity.game-beans.com"},_e=[{get_proxy_url:i=>`https://api.allorigins.win/get?url=${encodeURIComponent(i)}`,fetch:async i=>fetch(i).then(e=>e.json()).then(e=>{var l;return e=JSON.parse(e==null?void 0:e.contents),console.log("fetch role.cn",e),(l=e.data)==null?void 0:l.data[0]})},{get_proxy_url:i=>`https://corsproxy.io/?${encodeURIComponent(i)}`,fetch:async i=>fetch(i).then(e=>e.text()).then(e=>{var l;return e=JSON.parse(e),console.log("fetch role.tw",e),(l=e.data)==null?void 0:l.data[0]})}][1];async function Ee(i){let e=i.pinyin_tw?le(i.pinyin_tw,"tw"):le(i.pinyin,"cn");return _e.fetch(e)}function le(i,e){return Re({module:"hero",type:"detail",query:i},e)}function Re(i={},e="cn"){i={id:e==="cn"?0:1,action:"info",module:"hero",type:"basic",...i};let l=new URLSearchParams;for(let n in i)l.set(n,i[n]);let t=`https://${ye[e]}/tdj/data/mQuery.do?${l.toString()}`;return _e.get_proxy_url(t)}function re(i,e,l){const t=i.slice();return t[3]=e[l],t}function ie(i){let e,l,t,r=i[3].name+"",n,f,v,$,c,m,d,h,a,o,s=JSON.stringify(i[3],null,2)+"",w,L;return{c(){e=k("div"),l=k("details"),t=k("summary"),n=z(r),f=y(),v=k("br"),$=y(),c=k("img"),a=y(),o=k("pre"),w=z(s),L=y(),this.h()},l(H){e=b(H,"DIV",{class:!0,style:!0});var I=N(e);l=b(I,"DETAILS",{});var D=N(l);t=b(D,"SUMMARY",{});var u=N(t);n=T(u,r),f=E(u),v=b(u,"BR",{}),$=E(u),c=b(u,"IMG",{src:!0,alt:!0,title:!0,width:!0,height:!0,class:!0}),u.forEach(_),a=E(D),o=b(D,"PRE",{});var R=N(o);w=T(R,s),R.forEach(_),D.forEach(_),L=E(I),I.forEach(_),this.h()},h(){Q(c.src,m=W("skill",i[3].img,96,i[1]))||g(c,"src",m),g(c,"alt",d=i[3].name),g(c,"title",h=i[3].name),g(c,"width","48"),g(c,"height","48"),g(c,"class","svelte-o2wac2"),g(e,"class","skill ai-c jc-c flex text-center svelte-o2wac2"),A(e,"--row",i[3].grid_row),A(e,"--col",i[3].grid_col)},m(H,I){p(H,e,I),S(e,l),S(l,t),S(t,n),S(t,f),S(t,v),S(t,$),S(t,c),S(l,a),S(l,o),S(o,w),S(e,L)},p(H,I){I&1&&r!==(r=H[3].name+"")&&U(n,r),I&3&&!Q(c.src,m=W("skill",H[3].img,96,H[1]))&&g(c,"src",m),I&1&&d!==(d=H[3].name)&&g(c,"alt",d),I&1&&h!==(h=H[3].name)&&g(c,"title",h),I&1&&s!==(s=JSON.stringify(H[3],null,2)+"")&&U(w,s),I&1&&A(e,"--row",H[3].grid_row),I&1&&A(e,"--col",H[3].grid_col)},d(H){H&&_(e)}}}function Se(i){let e,l=X(i[0]),t=[];for(let r=0;r<l.length;r+=1)t[r]=ie(re(i,l,r));return{c(){e=k("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=b(r,"DIV",{class:!0});var n=N(e);for(let f=0;f<t.length;f+=1)t[f].l(n);n.forEach(_),this.h()},h(){g(e,"class","skills svelte-o2wac2")},m(r,n){p(r,e,n);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null)},p(r,[n]){if(n&3){l=X(r[0]);let f;for(f=0;f<l.length;f+=1){const v=re(r,l,f);t[f]?t[f].p(v,n):(t[f]=ie(v),t[f].c(),t[f].m(e,null))}for(;f<t.length;f+=1)t[f].d(1);t.length=l.length}},i:q,o:q,d(r){r&&_(e),fe(t,r)}}}function He(i){let e=[void 0];return i=i.map(l=>{var r;switch(+((r=l.unlock_condition.match(/\d+/))==null?void 0:r[0])||0){case 0:l.grid_row=1,l.grid_col=3;break;case 3:l.grid_row=2,l.grid_col=3,e[0]=l.inner_power1;break;case 15:e.includes(l.inner_power1)||e.push(l.inner_power1),l.grid_row=3,l.grid_col=e.indexOf(l.inner_power1)===1?5:1;break;case 25:l.grid_row=4,l.grid_col=3;break;case 40:e.includes(l.inner_power2)||e.push(l.inner_power2),l.grid_row=5,l.grid_col=e.indexOf(l.inner_power2)===1?4:2;break;case 55:l.grid_row=6,l.grid_col=3;break}return l}),i}function Ie(i,e,l){let{skills:t=[]}=e,{lang:r="tw"}=e;return t=He(t),i.$$set=n=>{"skills"in n&&l(0,t=n.skills),"lang"in n&&l(1,r=n.lang)},[t,r]}class Ne extends G{constructor(e){super(),Y(this,e,Ie,Se,B,{skills:0,lang:1})}}function ne(i,e,l){const t=i.slice();return t[2]=e[l],t[4]=l,t}function se(i){let e,l,t,r,n,f,v,$,c,m=i[2]+"",d,h;return{c(){e=k("input"),n=y(),f=k("label"),$=y(),c=k("div"),d=z(m),h=y(),this.h()},l(a){e=b(a,"INPUT",{class:!0,type:!0,name:!0,id:!0}),n=E(a),f=b(a,"LABEL",{class:!0,for:!0,"data-index":!0,style:!0}),N(f).forEach(_),$=E(a),c=b(a,"DIV",{class:!0});var o=N(c);d=T(o,m),h=E(o),o.forEach(_),this.h()},h(){g(e,"class","visually-hidden svelte-1pvmq8l"),g(e,"type","radio"),g(e,"name",i[1]),g(e,"id",l=i[1]+"-"+(i[4]+1)),e.checked=t=i[4]===i[0].length-1,e.disabled=r=!i[2],g(f,"class","lv svelte-1pvmq8l"),g(f,"for",v=i[1]+"-"+(i[4]+1)),g(f,"data-index",i[4]+1),A(f,"--index",i[4]+1),g(c,"class","desc pre-line svelte-1pvmq8l")},m(a,o){p(a,e,o),p(a,n,o),p(a,f,o),p(a,$,o),p(a,c,o),S(c,d),S(c,h)},p(a,o){o&2&&g(e,"name",a[1]),o&2&&l!==(l=a[1]+"-"+(a[4]+1))&&g(e,"id",l),o&1&&t!==(t=a[4]===a[0].length-1)&&(e.checked=t),o&1&&r!==(r=!a[2])&&(e.disabled=r),o&2&&v!==(v=a[1]+"-"+(a[4]+1))&&g(f,"for",v),o&1&&m!==(m=a[2]+"")&&U(d,m)},d(a){a&&(_(e),_(n),_(f),_($),_(c))}}}function Oe(i){let e,l,t,r,n,f,v,$=X(i[0]),c=[];for(let m=0;m<$.length;m+=1)c[m]=se(ne(i,$,m));return{c(){e=k("input"),t=y(),r=k("div"),n=k("label"),v=y();for(let m=0;m<c.length;m+=1)c[m].c();this.h()},l(m){e=b(m,"INPUT",{type:!0,class:!0,id:!0}),t=E(m),r=b(m,"DIV",{class:!0});var d=N(r);n=b(d,"LABEL",{class:!0,for:!0}),N(n).forEach(_),v=E(d);for(let h=0;h<c.length;h+=1)c[h].l(d);d.forEach(_),this.h()},h(){g(e,"type","checkbox"),g(e,"class","swticher visually-hidden svelte-1pvmq8l"),g(e,"id",l="swticher--"+i[1]),g(n,"class","swticher-label svelte-1pvmq8l"),g(n,"for",f="swticher--"+i[1]),g(r,"class","levels svelte-1pvmq8l")},m(m,d){p(m,e,d),p(m,t,d),p(m,r,d),S(r,n),S(r,v);for(let h=0;h<c.length;h+=1)c[h]&&c[h].m(r,null)},p(m,[d]){if(d&2&&l!==(l="swticher--"+m[1])&&g(e,"id",l),d&2&&f!==(f="swticher--"+m[1])&&g(n,"for",f),d&3){$=X(m[0]);let h;for(h=0;h<$.length;h+=1){const a=ne(m,$,h);c[h]?c[h].p(a,d):(c[h]=se(a),c[h].c(),c[h].m(r,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=$.length}},i:q,o:q,d(m){m&&(_(e),_(t),_(r)),fe(c,m)}}}function Pe(i,e,l){let{lvs:t=[]}=e,{name:r="lv"}=e;return i.$$set=n=>{"lvs"in n&&l(0,t=n.lvs),"name"in n&&l(1,r=n.name)},[t,r]}class me extends G{constructor(e){super(),Y(this,e,Pe,Oe,B,{lvs:0,name:1})}}function Le(i){let e,l;return e=new me({props:{name:"lv",lvs:i[0].map(K)}}),{c(){C(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,r){M(e,t,r),l=!0},p(t,[r]){const n={};r&1&&(n.lvs=t[0].map(K)),e.$set(n)},i(t){l||(O(e.$$.fragment,t),l=!0)},o(t){P(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function De(i,e,l){let{stars:t=["","","","","",""]}=e;return i.$$set=r=>{"stars"in r&&l(0,t=r.stars)},[t]}class qe extends G{constructor(e){super(),Y(this,e,De,Le,B,{stars:0})}}function ae(i){let e,l,t,r,n,f,v,$,c=i[0][0].name+"",m,d,h,a;return h=new me({props:{lvs:i[1],name:"weapon"}}),{c(){e=k("div"),l=k("div"),t=k("img"),f=y(),v=k("br"),$=y(),m=z(c),d=y(),C(h.$$.fragment),this.h()},l(o){e=b(o,"DIV",{class:!0,style:!0});var s=N(e);l=b(s,"DIV",{class:!0});var w=N(l);t=b(w,"IMG",{src:!0,alt:!0}),f=E(w),v=b(w,"BR",{}),$=E(w),m=T(w,c),w.forEach(_),d=E(s),J(h.$$.fragment,s),s.forEach(_),this.h()},h(){Q(t.src,r=W("weapon",i[0][0].img,64))||g(t,"src",r),g(t,"alt",n=i[0][0].name),g(l,"class","text-center"),g(e,"class","flex svelte-v1ad16"),A(e,"gap","1em")},m(o,s){p(o,e,s),S(e,l),S(l,t),S(l,f),S(l,v),S(l,$),S(l,m),S(e,d),M(h,e,null),a=!0},p(o,s){(!a||s&1&&!Q(t.src,r=W("weapon",o[0][0].img,64)))&&g(t,"src",r),(!a||s&1&&n!==(n=o[0][0].name))&&g(t,"alt",n),(!a||s&1)&&c!==(c=o[0][0].name+"")&&U(m,c)},i(o){a||(O(h.$$.fragment,o),a=!0)},o(o){P(h.$$.fragment,o),a=!1},d(o){o&&_(e),j(h)}}}function Ae(i){let e,l,t=i[0]&&i[0][0]&&ae(i);return{c(){t&&t.c(),e=V()},l(r){t&&t.l(r),e=V()},m(r,n){t&&t.m(r,n),p(r,e,n),l=!0},p(r,[n]){r[0]&&r[0][0]?t?(t.p(r,n),n&1&&O(t,1)):(t=ae(r),t.c(),O(t,1),t.m(e.parentNode,e)):t&&(ue(),P(t,1,1,()=>{t=null}),ce())},i(r){l||(O(t),l=!0)},o(r){P(t),l=!1},d(r){r&&_(e),t&&t.d(r)}}}function Ce(i,e,l){let{weapon:t=[]}=e,r=t.map(n=>K(n.desc));return i.$$set=n=>{"weapon"in n&&l(0,t=n.weapon)},[t,r]}class Je extends G{constructor(e){super(),Y(this,e,Ce,Ae,B,{weapon:0})}}function Me(i){let e,l,t,r={ctx:i,current:null,token:null,hasCatch:!0,pending:Te,then:ze,catch:je,value:2,error:3,blocks:[,,,]};return ee(l=i[1],r),{c(){e=V(),r.block.c()},l(n){e=V(),r.block.l(n)},m(n,f){p(n,e,f),r.block.m(n,r.anchor=f),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(n,f){i=n,r.ctx=i,f&2&&l!==(l=i[1])&&ee(l,r)||we(r,i,f)},i(n){t||(O(r.block),t=!0)},o(n){for(let f=0;f<3;f+=1){const v=r.blocks[f];P(v)}t=!1},d(n){n&&_(e),r.block.d(n),r.token=null,r=null}}}function je(i){let e,l=i[3].message+"",t;return{c(){e=k("p"),t=z(l),this.h()},l(r){e=b(r,"P",{style:!0});var n=N(e);t=T(n,l),n.forEach(_),this.h()},h(){A(e,"color","red")},m(r,n){p(r,e,n),S(e,t)},p(r,n){n&2&&l!==(l=r[3].message+"")&&U(t,l)},i:q,o:q,d(r){r&&_(e)}}}function ze(i){let e,l,t,r=JSON.stringify(i[2],null,2)+"",n,f,v,$,c,m,d,h,a=i[2]&&oe(i);return{c(){a&&a.c(),e=y(),l=k("details"),t=k("pre"),n=z(r),f=y(),v=k("hr"),$=y(),c=k("hr"),m=y(),d=k("hr"),this.h()},l(o){a&&a.l(o),e=E(o),l=b(o,"DETAILS",{});var s=N(l);t=b(s,"PRE",{class:!0});var w=N(t);n=T(w,r),w.forEach(_),s.forEach(_),f=E(o),v=b(o,"HR",{}),$=E(o),c=b(o,"HR",{}),m=E(o),d=b(o,"HR",{}),this.h()},h(){g(t,"class","svelte-1p797cy")},m(o,s){a&&a.m(o,s),p(o,e,s),p(o,l,s),S(l,t),S(t,n),p(o,f,s),p(o,v,s),p(o,$,s),p(o,c,s),p(o,m,s),p(o,d,s),h=!0},p(o,s){o[2]?a?(a.p(o,s),s&2&&O(a,1)):(a=oe(o),a.c(),O(a,1),a.m(e.parentNode,e)):a&&(ue(),P(a,1,1,()=>{a=null}),ce()),(!h||s&2)&&r!==(r=JSON.stringify(o[2],null,2)+"")&&U(n,r)},i(o){h||(O(a),h=!0)},o(o){P(a),h=!1},d(o){o&&(_(e),_(l),_(f),_(v),_($),_(c),_(m),_(d)),a&&a.d(o)}}}function oe(i){let e,l,t,r,n,f,v,$,c,m,d,h,a,o,s,w,L,H,I,D;return t=new qe({props:{stars:[i[2].star1,i[2].star2,i[2].star3,i[2].star4,i[2].star5,i[2].star6]}}),c=new Ne({props:{skills:i[2].skill,lang:i[0].role.pinyin_tw?"tw":"cn"}}),s=new Je({props:{weapon:i[2].godclass_weapon}}),{c(){e=k("hr"),l=y(),C(t.$$.fragment),r=y(),n=k("hr"),f=y(),v=k("hr"),$=y(),C(c.$$.fragment),m=y(),d=k("hr"),h=y(),a=k("hr"),o=y(),C(s.$$.fragment),w=y(),L=k("hr"),H=y(),I=k("hr")},l(u){e=b(u,"HR",{}),l=E(u),J(t.$$.fragment,u),r=E(u),n=b(u,"HR",{}),f=E(u),v=b(u,"HR",{}),$=E(u),J(c.$$.fragment,u),m=E(u),d=b(u,"HR",{}),h=E(u),a=b(u,"HR",{}),o=E(u),J(s.$$.fragment,u),w=E(u),L=b(u,"HR",{}),H=E(u),I=b(u,"HR",{})},m(u,R){p(u,e,R),p(u,l,R),M(t,u,R),p(u,r,R),p(u,n,R),p(u,f,R),p(u,v,R),p(u,$,R),M(c,u,R),p(u,m,R),p(u,d,R),p(u,h,R),p(u,a,R),p(u,o,R),M(s,u,R),p(u,w,R),p(u,L,R),p(u,H,R),p(u,I,R),D=!0},p(u,R){const Z={};R&2&&(Z.stars=[u[2].star1,u[2].star2,u[2].star3,u[2].star4,u[2].star5,u[2].star6]),t.$set(Z);const F={};R&2&&(F.skills=u[2].skill),R&1&&(F.lang=u[0].role.pinyin_tw?"tw":"cn"),c.$set(F);const x={};R&2&&(x.weapon=u[2].godclass_weapon),s.$set(x)},i(u){D||(O(t.$$.fragment,u),O(c.$$.fragment,u),O(s.$$.fragment,u),D=!0)},o(u){P(t.$$.fragment,u),P(c.$$.fragment,u),P(s.$$.fragment,u),D=!1},d(u){u&&(_(e),_(l),_(r),_(n),_(f),_(v),_($),_(m),_(d),_(h),_(a),_(o),_(w),_(L),_(H),_(I)),j(t,u),j(c,u),j(s,u)}}}function Te(i){let e,l="...waiting";return{c(){e=k("p"),e.textContent=l},l(t){e=b(t,"P",{"data-svelte-h":!0}),ge(e)!=="svelte-mv6tav"&&(e.textContent=l)},m(t,r){p(t,e,r)},p:q,i:q,o:q,d(t){t&&_(e)}}}function Ue(i){var o;let e,l,t,r,n,f,v,$,c,m,d,h;e=new $e({props:{parent_path:"/role",title:"英靈："+((o=i[0].role)==null?void 0:o.name)}}),t=new ve({props:{data:i[0].role,type:"card"}});let a=Me(i);return{c(){C(e.$$.fragment),l=y(),C(t.$$.fragment),r=y(),n=k("hr"),f=y(),v=k("a"),$=z("large avater img"),m=y(),a&&a.c(),d=V(),this.h()},l(s){J(e.$$.fragment,s),l=E(s),J(t.$$.fragment,s),r=E(s),n=b(s,"HR",{}),f=E(s),v=b(s,"A",{href:!0,rel:!0,target:!0});var w=N(v);$=T(w,"large avater img"),w.forEach(_),m=E(s),a&&a.l(s),d=V(),this.h()},h(){g(v,"href",c=te(`https://media.zlongame.com/media/news/cn/tdj/info/data/hero/${i[0].role.pic}.png`,960)),g(v,"rel","noopener"),g(v,"target","_img")},m(s,w){M(e,s,w),p(s,l,w),M(t,s,w),p(s,r,w),p(s,n,w),p(s,f,w),p(s,v,w),S(v,$),p(s,m,w),a&&a.m(s,w),p(s,d,w),h=!0},p(s,[w]){var I;const L={};w&1&&(L.title="英靈："+((I=s[0].role)==null?void 0:I.name)),e.$set(L);const H={};w&1&&(H.data=s[0].role),t.$set(H),(!h||w&1&&c!==(c=te(`https://media.zlongame.com/media/news/cn/tdj/info/data/hero/${s[0].role.pic}.png`,960)))&&g(v,"href",c),a.p(s,w)},i(s){h||(O(e.$$.fragment,s),O(t.$$.fragment,s),O(a),h=!0)},o(s){P(e.$$.fragment,s),P(t.$$.fragment,s),P(a),h=!1},d(s){s&&(_(l),_(r),_(n),_(f),_(v),_(m),_(d)),j(e,s),j(t,s),a&&a.d(s)}}}function Ve(i,e,l){let{data:t}=e,r;return de(()=>{l(1,r=Ee(t.role))}),i.$$set=n=>{"data"in n&&l(0,t=n.data)},[t,r]}class xe extends G{constructor(e){super(),Y(this,e,Ve,Ue,B,{data:0})}}export{xe as component,Ze as universal};
