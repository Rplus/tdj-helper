import{H as z}from"../chunks/control.CYgJF_JY.js";import{f as I,R as M}from"../chunks/Role.YyvT77g7.js";import{$ as T,a0 as q,U as d,P as D,s as F,a as $,F as w,c as S,i as h,f as i,D as L,e as k,u as H,b,k as N,v as j,I as Q,m as J,w as U,d as A,g as B,n as G}from"../chunks/scheduler.DaxL_F1W.js";import{g as K,b as f,e as V,t as g,S as W,i as X,c as C,a as P,m as E,d as x}from"../chunks/index.8Z2Ob-eK.js";import{H as Y}from"../chunks/Header.CjiX-xIJ.js";function O(t,e){const n=e.token={};function r(a,l,m,p){if(e.token!==n)return;e.resolved=p;let c=e.ctx;m!==void 0&&(c=c.slice(),c[m]=p);const u=a&&(e.current=a)(c);let s=!1;e.block&&(e.blocks?e.blocks.forEach((o,_)=>{_!==l&&o&&(K(),f(o,1,1,()=>{e.blocks[_]===o&&(e.blocks[_]=null)}),V())}):e.block.d(1),u.c(),g(u,1),u.m(e.mount(),e.anchor),s=!0),e.block=u,e.blocks&&(e.blocks[l]=u),s&&D()}if(T(t)){const a=q();if(t.then(l=>{d(a),r(e.then,1,e.value,l),d(null)},l=>{if(d(a),r(e.catch,2,e.error,l),d(null),!e.hasCatch)throw l}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}}function Z(t,e,n){const r=e.slice(),{resolved:a}=t;t.current===t.then&&(r[t.value]=a),t.current===t.catch&&(r[t.error]=a),t.block.p(r,n)}function ee(t,e){throw new z(t,e)}new TextEncoder;const te=async({params:t})=>{try{return{role:I("name",t.slug),slug:t.slug}}catch(e){ee(404,e)}},de=Object.freeze(Object.defineProperty({__proto__:null,load:te},Symbol.toStringTag,{value:"Module"})),re={cn:"tdj-activity.zlongame.com",tw:"tdj-activity.game-beans.com"};async function ne(t){let e=t.pinyin_tw?R(t.pinyin_tw,"tw"):R(t.pinyin,"cn");return fetch(e).then(n=>n.json()).then(n=>{var r;return n=JSON.parse(n==null?void 0:n.contents),(r=n.data)==null?void 0:r.data[0]})}function R(t,e){return ae({module:"hero",type:"detail",query:t},e)}function ae(t={},e="cn"){t={id:e==="cn"?0:1,action:"info",module:"hero",type:"basic",...t};let n=new URLSearchParams;for(let l in t)n.set(l,t[l]);let r=`https://${re[e]}/tdj/data/mQuery.do?${n.toString()}`;return`https://api.allorigins.win/get?url=${encodeURIComponent(r)}`}function le(t){let e,n=t[3].message+"",r;return{c(){e=k("p"),r=H(n),this.h()},l(a){e=b(a,"P",{style:!0});var l=N(e);r=j(l,n),l.forEach(i),this.h()},h(){Q(e,"color","red")},m(a,l){h(a,e,l),J(e,r)},p(a,l){l&2&&n!==(n=a[3].message+"")&&U(r,n)},d(a){a&&i(e)}}}function se(t){let e,n=JSON.stringify(t[2],null,2)+"",r;return{c(){e=k("pre"),r=H(n),this.h()},l(a){e=b(a,"PRE",{class:!0});var l=N(e);r=j(l,n),l.forEach(i),this.h()},h(){A(e,"class","svelte-10gg4dq")},m(a,l){h(a,e,l),J(e,r)},p(a,l){l&2&&n!==(n=JSON.stringify(a[2],null,2)+"")&&U(r,n)},d(a){a&&i(e)}}}function ce(t){let e,n="...waiting";return{c(){e=k("p"),e.textContent=n},l(r){e=b(r,"P",{"data-svelte-h":!0}),B(e)!=="svelte-mv6tav"&&(e.textContent=n)},m(r,a){h(r,e,a)},p:G,d(r){r&&i(e)}}}function oe(t){var u;let e,n,r,a,l,m,p;e=new Y({props:{parent_path:"/role",title:"英靈："+((u=t[0].role)==null?void 0:u.name)}}),r=new M({props:{data:t[0].role,type:"card"}});let c={ctx:t,current:null,token:null,hasCatch:!0,pending:ce,then:se,catch:le,value:2,error:3};return O(m=t[1],c),{c(){C(e.$$.fragment),n=$(),C(r.$$.fragment),a=$(),l=w(),c.block.c()},l(s){P(e.$$.fragment,s),n=S(s),P(r.$$.fragment,s),a=S(s),l=w(),c.block.l(s)},m(s,o){E(e,s,o),h(s,n,o),E(r,s,o),h(s,a,o),h(s,l,o),c.block.m(s,c.anchor=o),c.mount=()=>l.parentNode,c.anchor=l,p=!0},p(s,[o]){var y;t=s;const _={};o&1&&(_.title="英靈："+((y=t[0].role)==null?void 0:y.name)),e.$set(_);const v={};o&1&&(v.data=t[0].role),r.$set(v),c.ctx=t,o&2&&m!==(m=t[1])&&O(m,c)||Z(c,t,o)},i(s){p||(g(e.$$.fragment,s),g(r.$$.fragment,s),p=!0)},o(s){f(e.$$.fragment,s),f(r.$$.fragment,s),p=!1},d(s){s&&(i(n),i(a),i(l)),x(e,s),x(r,s),c.block.d(s),c.token=null,c=null}}}function ue(t,e,n){let{data:r}=e,a;return L(()=>{n(1,a=ne(r.role))}),t.$$set=l=>{"data"in l&&n(0,r=l.data)},[r,a]}class fe extends W{constructor(e){super(),X(this,e,ue,oe,F,{data:0})}}export{fe as component,de as universal};
