import{s as K,a as T,e as w,H as U,c as F,b as E,k as x,l as Y,f as S,g as Z,d as _,i as I,m as p,D as N,u as L,v as j,p as W,n as tt,E as et}from"../chunks/scheduler.DaxL_F1W.js";import{S as nt,i as at,c as z,a as R,m as B,t as Q,b as V,d as X}from"../chunks/index.8Z2Ob-eK.js";import{H as rt}from"../chunks/Header.Bbysn6I2.js";import{F as lt}from"../chunks/Footer.CqaKy_4J.js";const mt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function ot(g){let e,i,a,c,u,b,m,d,k,h,$,t,o="巴哈私訊",v,M,A;return{c(){e=w("div"),i=w("details"),a=w("summary"),c=L(`原始資料：
					`),u=w("a"),b=L("天地劫M 三途川 @ Google SpreadSheet"),m=T(),d=w("iframe"),k=L(`

			----- ----- -----
			`),h=w("br"),$=L(`

			試算表非常需要志士協作，歡迎
			`),t=w("a"),t.textContent=o,v=L(`
			聯繫以開放協作權限 ：P`),this.h()},l(n){e=E(n,"DIV",{class:!0});var l=x(e);i=E(l,"DETAILS",{});var s=x(i);a=E(s,"SUMMARY",{});var r=x(a);c=j(r,`原始資料：
					`),u=E(r,"A",{rel:!0,target:!0,href:!0});var f=x(u);b=j(f,"天地劫M 三途川 @ Google SpreadSheet"),f.forEach(S),r.forEach(S),m=F(s),d=E(s,"IFRAME",{title:!0,id:!0,width:!0,frameborder:!0,class:!0}),x(d).forEach(S),s.forEach(S),k=j(l,`

			----- ----- -----
			`),h=E(l,"BR",{}),$=j(l,`

			試算表非常需要志士協作，歡迎
			`),t=E(l,"A",{href:!0,"data-svelte-h":!0}),Z(t)!=="svelte-uu4kq4"&&(t.textContent=o),v=j(l,`
			聯繫以開放協作權限 ：P`),l.forEach(S),this.h()},h(){_(u,"rel","noopener"),_(u,"target","_blank"),_(u,"href",G),_(d,"title","gsheet"),_(d,"id","iframe"),_(d,"width","580"),_(d,"frameborder","0"),_(d,"class","svelte-1ue3fp1"),_(t,"href","https://mailbox.gamer.com.tw/send.php?to=Rplus"),_(e,"class","footer-content svelte-1ue3fp1")},m(n,l){I(n,e,l),p(e,i),p(i,a),p(a,c),p(a,u),p(u,b),p(i,m),p(i,d),g[4](d),p(e,k),p(e,h),p(e,$),p(e,t),p(e,v),M||(A=W(i,"toggle",g[2]),M=!0)},p:tt,d(n){n&&S(e),g[4](null),M=!1,A()}}}function st(g){let e,i,a,c,u,b,m,d=`<table id="table"><caption id="caption"></caption> <colgroup><col width="2em"/> <col width="30%"/> <col width="30%"/> <col width="30%"/></colgroup> <thead id="thead"><tr><th>#</th> <th>靈門<br/>
						隊伍強化<br/>
						(不疊加)</th> <th>神樹<br/>
						英靈強化</th> <th>神龕<br/>
						秘寶</th></tr></thead> <tbody id="tbody"><td id="td" colspan="4">Loading~</td></tbody></table> <input type="reset"/> <input type="button" value="Print" id="print"/>`,k,h,$;return e=new rt({props:{title:"三途川選擇"}}),h=new lt({props:{$$slots:{default:[ot]},$$scope:{ctx:g}}}),{c(){z(e.$$.fragment),i=T(),a=w("div"),c=w("div"),u=new U(!1),b=T(),m=w("form"),m.innerHTML=d,k=T(),z(h.$$.fragment),this.h()},l(t){R(e.$$.fragment,t),i=F(t),a=E(t,"DIV",{class:!0});var o=x(a);c=E(o,"DIV",{});var v=x(c);u=Y(v,!1),v.forEach(S),b=F(o),m=E(o,"FORM",{id:!0,class:!0,"data-svelte-h":!0}),Z(m)!=="svelte-f7946y"&&(m.innerHTML=d),k=F(o),R(h.$$.fragment,o),o.forEach(S),this.h()},h(){u.a=null,_(m,"id","tableForm"),_(m,"class","form"),_(a,"class","workspace svelte-1ue3fp1")},m(t,o){B(e,t,o),I(t,i,o),I(t,a,o),p(a,c),u.m(g[1],c),p(a,b),p(a,m),p(a,k),B(h,a,null),$=!0},p(t,[o]){(!$||o&2)&&u.p(t[1]);const v={};o&33&&(v.$$scope={dirty:o,ctx:t}),h.$set(v)},i(t){$||(Q(e.$$.fragment,t),Q(h.$$.fragment,t),$=!0)},o(t){V(e.$$.fragment,t),V(h.$$.fragment,t),$=!1},d(t){t&&(S(i),S(a)),X(e,t),X(h)}}}let G="https://docs.google.com/spreadsheets/d/e/2PACX-1vThfydM3yjBOBsKXVmXDZo6Mr6iHiQO0di-C_J5Ct6bQ1weTorkbV8TOZ7wz0KmAPEk2qMj6zCqHz_J/pubhtml#";function it(g,e,i){let a,c;function u(){c&&i(0,c.src=G,c)}let b="";N(()=>{let d=new URLSearchParams(location.search),k=()=>{let n=new Date,l=1e3*60*60*24*7,s=new Date(2022,0,24),r=new Date(n-(n-s)%l);return`${r.getMonth()+1}`.padStart(2,"0")+`${r.getDate()}`.padStart(2,"0")},h=document.title,$=k(),t=d.get("date")||"0328-65";document.title=h+" - "+t;function o(){let n=[...document.querySelectorAll("input[data-value]:checked")];if(!n.length){M("");return}let l=n.map(s=>{var r;return((r=s.nextElementSibling)==null?void 0:r.textContent)||""}).filter(Boolean);l=[...new Set(l)].map(s=>{var f;let r=(f=document.querySelector(`input[data-value="${s}"]:checked`))==null?void 0:f.name;return{value:s,name:r}}),M(l.map(s=>`input[data-value="${s.value}"]:not([name="${s.name}"]) + span`).join(",")+"{ text-decoration: line-through; opacity: .5; }")}function v(n,l,s){return`<label><input type="radio" name="${n}" ${s&&'data-value="'+s+'"'}> <span>${l}</span></label>`}window.tableForm.addEventListener("input",o),window.tableForm.addEventListener("reset",()=>{M("")});function M(n=""){i(3,b=n)}document.querySelector("#print").addEventListener("click",()=>{window.print()}),fetch(`https://opensheet.elk.sh/1F3nsxZ5ndIhxajYIulzv3vEy2-PzO-6By74QPPWn170/${t}!c2:e22`).then(n=>n.json()).then(n=>{if(n.error){window.td.innerHTML=new Error("Fetching data fails. API 改了QQ 有空再修");return}let l=[];n.forEach((r,f)=>{let C=~~(f/4)+1,y=f%4+1,P={content:[],title:`${C}-${y}`,boss:y===4};for(let D in r){let H=D.slice(0,2),O=r[D],q=y!==4&&H==="靈門";P.content.push({type:H,checkbox:q,value:q?O.split(`
`).map(J=>J.trim()):O.trim()})}l[f]=P});let s=l.map(r=>{var C;let f="";return r.boss?f=`<td colspan="3">${((C=r.content[0])==null?void 0:C.value)||""}</td>`:f=r.content.map(y=>{var D;let P="";return((D=y.value)==null?void 0:D.length)>2?P=y.checkbox?y.value.map(H=>v(r.title,H,H)).join(""):v(r.title,y.value):P=y.value||"",`<td class="${y.checkbox?"checkbox":""}">${P}</td>`}).join(""),`
	      <tr>
	        <td>${r.title}</td>
	        ${f}
	      </tr>
	    `});window.tbody.innerHTML=s.join("")}).catch(n=>window.table.innerHTML=new Error(n))});function m(d){et[d?"unshift":"push"](()=>{c=d,i(0,c)})}return g.$$.update=()=>{g.$$.dirty&8&&i(1,a=b?`<style>${b}</style>`:"")},[c,a,u,b,m]}class ht extends nt{constructor(e){super(),at(this,e,it,st,K,{})}}export{ht as component,mt as universal};
