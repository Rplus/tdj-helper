var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function l(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode&&t.parentNode.removeChild(t)}function a(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function u(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function x(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}function m(t,e){t.value=null==e?"":e}function y(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}let b,v;function $(){if(void 0===b){b=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(t){b=!0}}return b}function j(t){v=t}const w=[],_=[];let k=[];const E=[],T=Promise.resolve();let M=!1;function A(t){k.push(t)}const C=new Set;let z=0;function L(){if(0!==z)return;const t=v;do{try{for(;z<w.length;){const t=w[z];z++,j(t),X(t.$$)}}catch(t){throw w.length=0,z=0,t}for(j(null),w.length=0,z=0;_.length;)_.pop()();for(let t=0;t<k.length;t+=1){const e=k[t];C.has(e)||(C.add(e),e())}k.length=0}while(w.length);for(;E.length;)E.pop()();M=!1,C.clear(),j(t)}function X(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(A)}}const N=new Set;function O(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];k.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),k=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function W(t,e){-1===t.$$.dirty[0]&&(w.push(t),M||(M=!0,T.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(r,i,s,a,u,f,d,x=[-1]){const p=v;j(r);const h=r.$$={fragment:null,ctx:[],props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(p?p.$$.context:[])),callbacks:n(),dirty:x,skip_bound:!1,root:i.target||p.$$.root};d&&d(h.root);let g=!1;if(h.ctx=s?s(r,i.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return h.ctx&&u(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),g&&W(r,t)),e})):[],h.update(),g=!0,o(h.before_update),h.fragment=!!a&&a(h.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);h.fragment&&h.fragment.l(t),t.forEach(c)}else h.fragment&&h.fragment.c();i.intro&&((m=r.$$.fragment)&&m.i&&(N.delete(m),m.i(y))),function(t,n,r,i){const{fragment:s,after_update:c}=t.$$;s&&s.m(n,r),i||A((()=>{const n=t.$$.on_mount.map(e).filter(l);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),c.forEach(A)}(r,i.target,i.anchor,i.customElement),L()}var m,y;j(p)}class H{$destroy(){O(this,1),this.$destroy=t}$on(e,n){if(!l(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function P(t,e,n){const o=t.slice();return o[18]=e[n],o[19]=e,o[20]=n,o}function S(t,e,n){const o=t.slice();return o[21]=e[n],o}function V(t,e,n){const o=t.slice();return o[24]=e[n],o}function q(t){let e,n;return{c(){e=u("div"),p(e,"class","dot--attacker svelte-1xts1jx"),p(e,"data-title",n=t[24].title),p(e,"tabindex","0"),y(e,"--x",t[24].x),y(e,"--y",t[24].y),y(e,"--bgc",t[24].color)},m(t,n){s(t,e,n)},p(t,o){16&o&&n!==(n=t[24].title)&&p(e,"data-title",n),16&o&&y(e,"--x",t[24].x),16&o&&y(e,"--y",t[24].y),16&o&&y(e,"--bgc",t[24].color)},d(t){t&&c(e)}}}function I(t){let e,n,o;return{c(){e=u("div"),p(e,"class","dot svelte-1xts1jx"),p(e,"data-range",n=t[21].range),p(e,"data-title",o=t[21].title),y(e,"--x",t[21].x),y(e,"--y",t[21].y),y(e,"--bgc",t[21].color)},m(t,n){s(t,e,n)},p(t,l){4&l&&n!==(n=t[21].range)&&p(e,"data-range",n),4&l&&o!==(o=t[21].title)&&p(e,"data-title",o),4&l&&y(e,"--x",t[21].x),4&l&&y(e,"--y",t[21].y),4&l&&y(e,"--bgc",t[21].color)},d(t){t&&c(e)}}}function D(t){let e,n,l,r,a,y,b,v,$,j,w,_,k,E,T,M,A,C,z,L,X,N,O,W,B,H,P,S,V=t[18].title+"";function q(){t[6].call(v,t[19],t[20])}function I(){t[7].call(E,t[19],t[20])}function D(){t[8].call(L,t[19],t[20])}function F(){t[9].call(B,t[19],t[20])}return{c(){e=u("dt"),n=f(V),l=f(" - "),r=u("small"),r.textContent="護衛",a=u("dd"),y=u("label"),b=f("x:\n\t\t\t\t\t\t"),v=u("input"),j=d(),w=u("dd"),_=u("label"),k=f("y:\n\t\t\t\t\t\t"),E=u("input"),M=d(),A=u("dd"),C=u("label"),z=f("護衛範圍:\n\t\t\t\t\t\t"),L=u("input"),X=d(),N=u("dd"),O=u("label"),W=f("顏色:\n\t\t\t\t\t\t"),B=u("input"),H=d(),p(e,"class","svelte-1xts1jx"),p(v,"type","number"),p(v,"max",$=t[0]-1),p(v,"min","0"),p(a,"class","svelte-1xts1jx"),p(E,"type","number"),p(E,"max",T=t[0]-1),p(E,"min","0"),p(w,"class","svelte-1xts1jx"),p(L,"type","number"),p(L,"max","3"),p(L,"min","0"),p(A,"class","svelte-1xts1jx"),p(B,"type","color"),p(N,"class","svelte-1xts1jx")},m(o,c){s(o,e,c),i(e,n),i(e,l),i(e,r),s(o,a,c),i(a,y),i(y,b),i(y,v),m(v,t[18].x),i(a,j),s(o,w,c),i(w,_),i(_,k),i(_,E),m(E,t[18].y),i(w,M),s(o,A,c),i(A,C),i(C,z),i(C,L),m(L,t[18].range),i(A,X),s(o,N,c),i(N,O),i(O,W),i(O,B),m(B,t[18].color),i(N,H),P||(S=[x(v,"input",q),x(E,"input",I),x(L,"input",D),x(B,"input",F)],P=!0)},p(e,o){t=e,4&o&&V!==(V=t[18].title+"")&&g(n,V),1&o&&$!==($=t[0]-1)&&p(v,"max",$),4&o&&h(v.value)!==t[18].x&&m(v,t[18].x),1&o&&T!==(T=t[0]-1)&&p(E,"max",T),4&o&&h(E.value)!==t[18].y&&m(E,t[18].y),4&o&&h(L.value)!==t[18].range&&m(L,t[18].range),4&o&&m(B,t[18].color)},d(t){t&&c(e),t&&c(a),t&&c(w),t&&c(A),t&&c(N),P=!1,o(S)}}}function F(e){let n,l,r,b,v,j,w,_,k,E,T,M,C,z,L,X,N,O,W,B,H,F,G,J,K,Q,R,U,Y,Z,tt,et,nt,ot,lt,rt,it,st,ct,at,ut,ft,dt,xt=e[1].title+"",pt=e[4],ht=[];for(let t=0;t<pt.length;t+=1)ht[t]=q(V(e,pt,t));let gt=e[2],mt=[];for(let t=0;t<gt.length;t+=1)mt[t]=I(S(e,gt,t));let yt=e[2],bt=[];for(let t=0;t<yt.length;t+=1)bt[t]=D(P(e,yt,t));return{c(){n=u("div"),l=u("h1"),l.innerHTML='<a href="../">../</a>\n\t天地劫M 多重護衛優先級判定模擬',r=d(),b=u("div"),v=u("div"),j=u("div"),_=d();for(let t=0;t<ht.length;t+=1)ht[t].c();k=d();for(let t=0;t<mt.length;t+=1)mt[t].c();T=d(),M=u("div"),M.innerHTML='圖中方格為攻擊者可站的位置<br/>\n底色對應護衛單位\n<br/> \n<br/> \n<details open=""><summary>== 護衛優先級 說明 ==</summary> \n<pre><u>規則一：判定各護衛與「被攻擊者」距離</u>\n離「被攻擊者」最近者，最優先護衛\n\n<u>規則二：判定各護衛與「攻擊者」距離</u>\n若有複數最近的護衛群，改判定各護衛與「攻擊者」距離\n※ 坦X：上場順序最先者\n\n<u>狀況-1</u>：坦X 距離攻擊者最近\n  則依正序護衛\n  (=&gt; 坦X護衛)\n\n<u>狀況-2</u>：坦X 距離攻擊者不是最近\n  比坦X更近的那堆中，依倒序護衛\n  (愈後上場者、護衛優先級愈高)\n</pre></details>',C=d(),z=u("hr"),L=d(),X=u("form"),N=u("fieldset"),O=u("legend"),O.textContent="自訂區塊",W=d(),B=u("dl");for(let t=0;t<bt.length;t+=1)bt[t].c();H=u("dt"),F=f(xt),G=f(" - "),J=u("small"),J.textContent="被攻擊目標",K=u("dd"),Q=u("label"),R=f("x:\n\t\t\t\t\t"),U=u("input"),Z=d(),tt=u("dd"),et=u("label"),nt=f("y:\n\t\t\t\t\t"),ot=u("input"),rt=d(),it=u("dt"),it.textContent="格子數:\n\t\t\t",st=u("dd"),ct=u("input"),at=d(),ut=u("footer"),ut.innerHTML='<hr class="svelte-1xts1jx"/>\n\t\t資料參考：\n\t\t<a href="https://www.bilibili.com/video/BV1VB4y1y7fh/" target="_blank" rel="noreferrer noopener">「天地劫」多T护卫机制 详解 @ bilibili by u/墨_源</a>',p(l,"class","svelte-1xts1jx"),p(j,"class","dot attackee svelte-1xts1jx"),p(j,"data-title",w=e[1].title),y(j,"--x",e[1].x),y(j,"--y",e[1].y),p(v,"class","map svelte-1xts1jx"),y(v,"font-size",e[3]/e[0]+"px"),y(v,"height",e[3]+"px"),A((()=>e[5].call(v))),p(M,"class","intro"),p(z,"class","svelte-1xts1jx"),p(b,"class","map-box svelte-1xts1jx"),p(O,"class","svelte-1xts1jx"),p(H,"class","svelte-1xts1jx"),p(U,"type","number"),p(U,"max",Y=e[0]-1),p(U,"min","0"),p(K,"class","svelte-1xts1jx"),p(ot,"type","number"),p(ot,"max",lt=e[0]-1),p(ot,"min","0"),p(tt,"class","svelte-1xts1jx"),p(it,"class","svelte-1xts1jx"),p(ct,"type","number"),p(ct,"min","4"),p(st,"class","svelte-1xts1jx"),p(N,"class","svelte-1xts1jx"),p(X,"class","svelte-1xts1jx"),p(ut,"class","info svelte-1xts1jx"),p(n,"class","workspace svelte-1xts1jx")},m(t,o){s(t,n,o),i(n,l),i(n,r),i(n,b),i(b,v),i(v,j),i(v,_);for(let t=0;t<ht.length;t+=1)ht[t]&&ht[t].m(v,null);i(v,k);for(let t=0;t<mt.length;t+=1)mt[t]&&mt[t].m(v,null);E=function(t,e){"static"===getComputedStyle(t).position&&(t.style.position="relative");const n=u("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const o=$();let l;return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=x(window,"message",(t=>{t.source===n.contentWindow&&e()}))):(n.src="about:blank",n.onload=()=>{l=x(n.contentWindow,"resize",e),e()}),i(t,n),()=>{(o||l&&n.contentWindow)&&l(),c(n)}}(v,e[5].bind(v)),i(b,T),i(b,M),i(b,C),i(b,z),i(n,L),i(n,X),i(X,N),i(N,O),i(N,W),i(N,B);for(let t=0;t<bt.length;t+=1)bt[t]&&bt[t].m(B,null);i(B,H),i(H,F),i(H,G),i(H,J),i(B,K),i(K,Q),i(Q,R),i(Q,U),m(U,e[1].x),i(K,Z),i(B,tt),i(tt,et),i(et,nt),i(et,ot),m(ot,e[1].y),i(tt,rt),i(B,it),i(B,st),i(st,ct),m(ct,e[0]),i(n,at),i(n,ut),ft||(dt=[x(U,"input",e[10]),x(ot,"input",e[11]),x(ct,"input",e[12])],ft=!0)},p(t,[e]){if(2&e&&w!==(w=t[1].title)&&p(j,"data-title",w),2&e&&y(j,"--x",t[1].x),2&e&&y(j,"--y",t[1].y),16&e){let n;for(pt=t[4],n=0;n<pt.length;n+=1){const o=V(t,pt,n);ht[n]?ht[n].p(o,e):(ht[n]=q(o),ht[n].c(),ht[n].m(v,k))}for(;n<ht.length;n+=1)ht[n].d(1);ht.length=pt.length}if(4&e){let n;for(gt=t[2],n=0;n<gt.length;n+=1){const o=S(t,gt,n);mt[n]?mt[n].p(o,e):(mt[n]=I(o),mt[n].c(),mt[n].m(v,null))}for(;n<mt.length;n+=1)mt[n].d(1);mt.length=gt.length}if(9&e&&y(v,"font-size",t[3]/t[0]+"px"),8&e&&y(v,"height",t[3]+"px"),5&e){let n;for(yt=t[2],n=0;n<yt.length;n+=1){const o=P(t,yt,n);bt[n]?bt[n].p(o,e):(bt[n]=D(o),bt[n].c(),bt[n].m(B,H))}for(;n<bt.length;n+=1)bt[n].d(1);bt.length=yt.length}2&e&&xt!==(xt=t[1].title+"")&&g(F,xt),1&e&&Y!==(Y=t[0]-1)&&p(U,"max",Y),2&e&&h(U.value)!==t[1].x&&m(U,t[1].x),1&e&&lt!==(lt=t[0]-1)&&p(ot,"max",lt),2&e&&h(ot.value)!==t[1].y&&m(ot,t[1].y),1&e&&h(ct.value)!==t[0]&&m(ct,t[0])},i:t,o:t,d(t){t&&c(n),a(ht,t),a(mt,t),E(),a(bt,t),ft=!1,o(dt)}}}function G(t,e){return t.index-e.index}function J(t,e,n){let o,l=6,r={index:10,order:10,title:"受",x:2,y:2},i=[{index:1,order:1,title:"坦1",x:2,y:0,range:2,color:"#ff9999"},{index:2,order:2,title:"坦2",x:4,y:2,range:3,color:"#99ff99"},{index:3,order:3,title:"坦3",x:2,y:4,range:2,color:"#9999ff"},{index:4,order:4,title:"坦4",x:0,y:2,range:2,color:"#99ff33"}],s=[],c={title:""};function a(t){let e=[],o=function(){let t=[],e=2*l;return i.forEach((n=>{if(n.range<n.distance2T)return null;e>=n.distance2T&&(e=n.distance2T,t[n.distance2T]||(t[n.distance2T]=[]),t[n.distance2T].push(n))})),t[e].sort(G)}();for(let t=l-1;t>=0;t--)for(let n=l-1;n>=0;n--){let r=u(t,n,o);e[t+n*l]={title:`${r.title}`,x:t,y:n,color:r.color}}n(4,s=e)}function u(t,e,n){if(!n||0===n.length)return c;let o,l=n[0];if(1===n.length)return l;let r=n.filter(((n,l)=>(n.distance2A=Math.abs(n.y-e)+Math.abs(n.x-t),l||(o=n.distance2A),o>n.distance2A)));return r.length?r[r.length-1]:l}return t.$$.update=()=>{7&t.$$.dirty&&(i.forEach((t=>{t.distance2T=Math.abs(t.y-r.y)+Math.abs(t.x-r.x)})),a())},[l,r,i,o,s,function(){o=this.clientWidth,n(3,o)},function(t,e){t[e].x=h(this.value),n(2,i)},function(t,e){t[e].y=h(this.value),n(2,i)},function(t,e){t[e].range=h(this.value),n(2,i)},function(t,e){t[e].color=this.value,n(2,i)},function(){r.x=h(this.value),n(1,r)},function(){r.y=h(this.value),n(1,r)},function(){l=h(this.value),n(0,l)}]}return new class extends H{constructor(t){super(),B(this,t,J,F,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
